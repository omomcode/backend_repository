"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[3578],{23402:(vn,Wt,g)=>{g.d(Wt,{A:()=>At});var s=g(55506);const At={getAllOrders:async()=>{try{return await(0,s.l1)("/omcommerce/order/find?populate=*",{method:"GET"})}catch(ht){throw ht}},deleteOrder:async ht=>{try{return await(0,s.l1)(`/omcommerce/order/delete/${ht}`,{method:"DELETE"})}catch(jt){console.error(jt)}}}},73990:(vn,Wt,g)=>{g.r(Wt),g.d(Wt,{default:()=>Me});var s=g(92132),I=g(42455),At=g(4198),ht=g(94061),jt=g(30893),Ut=g(90151),Et=g(68074),st=g(4181),V=g(76021),tt=g(3036),Bt=g(7537),xe=g(85963),A=g(21272),le=g(30462),we=g(48323),$t=g(55506),Se=g(70659);const te=JSON.parse('[{"label":"Australian dollar","value":"AUD"},{"label":"Brazilian real","value":"BRL"},{"label":"Canadian dollar","value":"CAD"},{"label":"Chinese Renmenbi","value":"CNY"},{"label":"Czech koruna","value":"CZK"},{"label":"Danish krone","value":"DKK"},{"label":"Euro","value":"EUR"},{"label":"Hong Kong dollar","value":"HKD"},{"label":"Hungarian forint","value":"HUF"},{"label":"Israeli new shekel","value":"ILS"},{"label":"Japanese yen","value":"JPY"},{"label":"Malaysian ringgit","value":"MYR"},{"label":"Mexican peso","value":"MXN"},{"label":"New Taiwan dollar","value":"TWD"},{"label":"New Zealand dollar","value":"NZD"},{"label":"Norwegian krone","value":"NOK"},{"label":"Philippine peso","value":"PHP"},{"label":"Polish z\u0142oty","value":"PLN"},{"label":"Pound sterling","value":"GBP"},{"label":"Singapore dollar","value":"SGD"},{"label":"Swedish krona","value":"SEK"},{"label":"Swiss franc","value":"CHF"},{"label":"Thai baht","value":"THB"},{"label":"United States dollar","value":"USD"}]');var K=g(20636);const Pe={id:0,currency:""},Ue=()=>{const[Kt,Z]=(0,A.useState)(!0),[ie,Gt]=(0,A.useState)(!0),[Te,kt]=(0,A.useState)(Pe),[Lt,me]=(0,A.useState)(void 0),[xt,vt]=(0,A.useState)({}),[St,Xt]=(0,A.useState)(!1),ue=te.map(J=>({value:J.value,label:`${J.label} (${J.value})`}));(0,A.useEffect)(()=>{at()},[]);const ee=J=>{me(J),J!==void 0&&L({target:{name:"currency",value:J}})},L=J=>{const{name:lt,value:W}=J.target;kt({...Te,[lt]:W}),vt({...xt,[lt]:""}),Xt(!1)},at=async()=>{try{const J=await Se.A.getAllCurrency();J!==void 0&&(Gt(!1),kt(J),me(J.currency))}catch(J){console.error("Error fetching data:",J)}finally{Z(!1)}},dt=async J=>{const lt={};if(J.currency||(lt.currency="Currency is required"),vt(lt),Object.keys(lt).length>0){console.error("Please fill in all required fields");return}ie?(Xt(!1),await Se.A.addCurrency(J),Gt(!1)):(Xt(!1),await Se.A.editCurrency(J.id,J)),await at()};return Kt?(0,s.jsx)($t.Bl,{}):(0,s.jsx)(I.P,{children:(0,s.jsxs)(At.s,{children:[St&&(0,s.jsx)(K.F,{closeLabel:"Close",onClose:()=>Xt(!1),title:"Error",variant:"danger",children:"Fill all required fields."}),(0,s.jsxs)(ht.a,{padding:"3rem",background:"neutral0",borderRadius:"4px",style:{boxShadow:"rgba(3, 3, 5, 0.35) 1px 1px 10px"},children:[(0,s.jsx)(jt.o,{variant:"beta",children:"Paypal currency"}),(0,s.jsx)(Ut.x,{gap:5,marginBottom:"2rem",children:(0,s.jsx)(Et.E,{col:6,s:12,children:(0,s.jsxs)(ht.a,{marginTop:"1rem",children:[(0,s.jsx)(we.Z,{label:"Currency",placeholder:"Select a currency",hint:"Currency used in paypal payment",onClear:()=>{ee(void 0)},value:Lt,onChange:ee,required:!0,children:ue.map(J=>(0,s.jsx)(we.eY,{value:J.value,children:J.label},J.value))}),xt.currency&&(0,s.jsx)(jt.o,{textColor:"danger600",children:xt.currency})]})})}),(0,s.jsx)(xe.$,{size:"L",onClick:()=>dt(Te),variant:"secondary",children:"Save"})]})]})})},Me=({handleSetSteps:Kt,st:Z,steps:ie,pp:Gt})=>{const Te={id:1,live_paypal_client_id:"",live_paypal_client_secret:"",sandbox_paypal_client_id:"",sandbox_paypal_client_secret:"",live:!1,paypalSelected:!1,payProGlobalSelected:!1,paymentThreeSelected:!1},[kt,Lt]=(0,A.useState)(Te),[me,xt]=(0,A.useState)(!0),[vt,St]=(0,A.useState)(!0),[Xt,ue]=(0,A.useState)("sandbox"),[ee,L]=(0,A.useState)(!1),[at,dt]=(0,A.useState)(!1),[J,lt]=(0,A.useState)(!1);(0,A.useEffect)(()=>{W()},[]);const W=async()=>{vt||St(!0);try{const N=await le.A.getAllPaypalSetups();Z===1&&!N.paypalSelected&&Kt(mt),Lt(N),L(N.paypalSelected),dt(N.payProGlobalSelected),lt(N.paymentThreeSelected),ue(N.live===!0?"live":"sandbox"),xt(!1),Lt(N),L(N.paypalSelected),dt(N.payProGlobalSelected),lt(N.paymentThreeSelected),ue(N.live===!0?"live":"sandbox")}catch(N){console.error("Error fetching data:",N)}finally{St(!1)}},R=N=>{const{name:_,value:ce}=N.target;Lt({...kt,[_]:ce})},z=async N=>{const _={sandbox_paypal_client_id:N.sandbox_paypal_client_id?N.sandbox_paypal_client_id:void 0,sandbox_paypal_client_secret:N.sandbox_paypal_client_secret?N.sandbox_paypal_client_secret:void 0,live_paypal_client_id:N.live_paypal_client_id?N.live_paypal_client_id:void 0,live_paypal_client_secret:N.live_paypal_client_secret?N.live_paypal_client_secret:void 0,live:Xt!=="sandbox",paypalSelected:ee,payProGlobalSelected:at,paymentThreeSelected:J};Object.keys(_).forEach(ce=>_[ce]===void 0&&delete _[ce]),me?await le.A.addPaypalSetup(_):await le.A.editPaypalSetup(N.id,_),W()},nt=["General","Payment","Shipping","Tax","Final"],mt=["General","Payment","Final"];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.P,{children:(0,s.jsx)(At.s,{children:(0,s.jsxs)(ht.a,{padding:"3rem",marginTop:"3rem",background:"neutral0",borderRadius:"4px",style:{boxShadow:"rgba(3, 3, 5, 0.35) 1px 1px 10px"},children:[(0,s.jsx)(jt.o,{variant:"beta",children:"Select payment methods"}),(0,s.jsxs)(Ut.x,{gap:5,marginBottom:"2rem",children:[(0,s.jsx)(Et.E,{col:12,children:(0,s.jsx)(ht.a,{marginTop:"1rem",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)(st.S,{id:"paypalSelected",name:"paypalSelected",onValueChange:N=>{L(N),N&&Z===1?(Kt(nt),Gt(!0)):!N&&Z===1&&(Kt(mt),Gt(!1))},value:ee,children:"Paypal"})}),(0,s.jsx)("li",{children:(0,s.jsx)(st.S,{id:"payProGlobalSelected",name:"payProGlobalSelected",onValueChange:N=>dt(N),value:at,children:"Fast Spring"})}),(0,s.jsx)("li",{children:(0,s.jsx)(st.S,{id:"paymentThreeSelected",name:"paymentThreeSelected",onValueChange:N=>lt(N),value:J,children:"Stripe"})})]})})}),ee&&(0,s.jsxs)(s.Fragment,{children:[" ",(0,s.jsx)(Et.E,{padding:1,col:8,children:(0,s.jsx)(ht.a,{marginTop:"1rem",children:(0,s.jsxs)(V.z,{onChange:N=>ue(N.target.value),value:Xt,name:"meal",children:[(0,s.jsx)(tt.s,{value:"sandbox",children:"Sandbox"}),(0,s.jsx)(tt.s,{value:"live",children:"Live"})]})})}),(0,s.jsx)(Et.E,{col:6,s:12,children:(0,s.jsx)(ht.a,{marginTop:"1rem",children:(0,s.jsx)(Bt.k,{name:"live_paypal_client_id",type:"password",value:kt.live_paypal_client_id,onChange:R,fullWidth:!0,label:"Live paypal client id",hint:"Will be used when store goes live"})})}),(0,s.jsx)(Et.E,{col:6,s:12,children:(0,s.jsx)(ht.a,{marginTop:"1rem",children:(0,s.jsx)(Bt.k,{name:"live_paypal_client_secret",type:"password",value:kt.live_paypal_client_secret,onChange:R,fullWidth:!0,label:"Live paypal client secret",hint:"Will be used when store goes live"})})}),(0,s.jsx)(Et.E,{col:6,s:12,children:(0,s.jsx)(ht.a,{marginTop:"1rem",children:(0,s.jsx)(Bt.k,{name:"sandbox_paypal_client_id",type:"password",value:kt.sandbox_paypal_client_id,onChange:R,fullWidth:!0,label:"Sandbox paypal client id",hint:"Will be used when store is in sandbox mode"})})}),(0,s.jsx)(Et.E,{col:6,s:12,children:(0,s.jsx)(ht.a,{marginTop:"1rem",children:(0,s.jsx)(Bt.k,{name:"sandbox_paypal_client_secret",type:"password",value:kt.sandbox_paypal_client_secret,onChange:R,fullWidth:!0,label:"Sandbox paypal client secret",hint:"Will be used when store is in sandbox mode"})})})]})]}),(0,s.jsx)(xe.$,{onClick:()=>z(kt),variant:"secondary",children:"Save"})]})})}),ee&&(0,s.jsx)(Ue,{})]})}},68270:(vn,Wt,g)=>{g.r(Wt),g.d(Wt,{default:()=>Oc});var s=g(92132),I=g(21272),At=g(42455),ht=g(4198),jt=g(83997),Ut=g(94061),Et=g(23402);function st(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class V extends Map{constructor(e,n=le){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Bt(this,e))}has(e){return super.has(Bt(this,e))}set(e,n){return super.set(xe(this,e),n)}delete(e){return super.delete(A(this,e))}}class tt extends Set{constructor(e,n=le){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(Bt(this,e))}add(e){return super.add(xe(this,e))}delete(e){return super.delete(A(this,e))}}function Bt({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function xe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function A({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function le(t){return t!==null&&typeof t=="object"?t.valueOf():t}function we(t){return t}function $t(t,...e){return Z(t,we,we,e)}function Se(t,...e){return Z(t,Array.from,identity,e)}function te(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap(i=>i.pop().map(([a,o])=>[...i,a,o]));return t}function K(t,...e){return te(Se(t,...e),e)}function Pe(t,e,...n){return te(Ue(t,e,...n),n)}function Ne(t,e,...n){return Z(t,identity,e,n)}function Ue(t,e,...n){return Z(t,Array.from,e,n)}function It(t,...e){return Z(t,identity,Kt,e)}function Me(t,...e){return Z(t,Array.from,Kt,e)}function Kt(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function Z(t,e,n,r){return function i(a,o){if(o>=r.length)return n(a);const l=new V,u=r[o++];let c=-1;for(const h of a){const d=u(h,++c,a),f=l.get(d);f?f.push(h):l.set(d,[h])}for(const[h,d]of l)l.set(h,i(d,o));return e(l)}(t,0)}function ie(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Gt(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Te(t){return t}var kt=1,Lt=2,me=3,xt=4,vt=1e-6;function St(t){return"translate("+t+",0)"}function Xt(t){return"translate(0,"+t+")"}function ue(t){return e=>+t(e)}function ee(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function L(){return!this.__axis}function at(t,e){var n=[],r=null,i=null,a=6,o=6,l=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===kt||t===xt?-1:1,h=t===xt||t===Lt?"x":"y",d=t===kt||t===me?St:Xt;function f(p){var j=r??(e.ticks?e.ticks.apply(e,n):e.domain()),G=i??(e.tickFormat?e.tickFormat.apply(e,n):Te),x=Math.max(a,0)+l,v=e.range(),D=+v[0]+u,S=+v[v.length-1]+u,U=(e.bandwidth?ee:ue)(e.copy(),u),k=p.selection?p.selection():p,C=k.selectAll(".domain").data([null]),q=k.selectAll(".tick").data(j,e).order(),ut=q.exit(),_t=q.enter().append("g").attr("class","tick"),ct=q.select("line"),P=q.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),q=q.merge(_t),ct=ct.merge(_t.append("line").attr("stroke","currentColor").attr(h+"2",c*a)),P=P.merge(_t.append("text").attr("fill","currentColor").attr(h,c*x).attr("dy",t===kt?"0em":t===me?"0.71em":"0.32em")),p!==k&&(C=C.transition(p),q=q.transition(p),ct=ct.transition(p),P=P.transition(p),ut=ut.transition(p).attr("opacity",vt).attr("transform",function(pt){return isFinite(pt=U(pt))?d(pt+u):this.getAttribute("transform")}),_t.attr("opacity",vt).attr("transform",function(pt){var et=this.parentNode.__axis;return d((et&&isFinite(et=et(pt))?et:U(pt))+u)})),ut.remove(),C.attr("d",t===xt||t===Lt?o?"M"+c*o+","+D+"H"+u+"V"+S+"H"+c*o:"M"+u+","+D+"V"+S:o?"M"+D+","+c*o+"V"+u+"H"+S+"V"+c*o:"M"+D+","+u+"H"+S),q.attr("opacity",1).attr("transform",function(pt){return d(U(pt)+u)}),ct.attr(h+"2",c*a),P.attr(h,c*x).text(G),k.filter(L).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Lt?"start":t===xt?"end":"middle"),k.each(function(){this.__axis=U})}return f.scale=function(p){return arguments.length?(e=p,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),f):n.slice()},f.tickValues=function(p){return arguments.length?(r=p==null?null:Array.from(p),f):r&&r.slice()},f.tickFormat=function(p){return arguments.length?(i=p,f):i},f.tickSize=function(p){return arguments.length?(a=o=+p,f):a},f.tickSizeInner=function(p){return arguments.length?(a=+p,f):a},f.tickSizeOuter=function(p){return arguments.length?(o=+p,f):o},f.tickPadding=function(p){return arguments.length?(l=+p,f):l},f.offset=function(p){return arguments.length?(u=+p,f):u},f}function dt(t){return at(kt,t)}function J(t){return at(Lt,t)}function lt(t){return at(me,t)}function W(t){return at(xt,t)}function R(){}function z(t){return t==null?R:function(){return this.querySelector(t)}}function nt(t){typeof t!="function"&&(t=z(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,l=r[i]=new Array(o),u,c,h=0;h<o;++h)(u=a[h])&&(c=t.call(u,u.__data__,h,a))&&("__data__"in u&&(c.__data__=u.__data__),l[h]=c);return new de(r,this._parents)}function mt(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function N(){return[]}function _(t){return t==null?N:function(){return this.querySelectorAll(t)}}function ce(t){return function(){return mt(t.apply(this,arguments))}}function Dt(t){typeof t=="function"?t=ce(t):t=_(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],l=o.length,u,c=0;c<l;++c)(u=o[c])&&(r.push(t.call(u,u.__data__,c,o)),i.push(u));return new de(r,i)}function pe(t){return function(){return this.matches(t)}}function Ae(t){return function(e){return e.matches(t)}}var ge=Array.prototype.find;function $e(t){return function(){return ge.call(this.children,t)}}function ze(){return this.firstElementChild}function Be(t){return this.select(t==null?ze:$e(typeof t=="function"?t:Ae(t)))}var Ke=Array.prototype.filter;function ae(){return Array.from(this.children)}function he(t){return function(){return Ke.call(this.children,t)}}function fe(t){return this.selectAll(t==null?ae:he(typeof t=="function"?t:Ae(t)))}function rt(t){typeof t!="function"&&(t=pe(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,l=r[i]=[],u,c=0;c<o;++c)(u=a[c])&&t.call(u,u.__data__,c,a)&&l.push(u);return new de(r,this._parents)}function Vt(t){return new Array(t.length)}function oe(){return new de(this._enter||this._groups.map(Vt),this._parents)}function ye(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ye.prototype={constructor:ye,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ot(t){return function(){return t}}function Fe(t,e,n,r,i,a){for(var o=0,l,u=e.length,c=a.length;o<c;++o)(l=e[o])?(l.__data__=a[o],r[o]=l):n[o]=new ye(t,a[o]);for(;o<u;++o)(l=e[o])&&(i[o]=l)}function Rt(t,e,n,r,i,a,o){var l,u,c=new Map,h=e.length,d=a.length,f=new Array(h),p;for(l=0;l<h;++l)(u=e[l])&&(f[l]=p=o.call(u,u.__data__,l,e)+"",c.has(p)?i[l]=u:c.set(p,u));for(l=0;l<d;++l)p=o.call(t,a[l],l,a)+"",(u=c.get(p))?(r[l]=u,u.__data__=a[l],c.delete(p)):n[l]=new ye(t,a[l]);for(l=0;l<h;++l)(u=e[l])&&c.get(f[l])===u&&(i[l]=u)}function je(t){return t.__data__}function Ve(t,e){if(!arguments.length)return Array.from(this,je);var n=e?Rt:Fe,r=this._parents,i=this._groups;typeof t!="function"&&(t=Ot(t));for(var a=i.length,o=new Array(a),l=new Array(a),u=new Array(a),c=0;c<a;++c){var h=r[c],d=i[c],f=d.length,p=H(t.call(h,h&&h.__data__,c,r)),j=p.length,G=l[c]=new Array(j),x=o[c]=new Array(j),v=u[c]=new Array(f);n(h,d,G,x,v,p,e);for(var D=0,S=0,U,k;D<j;++D)if(U=G[D]){for(D>=S&&(S=D+1);!(k=x[S])&&++S<j;);U._next=k||null}}return o=new de(o,r),o._enter=l,o._exit=u,o}function H(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Pt(){return new de(this._exit||this._groups.map(Vt),this._parents)}function B(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Ct(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),l=new Array(i),u=0;u<o;++u)for(var c=n[u],h=r[u],d=c.length,f=l[u]=new Array(d),p,j=0;j<d;++j)(p=c[j]||h[j])&&(f[j]=p);for(;u<i;++u)l[u]=n[u];return new de(l,this._parents)}function Ee(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function it(t){t||(t=Yt);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],l=o.length,u=i[a]=new Array(l),c,h=0;h<l;++h)(c=o[h])&&(u[h]=c);u.sort(e)}return new de(i,this._parents).order()}function Yt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Pn(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function cr(){return Array.from(this)}function Nn(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function wt(){let t=0;for(const e of this)++t;return t}function Da(){return!this.node()}function ka(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,l;a<o;++a)(l=i[a])&&t.call(l,l.__data__,a,i);return this}var hr="http://www.w3.org/1999/xhtml";const Zr={svg:"http://www.w3.org/2000/svg",xhtml:hr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Un(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Zr.hasOwnProperty(e)?{space:Zr[e],local:t}:t}function Pa(t){return function(){this.removeAttribute(t)}}function Na(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ua(t,e){return function(){this.setAttribute(t,e)}}function $a(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function za(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Fa(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ia(t,e){var n=Un(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Na:Pa:typeof e=="function"?n.local?Fa:za:n.local?$a:Ua)(n,e))}function Qr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function La(t){return function(){this.style.removeProperty(t)}}function Oa(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ra(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ya(t,e,n){return arguments.length>1?this.each((e==null?La:typeof e=="function"?Ra:Oa)(t,e,n??"")):rn(this.node(),t)}function rn(t,e){return t.style.getPropertyValue(e)||Qr(t).getComputedStyle(t,null).getPropertyValue(e)}function Ha(t){return function(){delete this[t]}}function Wa(t,e){return function(){this[t]=e}}function Ba(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ka(t,e){return arguments.length>1?this.each((e==null?Ha:typeof e=="function"?Ba:Wa)(t,e)):this.node()[t]}function Jr(t){return t.trim().split(/^|\s+/)}function fr(t){return t.classList||new qr(t)}function qr(t){this._node=t,this._names=Jr(t.getAttribute("class")||"")}qr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ti(t,e){for(var n=fr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ei(t,e){for(var n=fr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ga(t){return function(){ti(this,t)}}function Xa(t){return function(){ei(this,t)}}function Va(t,e){return function(){(e.apply(this,arguments)?ti:ei)(this,t)}}function Za(t,e){var n=Jr(t+"");if(arguments.length<2){for(var r=fr(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Va:e?Ga:Xa)(n,e))}function Qa(){this.textContent=""}function Ja(t){return function(){this.textContent=t}}function qa(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function to(t){return arguments.length?this.each(t==null?Qa:(typeof t=="function"?qa:Ja)(t)):this.node().textContent}function eo(){this.innerHTML=""}function no(t){return function(){this.innerHTML=t}}function ro(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function io(t){return arguments.length?this.each(t==null?eo:(typeof t=="function"?ro:no)(t)):this.node().innerHTML}function ao(){this.nextSibling&&this.parentNode.appendChild(this)}function oo(){return this.each(ao)}function so(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lo(){return this.each(so)}function uo(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===hr&&e.documentElement.namespaceURI===hr?e.createElement(t):e.createElementNS(n,t)}}function co(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ni(t){var e=Un(t);return(e.local?co:uo)(e)}function ho(t){var e=typeof t=="function"?t:ni(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function fo(){return null}function mo(t,e){var n=typeof t=="function"?t:ni(t),r=e==null?fo:typeof e=="function"?e:z(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function po(){var t=this.parentNode;t&&t.removeChild(this)}function go(){return this.each(po)}function yo(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function vo(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xo(t){return this.select(t?vo:yo)}function wo(t){return arguments.length?this.property("__data__",t):this.node().__data__}function So(t){return function(e){t.call(this,e,this.__data__)}}function To(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function jo(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Co(t,e,n){return function(){var r=this.__on,i,a=So(e);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function _o(t,e,n){var r=To(t+""),i,a=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,h;u<c;++u)for(i=0,h=l[u];i<a;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(l=e?Co:jo,i=0;i<a;++i)this.each(l(r[i],e,n));return this}function ri(t,e,n){var r=Qr(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function bo(t,e){return function(){return ri(this,t,e)}}function Mo(t,e){return function(){return ri(this,t,e.apply(this,arguments))}}function Ao(t,e){return this.each((typeof e=="function"?Mo:bo)(t,e))}function*Eo(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var ii=[null];function de(t,e){this._groups=t,this._parents=e}function ai(){return new de([[document.documentElement]],ii)}function Do(){return this}de.prototype=ai.prototype={constructor:de,select:nt,selectAll:Dt,selectChild:Be,selectChildren:fe,filter:rt,data:Ve,enter:oe,exit:Pt,join:B,merge:Ct,selection:Do,order:Ee,sort:it,call:Pn,nodes:cr,node:Nn,size:wt,empty:Da,each:ka,attr:Ia,style:Ya,property:Ka,classed:Za,text:to,html:io,raise:oo,lower:lo,append:ho,insert:mo,remove:go,clone:xo,datum:wo,on:_o,dispatch:Ao,[Symbol.iterator]:Eo};const xn=ai;var ko={value:()=>{}};function oi(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new $n(n)}function $n(t){this._=t}function Po(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}$n.prototype=oi.prototype={constructor:$n,on:function(t,e){var n=this._,r=Po(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=No(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=si(n[i],t.name,e);else if(e==null)for(i in n)n[i]=si(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new $n(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function No(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function si(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ko,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const Uo=oi;var an=0,wn=0,Sn=0,li=1e3,zn,Tn,Fn=0,Ze=0,In=0,jn=typeof performance=="object"&&performance.now?performance:Date,ui=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function dr(){return Ze||(ui($o),Ze=jn.now()+In)}function $o(){Ze=0}function Ln(){this._call=this._time=this._next=null}Ln.prototype=ci.prototype={constructor:Ln,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?dr():+n)+(e==null?0:+e),!this._next&&Tn!==this&&(Tn?Tn._next=this:zn=this,Tn=this),this._call=t,this._time=n,mr()},stop:function(){this._call&&(this._call=null,this._time=1/0,mr())}};function ci(t,e,n){var r=new Ln;return r.restart(t,e,n),r}function zo(){dr(),++an;for(var t=zn,e;t;)(e=Ze-t._time)>=0&&t._call.call(void 0,e),t=t._next;--an}function hi(){Ze=(Fn=jn.now())+In,an=wn=0;try{zo()}finally{an=0,Io(),Ze=0}}function Fo(){var t=jn.now(),e=t-Fn;e>li&&(In-=e,Fn=t)}function Io(){for(var t,e=zn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:zn=n);Tn=t,mr(r)}function mr(t){if(!an){wn&&(wn=clearTimeout(wn));var e=t-Ze;e>24?(t<1/0&&(wn=setTimeout(hi,t-jn.now()-In)),Sn&&(Sn=clearInterval(Sn))):(Sn||(Fn=jn.now(),Sn=setInterval(Fo,li)),an=1,ui(hi))}}function fi(t,e,n){var r=new Ln;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Lo=Uo("start","end","cancel","interrupt"),Oo=[],di=0,mi=1,pr=2,On=3,pi=4,gr=5,Rn=6;function Yn(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Ro(t,n,{name:e,index:r,group:i,on:Lo,tween:Oo,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:di})}function yr(t,e){var n=Ce(t,e);if(n.state>di)throw new Error("too late; already scheduled");return n}function De(t,e){var n=Ce(t,e);if(n.state>On)throw new Error("too late; already running");return n}function Ce(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ro(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=ci(a,0,n.time);function a(c){n.state=mi,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var h,d,f,p;if(n.state!==mi)return u();for(h in r)if(p=r[h],p.name===n.name){if(p.state===On)return fi(o);p.state===pi?(p.state=Rn,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[h]):+h<e&&(p.state=Rn,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[h])}if(fi(function(){n.state===On&&(n.state=pi,n.timer.restart(l,n.delay,n.time),l(c))}),n.state=pr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===pr){for(n.state=On,i=new Array(f=n.tween.length),h=0,d=-1;h<f;++h)(p=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=p);i.length=d+1}}function l(c){for(var h=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=gr,1),d=-1,f=i.length;++d<f;)i[d].call(t,h);n.state===gr&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Rn,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Yo(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>pr&&r.state<gr,r.state=Rn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function Ho(t){return this.each(function(){Yo(this,t)})}function _e(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var gi=180/Math.PI,vr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yi(t,e,n,r,i,a){var o,l,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*gi,skewX:Math.atan(u)*gi,scaleX:o,scaleY:l}}var Hn;function Wo(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?vr:yi(e.a,e.b,e.c,e.d,e.e,e.f)}function Bo(t){return t==null||(Hn||(Hn=document.createElementNS("http://www.w3.org/2000/svg","g")),Hn.setAttribute("transform",t),!(t=Hn.transform.baseVal.consolidate()))?vr:(t=t.matrix,yi(t.a,t.b,t.c,t.d,t.e,t.f))}function vi(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function a(c,h,d,f,p,j){if(c!==d||h!==f){var G=p.push("translate(",null,e,null,n);j.push({i:G-4,x:_e(c,d)},{i:G-2,x:_e(h,f)})}else(d||f)&&p.push("translate("+d+e+f+n)}function o(c,h,d,f){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:_e(c,h)})):h&&d.push(i(d)+"rotate("+h+r)}function l(c,h,d,f){c!==h?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:_e(c,h)}):h&&d.push(i(d)+"skewX("+h+r)}function u(c,h,d,f,p,j){if(c!==d||h!==f){var G=p.push(i(p)+"scale(",null,",",null,")");j.push({i:G-4,x:_e(c,d)},{i:G-2,x:_e(h,f)})}else(d!==1||f!==1)&&p.push(i(p)+"scale("+d+","+f+")")}return function(c,h){var d=[],f=[];return c=t(c),h=t(h),a(c.translateX,c.translateY,h.translateX,h.translateY,d,f),o(c.rotate,h.rotate,d,f),l(c.skewX,h.skewX,d,f),u(c.scaleX,c.scaleY,h.scaleX,h.scaleY,d,f),c=h=null,function(p){for(var j=-1,G=f.length,x;++j<G;)d[(x=f[j]).i]=x.x(p);return d.join("")}}}var Ko=vi(Wo,"px, ","px)","deg)"),Go=vi(Bo,", ",")",")");function Xo(t,e){var n,r;return function(){var i=De(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Vo(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=De(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=l;break}u===c&&i.push(l)}a.tween=i}}function Zo(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Ce(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Xo:Vo)(n,t,e))}function xr(t,e,n){var r=t._id;return t.each(function(){var i=De(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Ce(i,r).value[e]}}function wr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function xi(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Cn(){}var _n=.7,Wn=1/_n,on="\\s*([+-]?\\d+)\\s*",bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ke="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qo=/^#([0-9a-f]{3,8})$/,Jo=new RegExp(`^rgb\\(${on},${on},${on}\\)$`),qo=new RegExp(`^rgb\\(${ke},${ke},${ke}\\)$`),ts=new RegExp(`^rgba\\(${on},${on},${on},${bn}\\)$`),es=new RegExp(`^rgba\\(${ke},${ke},${ke},${bn}\\)$`),ns=new RegExp(`^hsl\\(${bn},${ke},${ke}\\)$`),rs=new RegExp(`^hsla\\(${bn},${ke},${ke},${bn}\\)$`),wi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wr(Cn,Qe,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Si,formatHex:Si,formatHex8:is,formatHsl:as,formatRgb:Ti,toString:Ti});function Si(){return this.rgb().formatHex()}function is(){return this.rgb().formatHex8()}function as(){return Mi(this).formatHsl()}function Ti(){return this.rgb().formatRgb()}function Qe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Qo.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ji(e):n===3?new se(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Bn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Bn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Jo.exec(t))?new se(e[1],e[2],e[3],1):(e=qo.exec(t))?new se(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ts.exec(t))?Bn(e[1],e[2],e[3],e[4]):(e=es.exec(t))?Bn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ns.exec(t))?bi(e[1],e[2]/100,e[3]/100,1):(e=rs.exec(t))?bi(e[1],e[2]/100,e[3]/100,e[4]):wi.hasOwnProperty(t)?ji(wi[t]):t==="transparent"?new se(NaN,NaN,NaN,0):null}function ji(t){return new se(t>>16&255,t>>8&255,t&255,1)}function Bn(t,e,n,r){return r<=0&&(t=e=n=NaN),new se(t,e,n,r)}function os(t){return t instanceof Cn||(t=Qe(t)),t?(t=t.rgb(),new se(t.r,t.g,t.b,t.opacity)):new se}function Kn(t,e,n,r){return arguments.length===1?os(t):new se(t,e,n,r??1)}function se(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}wr(se,Kn,xi(Cn,{brighter(t){return t=t==null?Wn:Math.pow(Wn,t),new se(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?_n:Math.pow(_n,t),new se(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new se(Je(this.r),Je(this.g),Je(this.b),Gn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ci,formatHex:Ci,formatHex8:ss,formatRgb:_i,toString:_i}));function Ci(){return`#${qe(this.r)}${qe(this.g)}${qe(this.b)}`}function ss(){return`#${qe(this.r)}${qe(this.g)}${qe(this.b)}${qe((isNaN(this.opacity)?1:this.opacity)*255)}`}function _i(){const t=Gn(this.opacity);return`${t===1?"rgb(":"rgba("}${Je(this.r)}, ${Je(this.g)}, ${Je(this.b)}${t===1?")":`, ${t})`}`}function Gn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Je(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qe(t){return t=Je(t),(t<16?"0":"")+t.toString(16)}function bi(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new be(t,e,n,r)}function Mi(t){if(t instanceof be)return new be(t.h,t.s,t.l,t.opacity);if(t instanceof Cn||(t=Qe(t)),!t)return new be;if(t instanceof be)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,l=a-i,u=(a+i)/2;return l?(e===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-e)/l+2:o=(e-n)/l+4,l/=u<.5?a+i:2-a-i,o*=60):l=u>0&&u<1?0:o,new be(o,l,u,t.opacity)}function ls(t,e,n,r){return arguments.length===1?Mi(t):new be(t,e,n,r??1)}function be(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}wr(be,ls,xi(Cn,{brighter(t){return t=t==null?Wn:Math.pow(Wn,t),new be(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?_n:Math.pow(_n,t),new be(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new se(Sr(t>=240?t-240:t+120,i,r),Sr(t,i,r),Sr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new be(Ai(this.h),Xn(this.s),Xn(this.l),Gn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Gn(this.opacity);return`${t===1?"hsl(":"hsla("}${Ai(this.h)}, ${Xn(this.s)*100}%, ${Xn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ai(t){return t=(t||0)%360,t<0?t+360:t}function Xn(t){return Math.max(0,Math.min(1,t||0))}function Sr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function Ei(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function us(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,l=r<e-1?t[r+2]:2*a-i;return Ei((n-r/e)*e,o,i,a,l)}}function cs(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],l=t[(r+2)%e];return Ei((n-r/e)*e,i,a,o,l)}}const Tr=t=>()=>t;function Di(t,e){return function(n){return t+n*e}}function hs(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Rc(t,e){var n=e-t;return n?Di(t,n>180||n<-180?n-360*Math.round(n/360):n):constant(isNaN(t)?e:t)}function fs(t){return(t=+t)==1?ki:function(e,n){return n-e?hs(e,n,t):Tr(isNaN(e)?n:e)}}function ki(t,e){var n=e-t;return n?Di(t,n):Tr(isNaN(t)?e:t)}const Vn=function t(e){var n=fs(e);function r(i,a){var o=n((i=Kn(i)).r,(a=Kn(a)).r),l=n(i.g,a.g),u=n(i.b,a.b),c=ki(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=u(h),i.opacity=c(h),i+""}}return r.gamma=t,r}(1);function Pi(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),o,l;for(o=0;o<n;++o)l=Kn(e[o]),r[o]=l.r||0,i[o]=l.g||0,a[o]=l.b||0;return r=t(r),i=t(i),a=t(a),l.opacity=1,function(u){return l.r=r(u),l.g=i(u),l.b=a(u),l+""}}}var Yc=Pi(us),Hc=Pi(cs),jr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cr=new RegExp(jr.source,"g");function ds(t){return function(){return t}}function ms(t){return function(e){return t(e)+""}}function Ni(t,e){var n=jr.lastIndex=Cr.lastIndex=0,r,i,a,o=-1,l=[],u=[];for(t=t+"",e=e+"";(r=jr.exec(t))&&(i=Cr.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:_e(r,i)})),n=Cr.lastIndex;return n<e.length&&(a=e.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?u[0]?ms(u[0].x):ds(e):(e=u.length,function(c){for(var h=0,d;h<e;++h)l[(d=u[h]).i]=d.x(c);return l.join("")})}function Ui(t,e){var n;return(typeof e=="number"?_e:e instanceof Qe?Vn:(n=Qe(e))?(e=n,Vn):Ni)(t,e)}function ps(t){return function(){this.removeAttribute(t)}}function gs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ys(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function vs(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function xs(t,e,n){var r,i,a;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=l+"",o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,l)))}}function ws(t,e,n){var r,i,a;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=l+"",o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,l)))}}function Ss(t,e){var n=Un(t),r=n==="transform"?Go:Ui;return this.attrTween(t,typeof e=="function"?(n.local?ws:xs)(n,r,xr(this,"attr."+t,e)):e==null?(n.local?gs:ps)(n):(n.local?vs:ys)(n,r,e))}function Ts(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function js(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Cs(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&js(t,a)),n}return i._value=e,i}function _s(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Ts(t,a)),n}return i._value=e,i}function bs(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Un(t);return this.tween(n,(r.local?Cs:_s)(r,e))}function Ms(t,e){return function(){yr(this,t).delay=+e.apply(this,arguments)}}function As(t,e){return e=+e,function(){yr(this,t).delay=e}}function Es(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ms:As)(e,t)):Ce(this.node(),e).delay}function Ds(t,e){return function(){De(this,t).duration=+e.apply(this,arguments)}}function ks(t,e){return e=+e,function(){De(this,t).duration=e}}function Ps(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ds:ks)(e,t)):Ce(this.node(),e).duration}function Ns(t,e){if(typeof e!="function")throw new Error;return function(){De(this,t).ease=e}}function Us(t){var e=this._id;return arguments.length?this.each(Ns(e,t)):Ce(this.node(),e).ease}function $s(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;De(this,t).ease=n}}function zs(t){if(typeof t!="function")throw new Error;return this.each($s(this._id,t))}function Fs(t){typeof t!="function"&&(t=pe(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,l=r[i]=[],u,c=0;c<o;++c)(u=a[c])&&t.call(u,u.__data__,c,a)&&l.push(u);return new Ie(r,this._parents,this._name,this._id)}function Is(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),l=0;l<a;++l)for(var u=e[l],c=n[l],h=u.length,d=o[l]=new Array(h),f,p=0;p<h;++p)(f=u[p]||c[p])&&(d[p]=f);for(;l<r;++l)o[l]=e[l];return new Ie(o,this._parents,this._name,this._id)}function Ls(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Os(t,e,n){var r,i,a=Ls(e)?yr:De;return function(){var o=a(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}function Rs(t,e){var n=this._id;return arguments.length<2?Ce(this.node(),n).on.on(t):this.each(Os(n,t,e))}function Ys(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Hs(){return this.on("end.remove",Ys(this._id))}function Ws(t){var e=this._name,n=this._id;typeof t!="function"&&(t=z(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,c=a[o]=new Array(u),h,d,f=0;f<u;++f)(h=l[f])&&(d=t.call(h,h.__data__,f,l))&&("__data__"in h&&(d.__data__=h.__data__),c[f]=d,Yn(c[f],e,n,f,c,Ce(h,n)));return new Ie(a,this._parents,e,n)}function Bs(t){var e=this._name,n=this._id;typeof t!="function"&&(t=_(t));for(var r=this._groups,i=r.length,a=[],o=[],l=0;l<i;++l)for(var u=r[l],c=u.length,h,d=0;d<c;++d)if(h=u[d]){for(var f=t.call(h,h.__data__,d,u),p,j=Ce(h,n),G=0,x=f.length;G<x;++G)(p=f[G])&&Yn(p,e,n,G,f,j);a.push(f),o.push(h)}return new Ie(a,o,e,n)}var Ks=xn.prototype.constructor;function Gs(){return new Ks(this._groups,this._parents)}function Xs(t,e){var n,r,i;return function(){var a=rn(this,t),o=(this.style.removeProperty(t),rn(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function $i(t){return function(){this.style.removeProperty(t)}}function Vs(t,e,n){var r,i=n+"",a;return function(){var o=rn(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function Zs(t,e,n){var r,i,a;return function(){var o=rn(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),rn(this,t))),o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,l))}}function Qs(t,e){var n,r,i,a="style."+e,o="end."+a,l;return function(){var u=De(this,t),c=u.on,h=u.value[a]==null?l||(l=$i(e)):void 0;(c!==n||i!==h)&&(r=(n=c).copy()).on(o,i=h),u.on=r}}function Js(t,e,n){var r=(t+="")=="transform"?Ko:Ui;return e==null?this.styleTween(t,Xs(t,r)).on("end.style."+t,$i(t)):typeof e=="function"?this.styleTween(t,Zs(t,r,xr(this,"style."+t,e))).each(Qs(this._id,t)):this.styleTween(t,Vs(t,r,e),n).on("end.style."+t,null)}function qs(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function tl(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&qs(t,o,n)),r}return a._value=e,a}function el(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,tl(t,e,n??""))}function nl(t){return function(){this.textContent=t}}function rl(t){return function(){var e=t(this);this.textContent=e??""}}function il(t){return this.tween("text",typeof t=="function"?rl(xr(this,"text",t)):nl(t==null?"":t+""))}function al(t){return function(e){this.textContent=t.call(this,e)}}function ol(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&al(i)),e}return r._value=t,r}function sl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,ol(t))}function ll(){for(var t=this._name,e=this._id,n=zi(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],l=o.length,u,c=0;c<l;++c)if(u=o[c]){var h=Ce(u,e);Yn(u,t,n,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Ie(r,this._parents,t,n)}function ul(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var l={value:o},u={value:function(){--i===0&&a()}};n.each(function(){var c=De(this,r),h=c.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),c.on=e}),i===0&&a()})}var cl=0;function Ie(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function hl(t){return xn().transition(t)}function zi(){return++cl}var Le=xn.prototype;Ie.prototype=hl.prototype={constructor:Ie,select:Ws,selectAll:Bs,selectChild:Le.selectChild,selectChildren:Le.selectChildren,filter:Fs,merge:Is,selection:Gs,transition:ll,call:Le.call,nodes:Le.nodes,node:Le.node,size:Le.size,empty:Le.empty,each:Le.each,on:Rs,attr:Ss,attrTween:bs,style:Js,styleTween:el,text:il,textTween:sl,remove:Hs,tween:Zo,delay:Es,duration:Ps,ease:Us,easeVarying:zs,end:ul,[Symbol.iterator]:Le[Symbol.iterator]};function Wc(t){return t*t*t}function Bc(t){return--t*t*t+1}function fl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var dl={time:null,delay:0,duration:250,ease:fl};function ml(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function pl(t){var e,n;t instanceof Ie?(e=t._id,t=t._name):(e=zi(),(n=dl).time=dr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],l=o.length,u,c=0;c<l;++c)(u=o[c])&&Yn(u,t,e,c,o,n||ml(u,e));return new Ie(r,this._parents,t,e)}xn.prototype.interrupt=Ho,xn.prototype.transition=pl;var Fi={name:"drag"},_r={name:"space"},sn={name:"handle"},ln={name:"center"};const{abs:Ii,max:Zt,min:Qt}=Math;function Li(t){return[+t[0],+t[1]]}function br(t){return[Li(t[0]),Li(t[1])]}var Zn={name:"x",handles:["w","e"].map(Mn),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Qn={name:"y",handles:["n","s"].map(Mn),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},gl={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Mn),input:function(t){return t==null?null:br(t)},output:function(t){return t}},Oe={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Oi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ri={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},yl={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},vl={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Mn(t){return{type:t}}function xl(t){return!t.ctrlKey&&!t.button}function wl(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Sl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Mr(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Tl(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Kc(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Gc(){return Ar(Zn)}function Xc(){return Ar(Qn)}function Vc(){return Ar(gl)}function Ar(t){var e=wl,n=xl,r=Sl,i=!0,a=dispatch("start","brush","end"),o=6,l;function u(x){var v=x.property("__brush",G).selectAll(".overlay").data([Mn("overlay")]);v.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Oe.overlay).merge(v).each(function(){var S=Mr(this).extent;select(this).attr("x",S[0][0]).attr("y",S[0][1]).attr("width",S[1][0]-S[0][0]).attr("height",S[1][1]-S[0][1])}),x.selectAll(".selection").data([Mn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Oe.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var D=x.selectAll(".handle").data(t.handles,function(S){return S.type});D.exit().remove(),D.enter().append("rect").attr("class",function(S){return"handle handle--"+S.type}).attr("cursor",function(S){return Oe[S.type]}),x.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",j).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(x,v,D){x.tween?x.on("start.brush",function(S){h(this,arguments).beforestart().start(S)}).on("interrupt.brush end.brush",function(S){h(this,arguments).end(S)}).tween("brush",function(){var S=this,U=S.__brush,k=h(S,arguments),C=U.selection,q=t.input(typeof v=="function"?v.apply(this,arguments):v,U.extent),ut=interpolate(C,q);function _t(ct){U.selection=ct===1&&q===null?null:ut(ct),c.call(S),k.brush()}return C!==null&&q!==null?_t:_t(1)}):x.each(function(){var S=this,U=arguments,k=S.__brush,C=t.input(typeof v=="function"?v.apply(S,U):v,k.extent),q=h(S,U).beforestart();interrupt(S),k.selection=C===null?null:C,c.call(S),q.start(D).brush(D).end(D)})},u.clear=function(x,v){u.move(x,null,v)};function c(){var x=select(this),v=Mr(this).selection;v?(x.selectAll(".selection").style("display",null).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1]),x.selectAll(".handle").style("display",null).attr("x",function(D){return D.type[D.type.length-1]==="e"?v[1][0]-o/2:v[0][0]-o/2}).attr("y",function(D){return D.type[0]==="s"?v[1][1]-o/2:v[0][1]-o/2}).attr("width",function(D){return D.type==="n"||D.type==="s"?v[1][0]-v[0][0]+o:o}).attr("height",function(D){return D.type==="e"||D.type==="w"?v[1][1]-v[0][1]+o:o})):x.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(x,v,D){var S=x.__brush.emitter;return S&&(!D||!S.clean)?S:new d(x,v,D)}function d(x,v,D){this.that=x,this.args=v,this.state=x.__brush,this.active=0,this.clean=D}d.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(x,v){return this.starting?(this.starting=!1,this.emit("start",x,v)):this.emit("brush",x),this},brush:function(x,v){return this.emit("brush",x,v),this},end:function(x,v){return--this.active===0&&(delete this.state.emitter,this.emit("end",x,v)),this},emit:function(x,v,D){var S=select(this.that).datum();a.call(x,this.that,new BrushEvent(x,{sourceEvent:v,target:u,selection:t.output(this.state.selection),mode:D,dispatch:a}),S)}};function f(x){if(l&&!x.touches||!n.apply(this,arguments))return;var v=this,D=x.target.__data__.type,S=(i&&x.metaKey?D="overlay":D)==="selection"?Fi:i&&x.altKey?ln:sn,U=t===Qn?null:yl[D],k=t===Zn?null:vl[D],C=Mr(v),q=C.extent,ut=C.selection,_t=q[0][0],ct,P,pt=q[0][1],et,m,b=q[1][0],y,T,$=q[1][1],E,F,Y=0,X=0,Jt,Tt=U&&k&&i&&x.shiftKey,Ft,qt,yt=Array.from(x.touches||[x],O=>{const Mt=O.identifier;return O=pointer(O,v),O.point0=O.slice(),O.identifier=Mt,O});interrupt(v);var Ht=h(v,arguments,!0).beforestart();if(D==="overlay"){ut&&(Jt=!0);const O=[yt[0],yt[1]||yt[0]];C.selection=ut=[[ct=t===Qn?_t:Qt(O[0][0],O[1][0]),et=t===Zn?pt:Qt(O[0][1],O[1][1])],[y=t===Qn?b:Zt(O[0][0],O[1][0]),E=t===Zn?$:Zt(O[0][1],O[1][1])]],yt.length>1&&bt(x)}else ct=ut[0][0],et=ut[0][1],y=ut[1][0],E=ut[1][1];P=ct,m=et,T=y,F=E;var M=select(v).attr("pointer-events","none"),Q=M.selectAll(".overlay").attr("cursor",Oe[D]);if(x.touches)Ht.moved=w,Ht.ended=gt;else{var ot=select(x.view).on("mousemove.brush",w,!0).on("mouseup.brush",gt,!0);i&&ot.on("keydown.brush",ne,!0).on("keyup.brush",re,!0),dragDisable(x.view)}c.call(v),Ht.start(x,S.name);function w(O){for(const Mt of O.changedTouches||[O])for(const kn of yt)kn.identifier===Mt.identifier&&(kn.cur=pointer(Mt,v));if(Tt&&!Ft&&!qt&&yt.length===1){const Mt=yt[0];Ii(Mt.cur[0]-Mt[0])>Ii(Mt.cur[1]-Mt[1])?qt=!0:Ft=!0}for(const Mt of yt)Mt.cur&&(Mt[0]=Mt.cur[0],Mt[1]=Mt.cur[1]);Jt=!0,noevent(O),bt(O)}function bt(O){const Mt=yt[0],kn=Mt.point0;var Xe;switch(Y=Mt[0]-kn[0],X=Mt[1]-kn[1],S){case _r:case Fi:{U&&(Y=Zt(_t-ct,Qt(b-y,Y)),P=ct+Y,T=y+Y),k&&(X=Zt(pt-et,Qt($-E,X)),m=et+X,F=E+X);break}case sn:{yt[1]?(U&&(P=Zt(_t,Qt(b,yt[0][0])),T=Zt(_t,Qt(b,yt[1][0])),U=1),k&&(m=Zt(pt,Qt($,yt[0][1])),F=Zt(pt,Qt($,yt[1][1])),k=1)):(U<0?(Y=Zt(_t-ct,Qt(b-ct,Y)),P=ct+Y,T=y):U>0&&(Y=Zt(_t-y,Qt(b-y,Y)),P=ct,T=y+Y),k<0?(X=Zt(pt-et,Qt($-et,X)),m=et+X,F=E):k>0&&(X=Zt(pt-E,Qt($-E,X)),m=et,F=E+X));break}case ln:{U&&(P=Zt(_t,Qt(b,ct-Y*U)),T=Zt(_t,Qt(b,y+Y*U))),k&&(m=Zt(pt,Qt($,et-X*k)),F=Zt(pt,Qt($,E+X*k)));break}}T<P&&(U*=-1,Xe=ct,ct=y,y=Xe,Xe=P,P=T,T=Xe,D in Oi&&Q.attr("cursor",Oe[D=Oi[D]])),F<m&&(k*=-1,Xe=et,et=E,E=Xe,Xe=m,m=F,F=Xe,D in Ri&&Q.attr("cursor",Oe[D=Ri[D]])),C.selection&&(ut=C.selection),Ft&&(P=ut[0][0],T=ut[1][0]),qt&&(m=ut[0][1],F=ut[1][1]),(ut[0][0]!==P||ut[0][1]!==m||ut[1][0]!==T||ut[1][1]!==F)&&(C.selection=[[P,m],[T,F]],c.call(v),Ht.brush(O,S.name))}function gt(O){if(nopropagation(O),O.touches){if(O.touches.length)return;l&&clearTimeout(l),l=setTimeout(function(){l=null},500)}else dragEnable(O.view,Jt),ot.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);M.attr("pointer-events","all"),Q.attr("cursor",Oe.overlay),C.selection&&(ut=C.selection),Tl(ut)&&(C.selection=null,c.call(v)),Ht.end(O,S.name)}function ne(O){switch(O.keyCode){case 16:{Tt=U&&k;break}case 18:{S===sn&&(U&&(y=T-Y*U,ct=P+Y*U),k&&(E=F-X*k,et=m+X*k),S=ln,bt(O));break}case 32:{(S===sn||S===ln)&&(U<0?y=T-Y:U>0&&(ct=P-Y),k<0?E=F-X:k>0&&(et=m-X),S=_r,Q.attr("cursor",Oe.selection),bt(O));break}default:return}noevent(O)}function re(O){switch(O.keyCode){case 16:{Tt&&(Ft=qt=Tt=!1,bt(O));break}case 18:{S===ln&&(U<0?y=T:U>0&&(ct=P),k<0?E=F:k>0&&(et=m),S=sn,bt(O));break}case 32:{S===_r&&(O.altKey?(U&&(y=T-Y*U,ct=P+Y*U),k&&(E=F-X*k,et=m+X*k),S=ln):(U<0?y=T:U>0&&(ct=P),k<0?E=F:k>0&&(et=m),S=sn),Q.attr("cursor",Oe[D]),bt(O));break}default:return}noevent(O)}}function p(x){h(this,arguments).moved(x)}function j(x){h(this,arguments).ended(x)}function G(){var x=this.__brush||{selection:null};return x.extent=br(e.apply(this,arguments)),x.dim=t,x}return u.extent=function(x){return arguments.length?(e=typeof x=="function"?x:constant(br(x)),u):e},u.filter=function(x){return arguments.length?(n=typeof x=="function"?x:constant(!!x),u):n},u.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:constant(!!x),u):r},u.handleSize=function(x){return arguments.length?(o=+x,u):o},u.keyModifiers=function(x){return arguments.length?(i=!!x,u):i},u.on=function(){var x=a.on.apply(a,arguments);return x===a?u:x},u}function jl(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Jn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Zc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Yi=Symbol("implicit");function Hi(){var t=new V,e=[],n=[],r=Yi;function i(a){let o=t.get(a);if(o===void 0){if(r!==Yi)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new V;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Hi(e,n).unknown(r)},Jn.apply(i,arguments),i}function Er(){var t=Hi().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,l=!1,u=0,c=0,h=.5;delete t.unknown;function d(){var f=e().length,p=i<r,j=p?i:r,G=p?r:i;a=(G-j)/Math.max(1,f-u+c*2),l&&(a=Math.floor(a)),j+=(G-j-a*(f-u))*h,o=a*(1-u),l&&(j=Math.round(j),o=Math.round(o));var x=jl(f).map(function(v){return j+a*v});return n(p?x.reverse():x)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,l=!0,d()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(f){return arguments.length?(l=!!f,d()):l},t.padding=function(f){return arguments.length?(u=Math.min(1,c=+f),d()):u},t.paddingInner=function(f){return arguments.length?(u=Math.min(1,f),d()):u},t.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},t.align=function(f){return arguments.length?(h=Math.max(0,Math.min(1,f)),d()):h},t.copy=function(){return Er(e(),[r,i]).round(l).paddingInner(u).paddingOuter(c).align(h)},Jn.apply(d(),arguments)}function Wi(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Wi(e())},t}function Qc(){return Wi(Er.apply(null,arguments).paddingInner(1))}const Cl=Math.sqrt(50),_l=Math.sqrt(10),bl=Math.sqrt(2);function qn(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Cl?10:a>=_l?5:a>=bl?2:1;let l,u,c;return i<0?(c=Math.pow(10,-i)/o,l=Math.round(t*c),u=Math.round(e*c),l/c<t&&++l,u/c>e&&--u,c=-c):(c=Math.pow(10,i)*o,l=Math.round(t/c),u=Math.round(e/c),l*c<t&&++l,u*c>e&&--u),u<l&&.5<=n&&n<2?qn(t,e,n*2):[l,u,c]}function Ml(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?qn(e,t,n):qn(t,e,n);if(!(a>=i))return[];const l=a-i+1,u=new Array(l);if(r)if(o<0)for(let c=0;c<l;++c)u[c]=(a-c)/-o;else for(let c=0;c<l;++c)u[c]=(a-c)*o;else if(o<0)for(let c=0;c<l;++c)u[c]=(i+c)/-o;else for(let c=0;c<l;++c)u[c]=(i+c)*o;return u}function Dr(t,e,n){return e=+e,t=+t,n=+n,qn(t,e,n)[2]}function kr(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Dr(e,t,n):Dr(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function tr(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Al(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Pr(t){let e,n,r;t.length!==2?(e=tr,n=(l,u)=>tr(t(l),u),r=(l,u)=>t(l)-u):(e=t===tr||t===Al?t:El,n=t,r=t);function i(l,u,c=0,h=l.length){if(c<h){if(e(u,u)!==0)return h;do{const d=c+h>>>1;n(l[d],u)<0?c=d+1:h=d}while(c<h)}return c}function a(l,u,c=0,h=l.length){if(c<h){if(e(u,u)!==0)return h;do{const d=c+h>>>1;n(l[d],u)<=0?c=d+1:h=d}while(c<h)}return c}function o(l,u,c=0,h=l.length){const d=i(l,u,c,h-1);return d>c&&r(l[d-1],u)>-r(l[d],u)?d-1:d}return{left:i,center:o,right:a}}function El(){return 0}function Dl(t){return t===null?NaN:+t}function*Jc(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const Bi=Pr(tr),kl=Bi.right,qc=Bi.left,th=Pr(Dl).center,Pl=kl;function eh(t,e){return(isNumberArray(e)?numberArray:Ki)(t,e)}function Ki(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Nr(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(l){for(o=0;o<r;++o)a[o]=i[o](l);return a}}function Nl(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ul(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Nr(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}function $l(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function zl(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Nr(t,e){var n=typeof e,r;return e==null||n==="boolean"?Tr(e):(n==="number"?_e:n==="string"?(r=Qe(e))?(e=r,Vn):Ni:e instanceof Qe?Vn:e instanceof Date?Nl:zl(e)?$l:Array.isArray(e)?Ki:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ul:_e)(t,e)}function Fl(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Il(t){return function(){return t}}function Ll(t){return+t}var Gi=[0,1];function un(t){return t}function Ur(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Il(isNaN(e)?NaN:.5)}function Ol(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Rl(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=Ur(i,r),a=n(o,a)):(r=Ur(r,i),a=n(a,o)),function(l){return a(r(l))}}function Yl(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Ur(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(l){var u=Pl(t,l,1,r)-1;return a[u](i[u](l))}}function Xi(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Hl(){var t=Gi,e=Gi,n=Nr,r,i,a,o=un,l,u,c;function h(){var f=Math.min(t.length,e.length);return o!==un&&(o=Ol(t[0],t[f-1])),l=f>2?Yl:Rl,u=c=null,d}function d(f){return f==null||isNaN(f=+f)?a:(u||(u=l(t.map(r),e,n)))(r(o(f)))}return d.invert=function(f){return o(i((c||(c=l(e,t.map(r),_e)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,Ll),h()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),h()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=Fl,h()},d.clamp=function(f){return arguments.length?(o=f?!0:un,h()):o!==un},d.interpolate=function(f){return arguments.length?(n=f,h()):n},d.unknown=function(f){return arguments.length?(a=f,d):a},function(f,p){return r=f,i=p,h()}}function Vi(){return Hl()(un,un)}var Wl=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function er(t){if(!(e=Wl.exec(t)))throw new Error("invalid format: "+t);var e;return new $r({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}er.prototype=$r.prototype;function $r(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}$r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Bl(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function nr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function cn(t){return t=nr(Math.abs(t)),t?t[1]:NaN}function Kl(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cn(e)/3)))*3-cn(Math.abs(t)))}function Gl(t,e){return function(n,r){for(var i=n.length,a=[],o=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Xl(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}function Vl(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Zi;function Zl(t,e){var n=nr(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Zi=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+nr(t,Math.max(0,e+a-1))[0]}function Qi(t,e){var n=nr(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ji={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Bl,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Qi(t*100,e),r:Qi,s:Zl,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function qi(t){return t}var ta=Array.prototype.map,ea=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Ql(t){var e=t.grouping===void 0||t.thousands===void 0?qi:Gl(ta.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?qi:Xl(ta.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(d){d=er(d);var f=d.fill,p=d.align,j=d.sign,G=d.symbol,x=d.zero,v=d.width,D=d.comma,S=d.precision,U=d.trim,k=d.type;k==="n"?(D=!0,k="g"):Ji[k]||(S===void 0&&(S=12),U=!0,k="g"),(x||f==="0"&&p==="=")&&(x=!0,f="0",p="=");var C=G==="$"?n:G==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",q=G==="$"?r:/[%p]/.test(k)?o:"",ut=Ji[k],_t=/[defgprs%]/.test(k);S=S===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function ct(P){var pt=C,et=q,m,b,y;if(k==="c")et=ut(P)+et,P="";else{P=+P;var T=P<0||1/P<0;if(P=isNaN(P)?u:ut(Math.abs(P),S),U&&(P=Vl(P)),T&&+P==0&&j!=="+"&&(T=!1),pt=(T?j==="("?j:l:j==="-"||j==="("?"":j)+pt,et=(k==="s"?ea[8+Zi/3]:"")+et+(T&&j==="("?")":""),_t){for(m=-1,b=P.length;++m<b;)if(y=P.charCodeAt(m),48>y||y>57){et=(y===46?i+P.slice(m+1):P.slice(m))+et,P=P.slice(0,m);break}}}D&&!x&&(P=e(P,1/0));var $=pt.length+P.length+et.length,E=$<v?new Array(v-$+1).join(f):"";switch(D&&x&&(P=e(E+P,E.length?v-et.length:1/0),E=""),p){case"<":P=pt+P+et+E;break;case"=":P=pt+E+P+et;break;case"^":P=E.slice(0,$=E.length>>1)+pt+P+et+E.slice($);break;default:P=E+pt+P+et;break}return a(P)}return ct.toString=function(){return d+""},ct}function h(d,f){var p=c((d=er(d),d.type="f",d)),j=Math.max(-8,Math.min(8,Math.floor(cn(f)/3)))*3,G=Math.pow(10,-j),x=ea[8+j/3];return function(v){return p(G*v)+x}}return{format:c,formatPrefix:h}}var rr,na,ra;Jl({thousands:",",grouping:[3],currency:["$",""]});function Jl(t){return rr=Ql(t),na=rr.format,ra=rr.formatPrefix,rr}function ql(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,cn(e)-cn(t))+1}function tu(t){return Math.max(0,-cn(Math.abs(t)))}function eu(t,e,n,r){var i=kr(t,e,n),a;switch(r=er(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Kl(i,o))&&(r.precision=a),ra(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=ql(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=tu(i))&&(r.precision=a-(r.type==="%")*2);break}}return na(r)}function nu(t){var e=t.domain;return t.ticks=function(n){var r=e();return Ml(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return eu(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],l=r[a],u,c,h=10;for(l<o&&(c=o,o=l,l=c,c=i,i=a,a=c);h-- >0;){if(c=Dr(o,l,n),c===u)return r[i]=o,r[a]=l,e(r);if(c>0)o=Math.floor(o/c)*c,l=Math.ceil(l/c)*c;else if(c<0)o=Math.ceil(o*c)/c,l=Math.floor(l*c)/c;else break;u=c}return t},t}function zr(){var t=Vi();return t.copy=function(){return Xi(t,zr())},Jn.apply(t,arguments),nu(t)}const Re=1e3,ve=Re*60,Ye=ve*60,He=Ye*24,Fr=He*7,ia=He*30,Ir=He*365,Lr=new Date,Or=new Date;function Nt(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const u=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return u;let c;do u.push(c=new Date(+a)),e(a,l),t(a);while(c<a&&a<o);return u},i.filter=a=>Nt(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!a(o););else for(;--l>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(Lr.setTime(+a),Or.setTime(+o),t(Lr),t(Or),Math.floor(n(Lr,Or))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const ir=Nt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ir.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Nt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ir);const nh=ir.range,hn=Nt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Re)},(t,e)=>(e-t)/Re,t=>t.getUTCSeconds()),rh=hn.range,aa=Nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Re)},(t,e)=>{t.setTime(+t+e*ve)},(t,e)=>(e-t)/ve,t=>t.getMinutes()),ih=aa.range,Rr=Nt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ve)},(t,e)=>(e-t)/ve,t=>t.getUTCMinutes()),ah=Rr.range,oa=Nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Re-t.getMinutes()*ve)},(t,e)=>{t.setTime(+t+e*Ye)},(t,e)=>(e-t)/Ye,t=>t.getHours()),oh=oa.range,Yr=Nt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ye)},(t,e)=>(e-t)/Ye,t=>t.getUTCHours()),sh=Yr.range,ar=Nt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ve)/He,t=>t.getDate()-1),lh=ar.range,fn=Nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/He,t=>t.getUTCDate()-1),uh=fn.range,sa=Nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/He,t=>Math.floor(t/He)),ch=sa.range;function tn(t){return Nt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ve)/Fr)}const Hr=tn(0),or=tn(1),ru=tn(2),iu=tn(3),dn=tn(4),au=tn(5),ou=tn(6),hh=Hr.range,fh=or.range,dh=ru.range,mh=iu.range,ph=dn.range,gh=au.range,yh=ou.range;function en(t){return Nt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Fr)}const sr=en(0),lr=en(1),su=en(2),lu=en(3),mn=en(4),uu=en(5),cu=en(6),vh=sr.range,xh=lr.range,wh=su.range,Sh=lu.range,Th=mn.range,jh=uu.range,Ch=cu.range,la=Nt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),_h=la.range,Wr=Nt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),bh=Wr.range,Ge=Nt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ge.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});const Mh=Ge.range,We=Nt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());We.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});const Ah=We.range;function ua(t,e,n,r,i,a){const o=[[hn,1,Re],[hn,5,5*Re],[hn,15,15*Re],[hn,30,30*Re],[a,1,ve],[a,5,5*ve],[a,15,15*ve],[a,30,30*ve],[i,1,Ye],[i,3,3*Ye],[i,6,6*Ye],[i,12,12*Ye],[r,1,He],[r,2,2*He],[n,1,Fr],[e,1,ia],[e,3,3*ia],[t,1,Ir]];function l(c,h,d){const f=h<c;f&&([c,h]=[h,c]);const p=d&&typeof d.range=="function"?d:u(c,h,d),j=p?p.range(c,+h+1):[];return f?j.reverse():j}function u(c,h,d){const f=Math.abs(h-c)/d,p=Pr(([,,x])=>x).right(o,f);if(p===o.length)return t.every(kr(c/Ir,h/Ir,d));if(p===0)return ir.every(Math.max(kr(c,h,d),1));const[j,G]=o[f/o[p-1][2]<o[p][2]/f?p-1:p];return j.every(G)}return[l,u]}const[hu,fu]=ua(We,Wr,sr,sa,Yr,Rr),[Eh,Dh]=ua(Ge,la,Hr,ar,oa,aa);function Br(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Kr(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function An(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function du(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,l=t.months,u=t.shortMonths,c=En(i),h=Dn(i),d=En(a),f=Dn(a),p=En(o),j=Dn(o),G=En(l),x=Dn(l),v=En(u),D=Dn(u),S={a:T,A:$,b:E,B:F,c:null,d:pa,e:pa,f:zu,g:Ku,G:Xu,H:Nu,I:Uu,j:$u,L:ga,m:Fu,M:Iu,p:Y,q:X,Q:Ta,s:ja,S:Lu,u:Ou,U:Ru,V:Yu,w:Hu,W:Wu,x:null,X:null,y:Bu,Y:Gu,Z:Vu,"%":Sa},U={a:Jt,A:Tt,b:Ft,B:qt,c:null,d:va,e:va,f:qu,g:uc,G:hc,H:Zu,I:Qu,j:Ju,L:xa,m:tc,M:ec,p:yt,q:Ht,Q:Ta,s:ja,S:nc,u:rc,U:ic,V:ac,w:oc,W:sc,x:null,X:null,y:lc,Y:cc,Z:fc,"%":Sa},k={a:ct,A:P,b:pt,B:et,c:m,d:da,e:da,f:Eu,g:fa,G:ha,H:ma,I:ma,j:_u,L:Au,m:Cu,M:bu,p:_t,q:ju,Q:ku,s:Pu,S:Mu,u:vu,U:xu,V:wu,w:yu,W:Su,x:b,X:y,y:fa,Y:ha,Z:Tu,"%":Du};S.x=C(n,S),S.X=C(r,S),S.c=C(e,S),U.x=C(n,U),U.X=C(r,U),U.c=C(e,U);function C(M,Q){return function(ot){var w=[],bt=-1,gt=0,ne=M.length,re,O,Mt;for(ot instanceof Date||(ot=new Date(+ot));++bt<ne;)M.charCodeAt(bt)===37&&(w.push(M.slice(gt,bt)),(O=ca[re=M.charAt(++bt)])!=null?re=M.charAt(++bt):O=re==="e"?" ":"0",(Mt=Q[re])&&(re=Mt(ot,O)),w.push(re),gt=bt+1);return w.push(M.slice(gt,bt)),w.join("")}}function q(M,Q){return function(ot){var w=An(1900,void 0,1),bt=ut(w,M,ot+="",0),gt,ne;if(bt!=ot.length)return null;if("Q"in w)return new Date(w.Q);if("s"in w)return new Date(w.s*1e3+("L"in w?w.L:0));if(Q&&!("Z"in w)&&(w.Z=0),"p"in w&&(w.H=w.H%12+w.p*12),w.m===void 0&&(w.m="q"in w?w.q:0),"V"in w){if(w.V<1||w.V>53)return null;"w"in w||(w.w=1),"Z"in w?(gt=Kr(An(w.y,0,1)),ne=gt.getUTCDay(),gt=ne>4||ne===0?lr.ceil(gt):lr(gt),gt=fn.offset(gt,(w.V-1)*7),w.y=gt.getUTCFullYear(),w.m=gt.getUTCMonth(),w.d=gt.getUTCDate()+(w.w+6)%7):(gt=Br(An(w.y,0,1)),ne=gt.getDay(),gt=ne>4||ne===0?or.ceil(gt):or(gt),gt=ar.offset(gt,(w.V-1)*7),w.y=gt.getFullYear(),w.m=gt.getMonth(),w.d=gt.getDate()+(w.w+6)%7)}else("W"in w||"U"in w)&&("w"in w||(w.w="u"in w?w.u%7:"W"in w?1:0),ne="Z"in w?Kr(An(w.y,0,1)).getUTCDay():Br(An(w.y,0,1)).getDay(),w.m=0,w.d="W"in w?(w.w+6)%7+w.W*7-(ne+5)%7:w.w+w.U*7-(ne+6)%7);return"Z"in w?(w.H+=w.Z/100|0,w.M+=w.Z%100,Kr(w)):Br(w)}}function ut(M,Q,ot,w){for(var bt=0,gt=Q.length,ne=ot.length,re,O;bt<gt;){if(w>=ne)return-1;if(re=Q.charCodeAt(bt++),re===37){if(re=Q.charAt(bt++),O=k[re in ca?Q.charAt(bt++):re],!O||(w=O(M,ot,w))<0)return-1}else if(re!=ot.charCodeAt(w++))return-1}return w}function _t(M,Q,ot){var w=c.exec(Q.slice(ot));return w?(M.p=h.get(w[0].toLowerCase()),ot+w[0].length):-1}function ct(M,Q,ot){var w=p.exec(Q.slice(ot));return w?(M.w=j.get(w[0].toLowerCase()),ot+w[0].length):-1}function P(M,Q,ot){var w=d.exec(Q.slice(ot));return w?(M.w=f.get(w[0].toLowerCase()),ot+w[0].length):-1}function pt(M,Q,ot){var w=v.exec(Q.slice(ot));return w?(M.m=D.get(w[0].toLowerCase()),ot+w[0].length):-1}function et(M,Q,ot){var w=G.exec(Q.slice(ot));return w?(M.m=x.get(w[0].toLowerCase()),ot+w[0].length):-1}function m(M,Q,ot){return ut(M,e,Q,ot)}function b(M,Q,ot){return ut(M,n,Q,ot)}function y(M,Q,ot){return ut(M,r,Q,ot)}function T(M){return o[M.getDay()]}function $(M){return a[M.getDay()]}function E(M){return u[M.getMonth()]}function F(M){return l[M.getMonth()]}function Y(M){return i[+(M.getHours()>=12)]}function X(M){return 1+~~(M.getMonth()/3)}function Jt(M){return o[M.getUTCDay()]}function Tt(M){return a[M.getUTCDay()]}function Ft(M){return u[M.getUTCMonth()]}function qt(M){return l[M.getUTCMonth()]}function yt(M){return i[+(M.getUTCHours()>=12)]}function Ht(M){return 1+~~(M.getUTCMonth()/3)}return{format:function(M){var Q=C(M+="",S);return Q.toString=function(){return M},Q},parse:function(M){var Q=q(M+="",!1);return Q.toString=function(){return M},Q},utcFormat:function(M){var Q=C(M+="",U);return Q.toString=function(){return M},Q},utcParse:function(M){var Q=q(M+="",!0);return Q.toString=function(){return M},Q}}}var ca={"-":"",_:" ",0:"0"},zt=/^\s*\d+/,mu=/^%/,pu=/[\\^$*+?|[\]().{}]/g;function ft(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function gu(t){return t.replace(pu,"\\$&")}function En(t){return new RegExp("^(?:"+t.map(gu).join("|")+")","i")}function Dn(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function yu(t,e,n){var r=zt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function vu(t,e,n){var r=zt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function xu(t,e,n){var r=zt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function wu(t,e,n){var r=zt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Su(t,e,n){var r=zt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function ha(t,e,n){var r=zt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function fa(t,e,n){var r=zt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Tu(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ju(t,e,n){var r=zt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Cu(t,e,n){var r=zt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function da(t,e,n){var r=zt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function _u(t,e,n){var r=zt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ma(t,e,n){var r=zt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function bu(t,e,n){var r=zt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Mu(t,e,n){var r=zt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Au(t,e,n){var r=zt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Eu(t,e,n){var r=zt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Du(t,e,n){var r=mu.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ku(t,e,n){var r=zt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Pu(t,e,n){var r=zt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function pa(t,e){return ft(t.getDate(),e,2)}function Nu(t,e){return ft(t.getHours(),e,2)}function Uu(t,e){return ft(t.getHours()%12||12,e,2)}function $u(t,e){return ft(1+ar.count(Ge(t),t),e,3)}function ga(t,e){return ft(t.getMilliseconds(),e,3)}function zu(t,e){return ga(t,e)+"000"}function Fu(t,e){return ft(t.getMonth()+1,e,2)}function Iu(t,e){return ft(t.getMinutes(),e,2)}function Lu(t,e){return ft(t.getSeconds(),e,2)}function Ou(t){var e=t.getDay();return e===0?7:e}function Ru(t,e){return ft(Hr.count(Ge(t)-1,t),e,2)}function ya(t){var e=t.getDay();return e>=4||e===0?dn(t):dn.ceil(t)}function Yu(t,e){return t=ya(t),ft(dn.count(Ge(t),t)+(Ge(t).getDay()===4),e,2)}function Hu(t){return t.getDay()}function Wu(t,e){return ft(or.count(Ge(t)-1,t),e,2)}function Bu(t,e){return ft(t.getFullYear()%100,e,2)}function Ku(t,e){return t=ya(t),ft(t.getFullYear()%100,e,2)}function Gu(t,e){return ft(t.getFullYear()%1e4,e,4)}function Xu(t,e){var n=t.getDay();return t=n>=4||n===0?dn(t):dn.ceil(t),ft(t.getFullYear()%1e4,e,4)}function Vu(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ft(e/60|0,"0",2)+ft(e%60,"0",2)}function va(t,e){return ft(t.getUTCDate(),e,2)}function Zu(t,e){return ft(t.getUTCHours(),e,2)}function Qu(t,e){return ft(t.getUTCHours()%12||12,e,2)}function Ju(t,e){return ft(1+fn.count(We(t),t),e,3)}function xa(t,e){return ft(t.getUTCMilliseconds(),e,3)}function qu(t,e){return xa(t,e)+"000"}function tc(t,e){return ft(t.getUTCMonth()+1,e,2)}function ec(t,e){return ft(t.getUTCMinutes(),e,2)}function nc(t,e){return ft(t.getUTCSeconds(),e,2)}function rc(t){var e=t.getUTCDay();return e===0?7:e}function ic(t,e){return ft(sr.count(We(t)-1,t),e,2)}function wa(t){var e=t.getUTCDay();return e>=4||e===0?mn(t):mn.ceil(t)}function ac(t,e){return t=wa(t),ft(mn.count(We(t),t)+(We(t).getUTCDay()===4),e,2)}function oc(t){return t.getUTCDay()}function sc(t,e){return ft(lr.count(We(t)-1,t),e,2)}function lc(t,e){return ft(t.getUTCFullYear()%100,e,2)}function uc(t,e){return t=wa(t),ft(t.getUTCFullYear()%100,e,2)}function cc(t,e){return ft(t.getUTCFullYear()%1e4,e,4)}function hc(t,e){var n=t.getUTCDay();return t=n>=4||n===0?mn(t):mn.ceil(t),ft(t.getUTCFullYear()%1e4,e,4)}function fc(){return"+0000"}function Sa(){return"%"}function Ta(t){return+t}function ja(t){return Math.floor(+t/1e3)}var pn,dc,mc,Ca,_a;pc({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function pc(t){return pn=du(t),dc=pn.format,mc=pn.parse,Ca=pn.utcFormat,_a=pn.utcParse,pn}function gc(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function yc(t){return new Date(t)}function vc(t){return t instanceof Date?+t:+new Date(+t)}function Gr(t,e,n,r,i,a,o,l,u,c){var h=Vi(),d=h.invert,f=h.domain,p=c(".%L"),j=c(":%S"),G=c("%I:%M"),x=c("%I %p"),v=c("%a %d"),D=c("%b %d"),S=c("%B"),U=c("%Y");function k(C){return(u(C)<C?p:l(C)<C?j:o(C)<C?G:a(C)<C?x:r(C)<C?i(C)<C?v:D:n(C)<C?S:U)(C)}return h.invert=function(C){return new Date(d(C))},h.domain=function(C){return arguments.length?f(Array.from(C,vc)):f().map(yc)},h.ticks=function(C){var q=f();return t(q[0],q[q.length-1],C??10)},h.tickFormat=function(C,q){return q==null?k:c(q)},h.nice=function(C){var q=f();return(!C||typeof C.range!="function")&&(C=e(q[0],q[q.length-1],C??10)),C?f(gc(q,C)):h},h.copy=function(){return Xi(h,Gr(t,e,n,r,i,a,o,l,u,c))},h}function kh(){return initRange.apply(Gr(timeTicks,timeTickInterval,timeYear,timeMonth,timeWeek,timeDay,timeHour,timeMinute,timeSecond,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xc(){return Jn.apply(Gr(hu,fu,We,Wr,sr,fn,Yr,Rr,hn,Ca).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ba(t){return typeof t=="string"?new de([[document.querySelector(t)]],[document.documentElement]):new de([[t]],ii)}var Ph=Array.prototype.slice;function wc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function gn(t){return function(){return t}}function Ma(t){this._context=t}Ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Sc(t){return new Ma(t)}const Xr=Math.PI,Vr=2*Xr,nn=1e-6,Tc=Vr-nn;function Aa(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function jc(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Aa;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class ur{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Aa:jc(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,u=r-e,c=i-n,h=o-e,d=l-n,f=h*h+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>nn)if(!(Math.abs(d*u-c*h)>nn)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-o,j=i-l,G=u*u+c*c,x=p*p+j*j,v=Math.sqrt(G),D=Math.sqrt(f),S=a*Math.tan((Xr-Math.acos((G+f-x)/(2*v*D)))/2),U=S/D,k=S/v;Math.abs(U-1)>nn&&this._append`L${e+U*h},${n+U*d}`,this._append`A${a},${a},0,0,${+(d*p>h*j)},${this._x1=e+k*u},${this._y1=n+k*c}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),u=r*Math.sin(i),c=e+l,h=n+u,d=1^o,f=o?i-a:a-i;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>nn||Math.abs(this._y1-h)>nn)&&this._append`L${c},${h}`,r&&(f<0&&(f=f%Vr+Vr),f>Tc?this._append`A${r},${r},0,1,${d},${e-l},${n-u}A${r},${r},0,1,${d},${this._x1=c},${this._y1=h}`:f>nn&&this._append`A${r},${r},0,${+(f>=Xr)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Cc(){return new ur}Cc.prototype=ur.prototype;function Nh(t=3){return new ur(+t)}function _c(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new ur(e)}function bc(t){return t[0]}function Mc(t){return t[1]}function Ac(t,e){var n=gn(!0),r=null,i=Sc,a=null,o=_c(l);t=typeof t=="function"?t:t===void 0?bc:gn(t),e=typeof e=="function"?e:e===void 0?Mc:gn(e);function l(u){var c,h=(u=wc(u)).length,d,f=!1,p;for(r==null&&(a=i(p=o())),c=0;c<=h;++c)!(c<h&&n(d=u[c],c,u))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(d,c,u),+e(d,c,u));if(p)return a=null,p+""||null}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:gn(+u),l):t},l.y=function(u){return arguments.length?(e=typeof u=="function"?u:gn(+u),l):e},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:gn(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,r!=null&&(a=i(r)),l):i},l.context=function(u){return arguments.length?(u==null?r=a=null:a=i(r=u),l):r},l}function yn(t,e,n){this.k=t,this.x=e,this.y=n}yn.prototype={constructor:yn,scale:function(t){return t===1?this:new yn(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new yn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ec=new yn(1,0,0);Dc.prototype=yn.prototype;function Dc(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Ec;return t.__zoom}function kc(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Pc(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Ea(){return this.__zoom||identity}function Nc(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Uc(){return navigator.maxTouchPoints||"ontouchstart"in this}function $c(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function Uh(){var t=kc,e=Pc,n=$c,r=Nc,i=Uc,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=interpolateZoom,c=dispatch("start","zoom","end"),h,d,f,p=500,j=150,G=0,x=10;function v(m){m.property("__zoom",Ea).on("wheel.zoom",ut,{passive:!1}).on("mousedown.zoom",_t).on("dblclick.zoom",ct).filter(i).on("touchstart.zoom",P).on("touchmove.zoom",pt).on("touchend.zoom touchcancel.zoom",et).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(m,b,y,T){var $=m.selection?m.selection():m;$.property("__zoom",Ea),m!==$?k(m,b,y,T):$.interrupt().each(function(){C(this,arguments).event(T).start().zoom(null,typeof b=="function"?b.apply(this,arguments):b).end()})},v.scaleBy=function(m,b,y,T){v.scaleTo(m,function(){var $=this.__zoom.k,E=typeof b=="function"?b.apply(this,arguments):b;return $*E},y,T)},v.scaleTo=function(m,b,y,T){v.transform(m,function(){var $=e.apply(this,arguments),E=this.__zoom,F=y==null?U($):typeof y=="function"?y.apply(this,arguments):y,Y=E.invert(F),X=typeof b=="function"?b.apply(this,arguments):b;return n(S(D(E,X),F,Y),$,o)},y,T)},v.translateBy=function(m,b,y,T){v.transform(m,function(){return n(this.__zoom.translate(typeof b=="function"?b.apply(this,arguments):b,typeof y=="function"?y.apply(this,arguments):y),e.apply(this,arguments),o)},null,T)},v.translateTo=function(m,b,y,T,$){v.transform(m,function(){var E=e.apply(this,arguments),F=this.__zoom,Y=T==null?U(E):typeof T=="function"?T.apply(this,arguments):T;return n(identity.translate(Y[0],Y[1]).scale(F.k).translate(typeof b=="function"?-b.apply(this,arguments):-b,typeof y=="function"?-y.apply(this,arguments):-y),E,o)},T,$)};function D(m,b){return b=Math.max(a[0],Math.min(a[1],b)),b===m.k?m:new Transform(b,m.x,m.y)}function S(m,b,y){var T=b[0]-y[0]*m.k,$=b[1]-y[1]*m.k;return T===m.x&&$===m.y?m:new Transform(m.k,T,$)}function U(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function k(m,b,y,T){m.on("start.zoom",function(){C(this,arguments).event(T).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(T).end()}).tween("zoom",function(){var $=this,E=arguments,F=C($,E).event(T),Y=e.apply($,E),X=y==null?U(Y):typeof y=="function"?y.apply($,E):y,Jt=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),Tt=$.__zoom,Ft=typeof b=="function"?b.apply($,E):b,qt=u(Tt.invert(X).concat(Jt/Tt.k),Ft.invert(X).concat(Jt/Ft.k));return function(yt){if(yt===1)yt=Ft;else{var Ht=qt(yt),M=Jt/Ht[2];yt=new Transform(M,X[0]-Ht[0]*M,X[1]-Ht[1]*M)}F.zoom(null,yt)}})}function C(m,b,y){return!y&&m.__zooming||new q(m,b)}function q(m,b){this.that=m,this.args=b,this.active=0,this.sourceEvent=null,this.extent=e.apply(m,b),this.taps=0}q.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,b){return this.mouse&&m!=="mouse"&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var b=select(this.that).datum();c.call(m,this.that,new ZoomEvent(m,{sourceEvent:this.sourceEvent,target:v,type:m,transform:this.that.__zoom,dispatch:c}),b)}};function ut(m,...b){if(!t.apply(this,arguments))return;var y=C(this,b).event(m),T=this.__zoom,$=Math.max(a[0],Math.min(a[1],T.k*Math.pow(2,r.apply(this,arguments)))),E=pointer(m);if(y.wheel)(y.mouse[0][0]!==E[0]||y.mouse[0][1]!==E[1])&&(y.mouse[1]=T.invert(y.mouse[0]=E)),clearTimeout(y.wheel);else{if(T.k===$)return;y.mouse=[E,T.invert(E)],interrupt(this),y.start()}noevent(m),y.wheel=setTimeout(F,j),y.zoom("mouse",n(S(D(T,$),y.mouse[0],y.mouse[1]),y.extent,o));function F(){y.wheel=null,y.end()}}function _t(m,...b){if(f||!t.apply(this,arguments))return;var y=m.currentTarget,T=C(this,b,!0).event(m),$=select(m.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",Jt,!0),E=pointer(m,y),F=m.clientX,Y=m.clientY;dragDisable(m.view),nopropagation(m),T.mouse=[E,this.__zoom.invert(E)],interrupt(this),T.start();function X(Tt){if(noevent(Tt),!T.moved){var Ft=Tt.clientX-F,qt=Tt.clientY-Y;T.moved=Ft*Ft+qt*qt>G}T.event(Tt).zoom("mouse",n(S(T.that.__zoom,T.mouse[0]=pointer(Tt,y),T.mouse[1]),T.extent,o))}function Jt(Tt){$.on("mousemove.zoom mouseup.zoom",null),dragEnable(Tt.view,T.moved),noevent(Tt),T.event(Tt).end()}}function ct(m,...b){if(t.apply(this,arguments)){var y=this.__zoom,T=pointer(m.changedTouches?m.changedTouches[0]:m,this),$=y.invert(T),E=y.k*(m.shiftKey?.5:2),F=n(S(D(y,E),T,$),e.apply(this,b),o);noevent(m),l>0?select(this).transition().duration(l).call(k,F,T,m):select(this).call(v.transform,F,T,m)}}function P(m,...b){if(t.apply(this,arguments)){var y=m.touches,T=y.length,$=C(this,b,m.changedTouches.length===T).event(m),E,F,Y,X;for(nopropagation(m),F=0;F<T;++F)Y=y[F],X=pointer(Y,this),X=[X,this.__zoom.invert(X),Y.identifier],$.touch0?!$.touch1&&$.touch0[2]!==X[2]&&($.touch1=X,$.taps=0):($.touch0=X,E=!0,$.taps=1+!!h);h&&(h=clearTimeout(h)),E&&($.taps<2&&(d=X[0],h=setTimeout(function(){h=null},p)),interrupt(this),$.start())}}function pt(m,...b){if(this.__zooming){var y=C(this,b).event(m),T=m.changedTouches,$=T.length,E,F,Y,X;for(noevent(m),E=0;E<$;++E)F=T[E],Y=pointer(F,this),y.touch0&&y.touch0[2]===F.identifier?y.touch0[0]=Y:y.touch1&&y.touch1[2]===F.identifier&&(y.touch1[0]=Y);if(F=y.that.__zoom,y.touch1){var Jt=y.touch0[0],Tt=y.touch0[1],Ft=y.touch1[0],qt=y.touch1[1],yt=(yt=Ft[0]-Jt[0])*yt+(yt=Ft[1]-Jt[1])*yt,Ht=(Ht=qt[0]-Tt[0])*Ht+(Ht=qt[1]-Tt[1])*Ht;F=D(F,Math.sqrt(yt/Ht)),Y=[(Jt[0]+Ft[0])/2,(Jt[1]+Ft[1])/2],X=[(Tt[0]+qt[0])/2,(Tt[1]+qt[1])/2]}else if(y.touch0)Y=y.touch0[0],X=y.touch0[1];else return;y.zoom("touch",n(S(F,Y,X),y.extent,o))}}function et(m,...b){if(this.__zooming){var y=C(this,b).event(m),T=m.changedTouches,$=T.length,E,F;for(nopropagation(m),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),E=0;E<$;++E)F=T[E],y.touch0&&y.touch0[2]===F.identifier?delete y.touch0:y.touch1&&y.touch1[2]===F.identifier&&delete y.touch1;if(y.touch1&&!y.touch0&&(y.touch0=y.touch1,delete y.touch1),y.touch0)y.touch0[1]=this.__zoom.invert(y.touch0[0]);else if(y.end(),y.taps===2&&(F=pointer(F,this),Math.hypot(d[0]-F[0],d[1]-F[1])<x)){var Y=select(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return v.wheelDelta=function(m){return arguments.length?(r=typeof m=="function"?m:constant(+m),v):r},v.filter=function(m){return arguments.length?(t=typeof m=="function"?m:constant(!!m),v):t},v.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:constant(!!m),v):i},v.extent=function(m){return arguments.length?(e=typeof m=="function"?m:constant([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),v):e},v.scaleExtent=function(m){return arguments.length?(a[0]=+m[0],a[1]=+m[1],v):[a[0],a[1]]},v.translateExtent=function(m){return arguments.length?(o[0][0]=+m[0][0],o[1][0]=+m[1][0],o[0][1]=+m[0][1],o[1][1]=+m[1][1],v):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},v.constrain=function(m){return arguments.length?(n=m,v):n},v.duration=function(m){return arguments.length?(l=+m,v):l},v.interpolate=function(m){return arguments.length?(u=m,v):u},v.on=function(){var m=c.on.apply(c,arguments);return m===c?v:m},v.clickDistance=function(m){return arguments.length?(G=(m=+m)*m,v):Math.sqrt(G)},v.tapDistance=function(m){return arguments.length?(x=+m,v):x},v}const $h=null,zc=(t,e)=>{const n=_a("%Y-%m-%dT%H:%M:%S.%LZ");t.forEach(j=>{j.createdAt=n(j.createdAt)});const r=$t(t,j=>fn(j.createdAt)),i=Array.from(r,([j,G])=>({date:j,totalSales:Gt(G,x=>x.amount)})),a=800,o=400,l={top:20,right:30,bottom:40,left:50},u=ba(e).append("svg").attr("width",a).attr("height",o),c=xc().domain(st(i,j=>j.date)).range([l.left,a-l.right]),h=zr().domain([0,ie(i,j=>j.totalSales)]).nice().range([o-l.bottom,l.top]),d=j=>j.attr("transform",`translate(0,${o-l.bottom})`).call(lt(c).ticks(fn)),f=j=>j.attr("transform",`translate(${l.left},0)`).call(W(h));u.append("g").call(d),u.append("g").call(f);const p=Ac().x(j=>c(j.date)).y(j=>h(j.totalSales));u.append("path").datum(i).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("d",p),u.append("text").attr("x",a/2).attr("y",l.top).attr("text-anchor","middle").style("font-size","16px").style("fill","white").text("Daily Sales Chart"),u.append("text").attr("x",a/2).attr("y",o).attr("text-anchor","middle").style("fill","white").text("Date"),u.append("text").attr("transform","rotate(-90)").attr("y",0).attr("x",0-o/2).attr("dy","1em").style("text-anchor","middle").style("fill","white").text("Total Sales"),u.append("g").attr("class","grid").attr("transform",`translate(0,${o-l.bottom})`),u.append("g").attr("class","grid").attr("transform",`translate(${l.left},0)`)};function Fc(t,e){const n=new Map;return t.forEach(i=>{i.status==="COMPLETED"&&i.items.forEach(a=>{const o=a.SKU,l=parseFloat(a.unit_amount.value),u=parseInt(a.quantity),c=l*u;n.has(o)?n.set(o,n.get(o)+c):n.set(o,c)})}),[...n.entries()].sort((i,a)=>a[1]-i[1]).slice(0,e)}const Ic=({topProducts:t})=>{const e=(0,I.useRef)(null);(0,I.useEffect)(()=>{e.current&&t&&n()},[t]);const n=()=>{const r=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd"],i=ba(e.current),a={top:40,right:40,bottom:30,left:40},o=+i.attr("width")-a.left-a.right,l=+i.attr("height")-a.top-a.bottom,u=i.append("g").attr("transform",`translate(${a.left},${a.top})`),c=Er().rangeRound([0,o]).padding(.1).domain(t.map(f=>f[0].toString())),h=zr().rangeRound([l,0]).domain([0,ie(t,f=>f[1]||0)]);u.append("g").attr("transform",`translate(0,${l})`).call(lt(c)).selectAll("text").style("text-anchor","middle"),u.append("g").call(W(h).ticks(5)),u.selectAll(".bar").data(t).enter().append("rect").attr("class","bar").attr("x",f=>c(f[0].toString())||0).attr("y",f=>h(f[1]||0)).attr("width",c.bandwidth()).attr("height",f=>l-h(f[1]||0)).attr("fill",(f,p)=>r[p%r.length]);const d=u.append("g").attr("class","legend").attr("transform",`translate(${o-100},20)`);d.selectAll("rect").data(r).enter().append("rect").attr("x",0).attr("y",(f,p)=>p*20).attr("width",15).attr("height",15).style("fill",f=>f),d.selectAll("text").data(t.map(f=>f[0].toString())).enter().append("text").attr("x",20).attr("y",(f,p)=>p*20+12).text(f=>f).style("fill","white"),u.append("text").attr("x",o/2).attr("y",20).attr("text-anchor","middle").style("font-size","16px").style("fill","white").text("Top product")};return(0,s.jsx)(Ut.a,{style:{color:"white"},children:(0,s.jsx)("svg",{ref:e,width:600,height:400})})},Lc=()=>{const t=(0,I.useRef)(null),[e,n]=(0,I.useState)([]),[r,i]=(0,I.useState)([]);(0,I.useEffect)(()=>{a()},[]);const a=async()=>{try{const o=await Et.A.getAllOrders(),l=Fc(o,5);i(o),n(l),t.current&&o&&zc(o,t.current)}catch(o){console.error("Error fetching data:",o)}};return(0,s.jsx)(At.P,{children:(0,s.jsx)(ht.s,{children:(0,s.jsxs)(jt.s,{children:[(0,s.jsx)(Ut.a,{ref:t,style:{color:"white"}}),(0,s.jsx)(Ut.a,{children:(0,s.jsx)(Ic,{topProducts:e})})]})})})},Oc=()=>(0,s.jsx)(Lc,{})},76707:(vn,Wt,g)=>{g.r(Wt),g.d(Wt,{default:()=>me});var s=g(92132),I=g(94061),At=g(55356),ht=g(64871),jt=g(35513),Ut=g(26127),Et=g(90361),st=g(33363),V=g(30893),tt=g(98765),Bt=g(25641),xe=g(88353),A=g(68074),le=g(46270),we=g(50612),$t=g(23402),Se=g(58100),te=g(21272),K=g(61485),Pe=g(99248),Ne=g(6239),Ue=g(90151),It=g(7537),Me=g(67030),Kt=g(85963);function Z({showModal:xt,order:vt}){return(0,s.jsxs)(K.k,{onClose:()=>xt(St=>!St),children:[(0,s.jsx)(Pe.r,{children:(0,s.jsx)(V.o,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title",children:"Order Details"})}),(0,s.jsx)(Ne.c,{children:(0,s.jsxs)(Ue.x,{padding:1,children:[(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(It.k,{label:"Order ID",name:"order_id",value:vt.order_id})}),(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(It.k,{label:"Amount",name:"amount",value:vt.amount+" "+vt.currency})}),(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(It.k,{label:"Shipping fee",name:"shipping_fee",value:vt.shipping_fee+" "+vt.currency})}),(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(It.k,{label:"Total tax amount",name:"tax_total",value:vt.tax_total})}),(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(It.k,{label:"Name",name:"name",value:vt.customer_name})}),(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(It.k,{label:"Last name",name:"last_name",value:vt.customer_surname})}),(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(It.k,{label:"Email",name:"email",value:vt.email})}),(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(It.k,{label:"Address",name:"address",value:vt.address_line_1})}),(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(It.k,{label:"Postal code",name:"postal_code",value:vt.postal_code})}),(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(It.k,{label:"Country code",name:"country_code",value:vt.country_code})}),(0,s.jsx)(A.E,{padding:1,col:12,children:(0,s.jsxs)(jt.X,{colCount:3,children:[(0,s.jsx)(Ut.d,{children:(0,s.jsxs)(Et.Tr,{children:[(0,s.jsx)(st.Th,{children:(0,s.jsx)(V.o,{variant:"sigma",children:"SKU"})}),(0,s.jsx)(st.Th,{children:(0,s.jsx)(V.o,{variant:"sigma",children:"NAME"})}),(0,s.jsx)(st.Th,{children:(0,s.jsx)(V.o,{variant:"sigma",children:"QUANTITY"})}),(0,s.jsx)(st.Th,{children:(0,s.jsx)(V.o,{variant:"sigma",children:"DESCRIPTION"})}),(0,s.jsx)(st.Th,{children:(0,s.jsx)(V.o,{variant:"sigma",children:"UNIT_AMOUNT"})})]})}),(0,s.jsx)(Bt.N,{children:vt.items.map(St=>(0,s.jsxs)(Et.Tr,{children:[(0,s.jsx)(st.Td,{children:(0,s.jsx)(V.o,{textColor:"neutral800",children:St.SKU})}),(0,s.jsx)(st.Td,{children:(0,s.jsx)(V.o,{textColor:"neutral800",children:St.name})}),(0,s.jsx)(st.Td,{children:(0,s.jsx)(V.o,{textColor:"neutral800",children:St.quantity})}),(0,s.jsx)(st.Td,{children:(0,s.jsx)(V.o,{textColor:"neutral800",children:St.description})}),(0,s.jsx)(st.Td,{children:(0,s.jsx)(V.o,{textColor:"neutral800",children:St.unit_amount.value+" "+St.unit_amount.currency_code})})]},St.SKU))})]})})]})}),(0,s.jsx)(Me.j,{startActions:(0,s.jsx)(Kt.$,{onClick:()=>xt(St=>!St),variant:"tertiary",children:"Cancel"})})]})}const ie={id:0,timezone:"",measurement:"Metric",unit:"",lengthUnit:""},Gt=[{id:0,order_id:"",amount:"",status:"",currency:"",items:[{SKU:"",name:"",quantity:0,description:"",unit_amount:{value:0,currency_code:""}}],shipping_fee:"",tax_total:"",customer_name:"",customer_surname:"",email:"",address_line_1:"",postal_code:"",country_code:"",created_at:"",updated_at:""}],kt=()=>{const[xt,vt]=(0,te.useState)(!0),[St,Xt]=(0,te.useState)(!1),[ue,ee]=(0,te.useState)(Gt),[L,at]=(0,te.useState)(),[dt,J]=(0,te.useState)(ie);(0,te.useEffect)(()=>{lt().then(z=>console.log(z))},[]);const lt=async()=>{xt||vt(!0);try{const z=await $t.A.getAllOrders(),nt=await Se.A.getAllTimezone();let mt="";nt.timezone&&nt.timezone.includes(" ")?mt=nt.timezone.split(" ")[0]:mt="0",J(nt);let N=new Array;z.map(_=>N.push({id:_.id,order_id:_.order_id,amount:_.amount,status:_.status,currency:_.currency,items:_.items,shipping_fee:_.shipping_fee,tax_total:_.tax_total,customer_name:_.customer_name,customer_surname:_.customer_surname,email:_.email,address_line_1:_.address_line_1,postal_code:_.postal_code,country_code:_.country_code,created_at:`${String(new Date(_.createdAt).getMonth()+1).padStart(2,"0")}/${String(new Date(_.createdAt).getDate()).padStart(2,"0")}/${new Date(_.createdAt).getFullYear()} ${String(new Date(_.createdAt).getUTCHours()+parseInt(mt,10)).padStart(2,"0")}:${String(new Date(_.createdAt).getMinutes()).padStart(2,"0")}:${String(new Date(_.createdAt).getSeconds()).padStart(2,"0")}`,updated_at:_.createdAt!==_.updatedAt?`${String(new Date(_.updatedAt).getMonth()+1).padStart(2,"0")}/${String(new Date(_.updatedAt).getDate()).padStart(2,"0")}/${new Date(_.updatedAt).getFullYear()} ${String(new Date(_.updatedAt).getUTCHours()+parseInt(mt,10)).padStart(2,"0")}:${String(new Date(_.updatedAt).getMinutes()).padStart(2,"0")}:${String(new Date(_.updatedAt).getSeconds()).padStart(2,"0")}`:""})),ee(N)}catch(z){console.error("Error fetching data:",z)}finally{vt(!1)}},W=async z=>{try{await $t.A.deleteOrder(z),lt()}catch(nt){console.error("Error deleting data:",nt)}},R=z=>{Xt(nt=>!nt),at(z)};return(0,s.jsxs)(I.a,{padding:8,background:"neutral100",children:[(0,s.jsx)(At.$,{navigationAction:(0,s.jsx)(ht.N,{startIcon:(0,s.jsx)(le.A,{}),to:"/",children:"Go back"}),title:"Orders",subtitle:ue.length+" entries found",as:"h2"}),(0,s.jsxs)(jt.X,{colCount:6,children:[(0,s.jsx)(Ut.d,{children:(0,s.jsxs)(Et.Tr,{children:[(0,s.jsx)(st.Th,{children:(0,s.jsx)(V.o,{variant:"sigma",children:"ORDER_ID"})}),(0,s.jsx)(st.Th,{children:(0,s.jsx)(V.o,{variant:"sigma",children:"AMOUNT"})}),(0,s.jsx)(st.Th,{children:(0,s.jsx)(V.o,{variant:"sigma",children:"STATUS"})}),(0,s.jsx)(st.Th,{children:(0,s.jsx)(V.o,{variant:"sigma",children:"DATE_CREATED"})}),(0,s.jsx)(st.Th,{children:(0,s.jsx)(V.o,{variant:"sigma",children:"DATE_COMPLETED"})}),(0,s.jsx)(st.Th,{children:(0,s.jsx)(tt.s,{children:"Actions"})})]})}),(0,s.jsx)(Bt.N,{children:ue.map(z=>(0,s.jsxs)(Et.Tr,{children:[(0,s.jsx)(st.Td,{onClick:()=>R(z),children:(0,s.jsx)(V.o,{textColor:"neutral800",children:z.order_id})}),(0,s.jsx)(st.Td,{onClick:()=>R(z),children:(0,s.jsx)(V.o,{textColor:"neutral800",children:z.amount+" "+z.currency})}),(0,s.jsx)(st.Td,{onClick:()=>R(z),children:(0,s.jsx)(V.o,{textColor:"neutral800",children:z.status})}),(0,s.jsx)(st.Td,{onClick:()=>R(z),children:(0,s.jsx)(V.o,{textColor:"neutral800",children:z.created_at})}),(0,s.jsx)(st.Td,{onClick:()=>R(z),children:(0,s.jsx)(V.o,{textColor:"neutral800",children:z.updated_at})}),(0,s.jsx)(st.Td,{children:z.status==="CREATED"&&(0,s.jsx)(I.a,{paddingLeft:1,children:(0,s.jsx)(xe.K,{onClick:()=>W(z.id),label:"Delete",noBorder:!0,icon:(0,s.jsx)(we.A,{})})})})]},z.id))})]}),St&&(0,s.jsx)(A.E,{children:(0,s.jsx)(Z,{showModal:Xt,order:L})})]})},me=()=>(0,s.jsx)(kt,{})},19332:(vn,Wt,g)=>{g.r(Wt),g.d(Wt,{default:()=>lt});var s=g(92132),I=g(94061),At=g(55356),ht=g(64871),jt=g(85963),Ut=g(35513),Et=g(26127),st=g(90361),V=g(33363),tt=g(30893),Bt=g(98765),xe=g(25641),A=g(68074),le=g(46270),we=g(5194),$t=g(55506);const te={getAllProductscms:async()=>{try{return await(0,$t.l1)("/omcommerce/productcms/find?populate=*",{method:"GET"})}catch(W){console.error(W)}},addProductcms:async W=>{try{return await(0,$t.l1)("/omcommerce/productcms/create",{method:"POST",body:JSON.parse(JSON.stringify(W))})}catch(R){console.error(R)}},editProductcms:async(W,R)=>{try{return await(0,$t.l1)(`/omcommerce/productcms/update/${W}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.parse(JSON.stringify(R))})}catch(z){console.error(z)}},deleteProductcms:async W=>{try{return await(0,$t.l1)(`/omcommerce/productcms/delete/${W}`,{method:"DELETE"})}catch(R){console.error(R)}}};var K=g(21272),Pe=g(3988),Ne=g(5983),Ue=g(61485),It=g(99248),Me=g(6239),Kt=g(90151),Z=g(7537),ie=g(56654),Gt=g(48323),Te=g(67030);function kt({showModal:W,product:R}){const[z,nt]=(0,K.useState)(R);return(0,s.jsxs)(Kt.x,{gap:5,marginBottom:"2rem",children:[(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(Z.k,{label:"ID",disabled:!0,name:"id",value:R.id})}),(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(Z.k,{label:"Slug",disabled:!0,name:"slug",value:R.slug})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"title",readOnly:!0,value:z.title,fullWidth:!0,placeholder:"Product Title",label:"Product Title"})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"Quantity",readOnly:!0,value:z.Quantity,fullWidth:!0,placeholder:"Quantity",label:"Quantity"})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"SKU",value:z.SKU,readOnly:!0,fullWidth:!0,placeholder:"SKU",label:"SKU"})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"amount_value",value:z.amount_value,readOnly:!0,fullWidth:!0,placeholder:"Price",label:"Price"})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"cost_per_item",value:z.cost_per_item,readOnly:!0,fullWidth:!0,placeholder:"Cost per item",label:"Cost per item",hint:"Purchase cost in currently selected currency"})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"description",value:z.description,readOnly:!0,fullWidth:!0,placeholder:"Description",label:"Description"})})})]})}function Lt({showModal:W,product:R,handleUpdateProduct:z,paypalSelected:nt}){const[mt,N]=(0,K.useState)(!0),[_,ce]=(0,K.useState)(!0),[Dt,pe]=(0,K.useState)(R),[Ae,ge]=(0,K.useState)([]),[$e,ze]=(0,K.useState)([]),[Be,Ke]=(0,K.useState)(R.omcommerce_tax?.id.toString()),[ae,he]=(0,K.useState)(R.omcommerce_shippingzones),[fe,rt]=(0,K.useState)({}),[Vt,oe]=(0,K.useState)(!1);(0,K.useEffect)(()=>{Fe().then(B=>console.log(B))},[]);let ye,Ot;const Fe=async()=>{mt||N(!0);const B=R.omcommerce_shippingzones.map(Ct=>Ct.id.toString());he(B);try{Ot=await Ne.A.getAllTaxes(),ye=await Pe.A.getAllShippingZones();const Ct=[],Ee=[];ye&&ye.map(it=>Ct.push(it)),Ot&&Ot.map(it=>Ee.push(it)),ge(Ct),ze(Ee)}catch(Ct){console.error("Error fetching data:",Ct)}finally{N(!1)}},Rt=B=>{const{name:Ct,value:Ee}=B.target;pe({...Dt,[Ct]:Ee}),rt({...fe,[Ct]:""}),oe(!1)},je=B=>{const Ct=Ae.filter(Ee=>B.includes(Ee.id.toString()));pe({...Dt,omcommerce_shippingzones:Ct}),rt({...fe,omcommerce_shippingzones:""}),oe(!1)},Ve=B=>{Ke(B),B!==void 0&&Rt({target:{name:"omcommerce_tax",value:B}})},H=B=>{he(B),B!==void 0&&je(B)},Pt=B=>{try{const Ct={};(!B.title||B.title==="")&&(Ct.title="Product title is required"),B.amount_value||(Ct.amount_value="Price is required"),rt(Ct),Object.keys(Ct).length>0?oe(!0):(oe(!1),z(B))}catch(Ct){console.error("Error saving profile:",Ct)}};return(0,s.jsxs)(Ue.k,{onClose:()=>W(B=>!B),children:[(0,s.jsx)(It.r,{children:(0,s.jsx)(tt.o,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title",children:"Product Details"})}),(0,s.jsxs)(Me.c,{children:[nt?(0,s.jsxs)(Kt.x,{gap:5,marginBottom:"2rem",children:[(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(Z.k,{label:"ID",disabled:!0,name:"id",value:R.id})}),(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(Z.k,{label:"Slug",disabled:!0,name:"slug",value:R.slug})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsxs)(I.a,{marginTop:"1rem",children:[(0,s.jsx)(Z.k,{name:"title",value:Dt.title,onChange:Rt,fullWidth:!0,placeholder:"Product Title",label:"Product Title"}),fe.title&&(0,s.jsx)(tt.o,{textColor:"danger600",children:fe.title})]})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"Quantity",value:Dt.Quantity,onChange:Rt,fullWidth:!0,placeholder:"Quantity",label:"Quantity"})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"SKU",value:Dt.SKU,onChange:Rt,fullWidth:!0,placeholder:"SKU",label:"SKU"})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsxs)(I.a,{marginTop:"1rem",children:[(0,s.jsx)(Z.k,{name:"amount_value",value:Dt.amount_value,onChange:Rt,fullWidth:!0,placeholder:"Price",label:"Price"}),fe.amount_value&&(0,s.jsx)(tt.o,{textColor:"danger600",children:fe.amount_value})]})}),(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"amount_currency_code",value:Dt.amount_currency_code,onChange:Rt,fullWidth:!0,placeholder:"Currency",label:"Currency"})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"cost_per_item",value:Dt.cost_per_item,onChange:Rt,fullWidth:!0,placeholder:"Cost per item",label:"Cost per item",hint:"Purchase cost in currently selected currency"})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"description",value:Dt.description,onChange:Rt,fullWidth:!0,placeholder:"Description",label:"Description"})})}),(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"amount_value_converted",value:Dt.amount_value_converted,onChange:Rt,fullWidth:!0,placeholder:"Converted price",label:"Converted price"})})}),(0,s.jsx)(A.E,{padding:1,col:6,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{label:"Converted price currency",name:"amount_value_converted_currency_code",value:Dt.amount_value_converted_currency_code,onChange:Rt,fullWidth:!0,placeholder:"Converted price currency"})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(ie.KF,{label:"Shipping Zones",placeholder:"Select shipping zones",onClear:()=>{H(void 0)},value:ae,onChange:H,withTags:!0,children:Ae.map(B=>(0,s.jsx)(ie.fe,{value:B.id,children:B.name},B.id))})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Gt.Z,{label:"Tax",placeholder:"Select tax",onClear:()=>{Ve(void 0)},value:Be,onChange:Ve,children:$e.map(B=>(0,s.jsx)(Gt.eY,{value:B.id,children:B.name},B.id))})})})]}):(0,s.jsx)(kt,{showModal:W,product:R}),nt&&(0,s.jsx)(jt.$,{size:"L",onClick:()=>Pt(Dt),variant:"secondary",children:"Save"})]}),(0,s.jsx)(Te.j,{startActions:(0,s.jsx)(jt.$,{onClick:()=>W(B=>!B),variant:"tertiary",children:"Cancel"})})]})}const xt={getAllProducts:async()=>{try{return await(0,$t.l1)("/omcommerce/product/find?populate=*",{method:"GET"})}catch(W){console.error(W)}},addProduct:async W=>{try{if(Object.keys(W).length===0)throw new Error("Data object is empty");const R=JSON.parse(JSON.stringify(W));return await(0,$t.l1)("/omcommerce/product/create",{method:"POST",body:R})}catch(R){console.error(R)}},editProduct:async(W,R)=>{try{return await(0,$t.l1)(`/omcommerce/product/update/${W}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.parse(JSON.stringify(R))})}catch(z){console.error(z)}},deleteProduct:async W=>{try{return await(0,$t.l1)(`/omcommerce/product/delete/${W}`,{method:"DELETE"})}catch(R){console.error(R)}}},vt={id:0,title:"",slug:"",description:"",SKU:"",amount_currency_code:"",amount_value:1,tax_currency_code:"EUR",tax_value:0,media:[],compare_at_price:"",cost_per_item:"",chargeTax:!1,Quantity:0,Barcode:"",showQuantity:!1,weight:0,measurement_unit:"",omcommerce_tax:{},omcommerce_shippingzones:[]};function St({showModal:W,handleCreateProduct:R}){const[z,nt]=(0,K.useState)(!0),[mt,N]=(0,K.useState)(!0),[_,ce]=(0,K.useState)(vt),[Dt,pe]=(0,K.useState)([]),[Ae,ge]=(0,K.useState)([]),[$e,ze]=(0,K.useState)(void 0),[Be,Ke]=(0,K.useState)([]),[ae,he]=(0,K.useState)({}),[fe,rt]=(0,K.useState)(!1);(0,K.useEffect)(()=>{ye().then(H=>console.log(H))},[]);let Vt,oe;const ye=async()=>{z||nt(!0);try{oe=await Ne.A.getAllTaxes(),Vt=await Pe.A.getAllShippingZones();const H=[],Pt=[];Vt&&Vt.map(B=>H.push(B)),oe&&oe.map(B=>Pt.push(B)),pe(H),ge(Pt)}catch(H){console.error("Error fetching data:",H)}finally{nt(!1)}},Ot=H=>{const{name:Pt,value:B}=H.target;ce({..._,[Pt]:B}),he({...ae,[Pt]:""}),rt(!1)},Fe=H=>{const Pt=Dt.filter(B=>H.includes(B.id.toString()));ce({..._,omcommerce_shippingzones:Pt}),he({...ae,omcommerce_shippingzones:""}),rt(!1)},Rt=H=>{ze(H),H!==void 0&&Ot({target:{name:"omcommerce_tax",value:H}})},je=H=>{Ke(H),H!==void 0&&Fe(H)},Ve=H=>{try{const Pt={};(!H.title||H.title==="")&&(Pt.title="Product title is required"),H.amount_value||(Pt.amount_value="Price is required"),he(Pt),Object.keys(Pt).length>0?rt(!0):(rt(!1),R(H))}catch(Pt){console.error("Error saving profile:",Pt)}};return(0,s.jsxs)(Ue.k,{onClose:()=>W(H=>!H),children:[(0,s.jsx)(It.r,{children:(0,s.jsx)(tt.o,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title",children:"Create New Product"})}),(0,s.jsxs)(Me.c,{children:[(0,s.jsxs)(Kt.x,{gap:5,marginBottom:"2rem",children:[(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsxs)(I.a,{marginTop:"1rem",children:[(0,s.jsx)(Z.k,{name:"title",value:_.title,onChange:Ot,fullWidth:!0,placeholder:"Product Title",label:"Product Title"}),ae.title&&(0,s.jsx)(tt.o,{textColor:"danger600",children:ae.title})]})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"Quantity",value:_.Quantity,onChange:Ot,fullWidth:!0,placeholder:"Quantity",label:"Quantity"})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"SKU",value:_.SKU,onChange:Ot,fullWidth:!0,placeholder:"SKU",label:"SKU"})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsxs)(I.a,{marginTop:"1rem",children:[(0,s.jsx)(Z.k,{name:"amount_value",value:_.amount_value,onChange:Ot,fullWidth:!0,placeholder:"Price",label:"Price"}),ae.amount_value&&(0,s.jsx)(tt.o,{textColor:"danger600",children:ae.amount_value})]})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"cost_per_item",value:_.cost_per_item,onChange:Ot,fullWidth:!0,placeholder:"Cost per item",label:"Cost per item",hint:"Purchase cost in currently selected currency"})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"description",value:_.description,onChange:Ot,fullWidth:!0,placeholder:"Description",label:"Description"})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Z.k,{name:"description",value:_.description,onChange:Ot,fullWidth:!0,placeholder:"Description",label:"Description"})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(ie.KF,{label:"Shipping Zones",placeholder:"Select shipping zones",onClear:()=>{je(void 0)},value:Be,onChange:je,withTags:!0,children:Dt.map(H=>(0,s.jsx)(ie.fe,{value:H.id,children:H.name},H.id))})})}),(0,s.jsx)(A.E,{col:6,s:12,children:(0,s.jsx)(I.a,{marginTop:"1rem",children:(0,s.jsx)(Gt.Z,{label:"Tax",placeholder:"Select tax",onClear:()=>{Rt(void 0)},value:$e,onChange:Rt,children:Ae.map(H=>(0,s.jsx)(Gt.eY,{value:H.id,children:H.name},H.id))})})})]}),(0,s.jsx)(jt.$,{size:"L",onClick:()=>Ve(_),variant:"secondary",children:"Save"})]}),(0,s.jsx)(Te.j,{startActions:(0,s.jsx)(jt.$,{onClick:()=>W(H=>!H),variant:"tertiary",children:"Cancel"})})]})}var Xt=g(30462);const ue={id:0,title:"",slug:"",description:"",SKU:"",amount_currency_code:"",amount_value:1,tax_currency_code:"EUR",tax_value:0,media:[],compare_at_price:"",cost_per_item:"",chargeTax:!1,Quantity:0,Barcode:"",showQuantity:!1,weight:0,measurement_unit:"",omcommerce_tax:{},omcommerce_shippingzones:[]},ee={id:1,live_paypal_client_id:"",live_paypal_client_secret:"",sandbox_paypal_client_id:"",sandbox_paypal_client_secret:"",live:!1,paypalSelected:!1,payProGlobalSelected:!1,paymentThreeSelected:!1},L=[{id:0,title:"",slug:"",description:"",SKU:"",amount_currency_code:"",amount_value:1,tax_currency_code:"EUR",tax_value:0,media:[],compare_at_price:"",cost_per_item:"",chargeTax:!1,Quantity:0,Barcode:"",showQuantity:!1,weight:0,measurement_unit:"",omcommerce_tax:{},omcommerce_shippingzones:[],categories:[],subcategory:0,amount_value_converted:0,amount_value_converted_currency_code:"EUR"}],dt=()=>{const[W,R]=(0,K.useState)(!0),[z,nt]=(0,K.useState)(L),[mt,N]=(0,K.useState)(),[_,ce]=(0,K.useState)([]),[Dt,pe]=(0,K.useState)(0),[Ae,ge]=(0,K.useState)(!1),[$e,ze]=(0,K.useState)(ue),[Be,Ke]=(0,K.useState)(void 0),[ae,he]=(0,K.useState)({}),[fe,rt]=(0,K.useState)(!1),[Vt,oe]=(0,K.useState)(!1),[ye,Ot]=(0,K.useState)("asc"),[Fe,Rt]=(0,K.useState)(ee);(0,K.useEffect)(()=>{je().then(it=>console.log(it))},[]);const je=async()=>{W||R(!0);try{const it=await te.getAllProductscms(),Yt=await Ne.A.getAllTaxes(),Pn=await Pe.A.getAllShippingZones(),cr=await Xt.A.getAllPaypalSetups();Rt(cr);let Nn=new Array;it.map(wt=>Nn.push({id:wt.id,title:wt.title,slug:wt.slug,description:wt.description,SKU:wt.SKU,amount_currency_code:wt.amount_currency_code,amount_value:wt.amount_value,tax_currency_code:wt.tax_currency_code,tax_value:wt.tax_value,media:wt.media,compare_at_price:wt.compare_at_price,cost_per_item:wt.cost_per_item,chargeTax:wt.chargeTax,Quantity:wt.Quantity,Barcode:wt.Barcode,showQuantity:wt.showQuantity,weight:wt.weight,measurement_unit:wt.measurement_unit,omcommerce_tax:wt.omcommerce_tax,omcommerce_shippingzones:wt.omcommerce_shippingzones,categories:wt.categories,subcategory:wt.subcategory,amount_value_converted:wt.amount_value_converted,amount_value_converted_currency_code:wt.amount_value_converted_currency_code})),nt(Nn)}catch(it){console.error("Error fetching data:",it)}finally{R(!1)}},Ve=async it=>{try{await xt.deleteProduct(it),je()}catch(Yt){console.error("Error deleting data:",Yt)}},H=it=>{ge(Yt=>!Yt),N(it)},Pt=it=>{const{name:Yt,value:Pn}=it.target;ze({...$e,[Yt]:Pn}),he({...ae,[Yt]:""}),rt(!1)},B=async it=>{try{rt(!1),await xt.addProduct(it),oe(!1),await je()}catch(Yt){console.error("Error saving profile:",Yt)}},Ct=async it=>{try{rt(!1),mt?.id!==void 0&&(await xt.editProduct(mt.id,it),await je()),ge(!1)}catch(Yt){console.error("Error saving profile:",Yt)}},Ee=async()=>{ye==="asc"?(nt(z.sort((it,Yt)=>it.id-Yt.id)),Ot("desc")):(nt(z.sort((it,Yt)=>Yt.id-it.id)),Ot("asc"))};return(0,s.jsxs)(I.a,{padding:8,background:"neutral100",children:[Fe?.paypalSelected&&(0,s.jsx)(At.$,{navigationAction:(0,s.jsx)(ht.N,{startIcon:(0,s.jsx)(le.A,{}),to:"/",children:"Go back"}),primaryAction:(0,s.jsx)(jt.$,{onClick:()=>oe(!0),startIcon:(0,s.jsx)(we.A,{}),children:"Add an entry"}),title:"Products",subtitle:z.length+" entries found",as:"h2"}),!Fe?.paypalSelected&&(0,s.jsx)(At.$,{navigationAction:(0,s.jsx)(ht.N,{startIcon:(0,s.jsx)(le.A,{}),to:"/",children:"Go back"}),title:"Products",subtitle:z.length+" entries found",as:"h2"}),(0,s.jsxs)(Ut.X,{colCount:4,children:[(0,s.jsx)(Et.d,{children:(0,s.jsxs)(st.Tr,{children:[(0,s.jsx)(V.Th,{onClick:()=>Ee(),children:(0,s.jsx)(tt.o,{variant:"sigma",children:"ID"})}),(0,s.jsx)(V.Th,{children:(0,s.jsx)(tt.o,{variant:"sigma",children:"SKU"})}),(0,s.jsx)(V.Th,{children:(0,s.jsx)(tt.o,{variant:"sigma",children:"TITLE"})}),(0,s.jsx)(V.Th,{children:(0,s.jsx)(tt.o,{variant:"sigma",children:"PRICE"})}),(0,s.jsx)(V.Th,{children:(0,s.jsx)(tt.o,{variant:"sigma",children:"QUANTITY"})}),(0,s.jsx)(V.Th,{children:(0,s.jsx)(Bt.s,{children:"Actions"})})]})}),(0,s.jsx)(xe.N,{children:z.map(it=>(0,s.jsxs)(st.Tr,{children:[(0,s.jsx)(V.Td,{onClick:()=>H(it),children:(0,s.jsx)(tt.o,{textColor:"neutral800",children:it.id})}),(0,s.jsx)(V.Td,{onClick:()=>H(it),children:(0,s.jsx)(tt.o,{textColor:"neutral800",children:it.SKU})}),(0,s.jsx)(V.Td,{onClick:()=>H(it),children:(0,s.jsx)(tt.o,{textColor:"neutral800",children:it.title})}),(0,s.jsx)(V.Td,{onClick:()=>H(it),children:(0,s.jsx)(tt.o,{textColor:"neutral800",children:it.amount_value+" "+it.amount_currency_code})}),(0,s.jsx)(V.Td,{onClick:()=>H(it),children:(0,s.jsx)(tt.o,{textColor:"neutral800",children:it.Quantity})})]},it.id))})]}),Ae&&(0,s.jsx)(A.E,{children:(0,s.jsx)(Lt,{showModal:ge,paypalSelected:Fe?.paypalSelected,product:mt,handleUpdateProduct:Ct})}),Vt&&(0,s.jsx)(A.E,{children:(0,s.jsx)(St,{showModal:oe,handleCreateProduct:B})})]})},lt=()=>(0,s.jsx)(dt,{})},37708:(vn,Wt,g)=>{g.r(Wt),g.d(Wt,{default:()=>ee});var s=g(92132),I=g(42455),At=g(4198),ht=g(94061),jt=g(83997),Ut=g(30893),Et=g(85963),st=g(76021),V=g(3036),tt=g(21272);const Bt=(0,tt.createContext)(void 0);function xe({children:L}){const[at,dt]=(0,tt.useState)("");return(0,s.jsx)(Bt.Provider,{value:{userData:at,setUserData:dt},children:L})}function A(){const L=(0,tt.useContext)(Bt);if(L===void 0)throw new Error("useStepperContext must be used within a StepperContextProvider");return L}var le=g(59615),we=g(74739);const $t=()=>{const{userData:L,setUserData:at}=A(),dt=J=>{const{name:lt,value:W}=J.target;at({...L,[lt]:W})};return(0,s.jsxs)(I.P,{children:[(0,s.jsx)(le.A,{}),(0,s.jsx)(we.A,{})]})};var Se=g(73990),te=g(64871);const K=()=>(0,s.jsx)(I.P,{children:(0,s.jsxs)(At.s,{children:[(0,s.jsx)(ht.a,{children:(0,s.jsx)(Ut.o,{children:"You can always review configuration under /Settings"})}),(0,s.jsx)(ht.a,{children:(0,s.jsx)(Ut.o,{children:"Create you first product to start selling"})}),(0,s.jsx)(te.N,{to:"/content-manager/collectionType/plugin::omcommerce.tax?page=1&pageSize=10&sort=country_code:ASC",children:"Internal link"})]})}),Ne=({steps:L,currentStep:at})=>{const[dt,J]=(0,tt.useState)([]),lt=(0,tt.useRef)(null),W=(nt,mt)=>{const N=[...mt];let _=0;for(;_<N.length;)_===nt?(N[_]={...N[_],highlighted:!0,selected:!0,completed:!0},_++):_<nt?(N[_]={...N[_],highlighted:!1,selected:!0,completed:!0},_++):(N[_]={...N[_],highlighted:!1,selected:!1,completed:!1},_++);return N};(0,tt.useEffect)(()=>{const nt=L.map((N,_)=>({description:N,completed:!1,highlighted:_===0,selected:_===0}));lt.current=nt;const mt=W(at-1,lt.current);J(mt)},[L,at]);const R=nt=>{const mt={borderRadius:"50%",transition:"all 0.5s ease-in-out",border:"2px solid #888888",display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",fontWeight:"bold",fontSize:"16px",color:"white"};return nt.selected?{...mt,backgroundColor:"#4945ff",color:"white",borderColor:"#007500"}:mt},z=dt.map((nt,mt)=>(0,s.jsx)(I.P,{children:(0,s.jsx)(At.s,{children:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",paddingLeft:16,paddingRight:16},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:R(nt),children:nt.completed?(0,s.jsx)("span",{children:"\u2713"}):mt+1}),(0,s.jsx)("div",{style:{marginTop:"16px",textTransform:"uppercase",fontSize:"12px",color:nt.highlighted?"#4945ff":"#888888"},children:nt.description})]}),mt!==dt.length-1&&(0,s.jsx)("div",{style:{flex:1,borderTop:nt.completed?"2px solid #007500":"2px solid #888888"}})]},mt)})}));return(0,s.jsx)("div",{style:{margin:"0 auto",padding:"16px",display:"flex",justifyContent:"space-between",width:"100%"},children:z})},It=({handleClick:L,currentStep:at,steps:dt})=>(0,s.jsx)(I.P,{children:(0,s.jsx)(At.s,{children:(0,s.jsxs)(jt.s,{justifyContent:"space-between",children:[(0,s.jsx)(ht.a,{children:(0,s.jsx)(Et.$,{onClick:()=>L(),disabled:at===1,style:{cursor:at===1?"not-allowed":"pointer",opacity:at===1?.5:1},children:"Back"})}),(0,s.jsx)(ht.a,{children:(0,s.jsx)(Et.$,{onClick:()=>L("next"),children:at===dt.length-1?"Confirm":"Next"})})]})})});var Me=g(4181),Kt=g(13034);const ie=()=>{const[L,at]=(0,tt.useState)(!1),dt=J=>{at(J)};return(0,s.jsx)(I.P,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.P,{children:(0,s.jsx)(At.s,{children:(0,s.jsx)(ht.a,{marginTop:"1rem",style:{paddingLeft:"28px"},children:(0,s.jsxs)(jt.s,{paddingleft:"112px",children:[(0,s.jsx)(Ut.o,{style:{paddingRight:"10px"},children:"Do you offer shipping?"}),(0,s.jsx)(Me.S,{id:"shipping-status",name:"shipping-status",onValueChange:dt,value:L})]})})})}),L&&(0,s.jsx)(ht.a,{children:(0,s.jsx)(Kt.A,{})})]})})};var Gt=g(39197);const kt=()=>{const[L,at]=(0,tt.useState)(!1),dt=J=>{at(J)};return(0,s.jsx)(I.P,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.P,{children:(0,s.jsx)(At.s,{children:(0,s.jsx)(ht.a,{marginTop:"1rem",style:{paddingLeft:"28px"},children:(0,s.jsxs)(jt.s,{paddingleft:"112px",children:[(0,s.jsx)(Ut.o,{style:{paddingRight:"10px"},children:"Do you need to include taxes?"}),(0,s.jsx)(Me.S,{id:"shipping-status",name:"shipping-status",onValueChange:dt,value:L})]})})})}),L&&(0,s.jsx)(ht.a,{children:(0,s.jsx)(Gt.A,{})})]})})};var Lt=g(55506);const xt={getAllSetups:async()=>{try{return await(0,Lt.l1)("/omcommerce/setup/find",{method:"GET"})}catch(L){console.error(L);return}},addSetup:async L=>{try{return await(0,Lt.l1)("/omcommerce/setup/create",{method:"POST",body:JSON.parse(JSON.stringify({data:L}))})}catch(at){console.error(at)}},editSetup:async(L,at)=>{try{return await(0,Lt.l1)(`/omcommerce/setup/update/${L}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.parse(JSON.stringify({data:at}))})}catch(dt){console.error(dt)}}},St=()=>(0,s.jsx)(s.Fragment,{});var Xt=g(30462);const ee=()=>{const[L,at]=(0,tt.useState)(1),[dt,J]=(0,tt.useState)(void 0),[lt,W]=(0,tt.useState)([]),[R,z]=(0,tt.useState)("pGood"),[nt,mt]=(0,tt.useState)(!1),[N,_]=(0,tt.useState)(0),[ce,Dt]=(0,tt.useState)(!1);(0,tt.useEffect)(()=>{pe().then(rt=>console.log(rt))},[]);const pe=async()=>{try{try{const Vt=await Xt.A.getAllPaypalSetups();Vt&&Vt.paypalSelected&&Dt(!0)}catch(Vt){console.error("Error fetching PayPal setups:",Vt)}const rt=await xt.getAllSetups();J(rt),mt(!rt.wizard_open),at(rt.wizard_state),rt.product_type===1?(W(ge),_(1)):rt.product_type===2&&(W(ge),_(2))}catch(rt){console.error("Error seeding data:",rt)}finally{}},Ae=["General","Payment","Shipping","Tax","Final"],ge=["General","Payment","Final"],$e=rt=>{switch(rt){case 1:return(0,s.jsx)($t,{});case 2:return(0,s.jsx)(Se.default,{handleSetSteps:he,st:N,steps:lt,pp:fe});case 3:return(0,s.jsx)(ie,{});case 4:return(0,s.jsx)(kt,{});case 5:return(0,s.jsx)(K,{});default:return null}},ze=rt=>{switch(rt){case 1:return(0,s.jsx)($t,{});case 2:let Vt=0;if(lt)return(0,s.jsx)(Se.default,{handleSetSteps:he,st:Vt,steps:lt,pp:fe});case 3:return(0,s.jsx)(K,{});default:return null}},Be=async()=>{await pe()},Ke=rt=>{rt==="next"&&L<lt.length?(at(L+1),xt.editSetup(dt.id,{wizard_state:L+1}),L===lt.length-1&&xt.editSetup(dt.id,{wizard_open:!1})):rt!=="next"&&L>1&&(at(L-1),xt.editSetup(dt.id,{wizard_state:L-1}))};if(nt)return(0,s.jsx)(St,{});const ae=rt=>{xt.editSetup(dt.id,{wizard_option:1,product_type:R==="pGood"?1:2}),pe()},he=rt=>{W(rt)},fe=rt=>{Dt(rt)};return(0,s.jsxs)(s.Fragment,{children:[dt?dt.wizard_option===0?(0,s.jsx)(I.P,{children:(0,s.jsx)(At.s,{justifyContent:"center",textAlign:"center",children:(0,s.jsxs)(jt.s,{padding:"1rem",direction:"column",children:[(0,s.jsx)(Ut.o,{children:"What are you selling?"}),(0,s.jsxs)(ht.a,{margin:"1rem",justifyContent:"center",textAlign:"center",children:[(0,s.jsxs)(st.z,{labelledBy:"trophy-champions",onChange:rt=>z(rt.target.value),value:R,name:"goods",children:[(0,s.jsx)(V.s,{marginBottom:"1rem",marginTop:"1rem",value:"pGood",children:"Psychical goods (This will include Taxes and Shipping if you choose Paypal)  "}),(0,s.jsx)(V.s,{marginBottom:"1rem",marginTop:"1rem",value:"dGood",children:"Digital goods"})]}),(0,s.jsx)(Et.$,{marginTop:"1rem",onClick:()=>ae(1),variant:"tertiary",children:"Continue"})]})]})})}):(0,s.jsx)(I.P,{children:(0,s.jsxs)(At.s,{children:[(0,s.jsxs)(jt.s,{padding:"1rem",direction:"column",children:[(0,s.jsx)(Ne,{steps:lt,currentStep:L}),(0,s.jsx)(ht.a,{padding:"1rem",style:{width:"100%",paddingLeft:0,paddingRight:0},children:(0,s.jsx)(xe,{children:dt?.product_type===1&&ce?$e(L):ze(L)})})]}),L!==lt.length&&(0,s.jsx)(I.P,{children:(0,s.jsx)(At.s,{style:{paddingLeft:"48px"},children:(0,s.jsx)(It,{handleClick:Ke,currentStep:L,steps:lt})})})]})}):(0,s.jsx)(I.P,{children:(0,s.jsx)(At.s,{justifyContent:"center",textAlign:"center",children:(0,s.jsx)(ht.a,{padding:"1rem",children:(0,s.jsxs)(jt.s,{children:[(0,s.jsx)(Ut.o,{children:" Initialize setup "}),(0,s.jsx)(Et.$,{onClick:()=>Be(),variant:"tertiary",children:"Initialize"})]})})})}),";"]})}}}]);
