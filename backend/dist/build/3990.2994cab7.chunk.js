"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[3990],{70659:(P,p,a)=>{a.d(p,{A:()=>v});var e=a(55506);const v={getAllCurrency:async()=>{try{return await(0,e.l1)("/omcommerce/currency/find",{method:"GET"})}catch(r){console.error(r)}},addCurrency:async r=>{try{return await(0,e.l1)("/omcommerce/currency/create",{method:"POST",body:JSON.parse(JSON.stringify(r))})}catch(o){console.error(o)}},editCurrency:async(r,o)=>{try{return await(0,e.l1)(`/omcommerce/currency/update/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.parse(JSON.stringify(o))})}catch(d){console.error(d)}}}},30462:(P,p,a)=>{a.d(p,{A:()=>v});var e=a(55506);const v={getAllPaypalSetups:async()=>{try{return await(0,e.l1)("/omcommerce/paypalsetup/find",{method:"GET"})}catch(r){throw r}},addPaypalSetup:async r=>{try{return await(0,e.l1)("/omcommerce/paypalsetup/create",{method:"POST",body:JSON.parse(JSON.stringify(r))})}catch(o){throw o}},editPaypalSetup:async(r,o)=>{try{return await(0,e.l1)(`/omcommerce/paypalsetup/update/${r}`,{method:"PUT",body:JSON.parse(JSON.stringify(o))})}catch(d){throw d}}}},73990:(P,p,a)=>{a.r(p),a.d(p,{default:()=>Q});var e=a(92132),i=a(42455),v=a(4198),r=a(94061),o=a(30893),d=a(90151),c=a(68074),u=a(4181),m=a(76021),b=a(3036),y=a(7537),j=a(85963),s=a(21272),l=a(30462),C=a(48323),J=a(55506),T=a(70659);const k=JSON.parse('[{"label":"Australian dollar","value":"AUD"},{"label":"Brazilian real","value":"BRL"},{"label":"Canadian dollar","value":"CAD"},{"label":"Chinese Renmenbi","value":"CNY"},{"label":"Czech koruna","value":"CZK"},{"label":"Danish krone","value":"DKK"},{"label":"Euro","value":"EUR"},{"label":"Hong Kong dollar","value":"HKD"},{"label":"Hungarian forint","value":"HUF"},{"label":"Israeli new shekel","value":"ILS"},{"label":"Japanese yen","value":"JPY"},{"label":"Malaysian ringgit","value":"MYR"},{"label":"Mexican peso","value":"MXN"},{"label":"New Taiwan dollar","value":"TWD"},{"label":"New Zealand dollar","value":"NZD"},{"label":"Norwegian krone","value":"NOK"},{"label":"Philippine peso","value":"PHP"},{"label":"Polish z\u0142oty","value":"PLN"},{"label":"Pound sterling","value":"GBP"},{"label":"Singapore dollar","value":"SGD"},{"label":"Swedish krona","value":"SEK"},{"label":"Swiss franc","value":"CHF"},{"label":"Thai baht","value":"THB"},{"label":"United States dollar","value":"USD"}]');var H=a(20636);const Y={id:0,currency:""},Z=()=>{const[E,R]=(0,s.useState)(!0),[z,A]=(0,s.useState)(!0),[$,x]=(0,s.useState)(Y),[O,B]=(0,s.useState)(void 0),[D,M]=(0,s.useState)({}),[W,g]=(0,s.useState)(!1),N=k.map(n=>({value:n.value,label:`${n.label} (${n.value})`}));(0,s.useEffect)(()=>{L()},[]);const S=n=>{B(n),n!==void 0&&I({target:{name:"currency",value:n}})},I=n=>{const{name:h,value:F}=n.target;x({...$,[h]:F}),M({...D,[h]:""}),g(!1)},L=async()=>{try{const n=await T.A.getAllCurrency();n!==void 0&&(A(!1),x(n),B(n.currency))}catch(n){console.error("Error fetching data:",n)}finally{R(!1)}},w=async n=>{const h={};if(n.currency||(h.currency="Currency is required"),M(h),Object.keys(h).length>0){console.error("Please fill in all required fields");return}z?(g(!1),await T.A.addCurrency(n),A(!1)):(g(!1),await T.A.editCurrency(n.id,n)),await L()};return E?(0,e.jsx)(J.Bl,{}):(0,e.jsx)(i.P,{children:(0,e.jsxs)(v.s,{children:[W&&(0,e.jsx)(H.F,{closeLabel:"Close",onClose:()=>g(!1),title:"Error",variant:"danger",children:"Fill all required fields."}),(0,e.jsxs)(r.a,{padding:"3rem",background:"neutral0",borderRadius:"4px",style:{boxShadow:"rgba(3, 3, 5, 0.35) 1px 1px 10px"},children:[(0,e.jsx)(o.o,{variant:"beta",children:"Paypal currency"}),(0,e.jsx)(d.x,{gap:5,marginBottom:"2rem",children:(0,e.jsx)(c.E,{col:6,s:12,children:(0,e.jsxs)(r.a,{marginTop:"1rem",children:[(0,e.jsx)(C.Z,{label:"Currency",placeholder:"Select a currency",hint:"Currency used in paypal payment",onClear:()=>{S(void 0)},value:O,onChange:S,required:!0,children:N.map(n=>(0,e.jsx)(C.eY,{value:n.value,children:n.label},n.value))}),D.currency&&(0,e.jsx)(o.o,{textColor:"danger600",children:D.currency})]})})}),(0,e.jsx)(j.$,{size:"L",onClick:()=>w($),variant:"secondary",children:"Save"})]})]})})},Q=({handleSetSteps:E,st:R,steps:z,pp:A})=>{const $={id:1,live_paypal_client_id:"",live_paypal_client_secret:"",sandbox_paypal_client_id:"",sandbox_paypal_client_secret:"",live:!1,paypalSelected:!1,payProGlobalSelected:!1,paymentThreeSelected:!1},[x,O]=(0,s.useState)($),[B,D]=(0,s.useState)(!0),[M,W]=(0,s.useState)(!0),[g,N]=(0,s.useState)("sandbox"),[S,I]=(0,s.useState)(!1),[L,w]=(0,s.useState)(!1),[n,h]=(0,s.useState)(!1);(0,s.useEffect)(()=>{F()},[]);const F=async()=>{M||W(!0);try{const t=await l.A.getAllPaypalSetups();R===1&&!t.paypalSelected&&E(V),O(t),I(t.paypalSelected),w(t.payProGlobalSelected),h(t.paymentThreeSelected),N(t.live===!0?"live":"sandbox"),D(!1),O(t),I(t.paypalSelected),w(t.payProGlobalSelected),h(t.paymentThreeSelected),N(t.live===!0?"live":"sandbox")}catch(t){console.error("Error fetching data:",t)}finally{W(!1)}},K=t=>{const{name:f,value:U}=t.target;O({...x,[f]:U})},_=async t=>{const f={sandbox_paypal_client_id:t.sandbox_paypal_client_id?t.sandbox_paypal_client_id:void 0,sandbox_paypal_client_secret:t.sandbox_paypal_client_secret?t.sandbox_paypal_client_secret:void 0,live_paypal_client_id:t.live_paypal_client_id?t.live_paypal_client_id:void 0,live_paypal_client_secret:t.live_paypal_client_secret?t.live_paypal_client_secret:void 0,live:g!=="sandbox",paypalSelected:S,payProGlobalSelected:L,paymentThreeSelected:n};Object.keys(f).forEach(U=>f[U]===void 0&&delete f[U]),B?await l.A.addPaypalSetup(f):await l.A.editPaypalSetup(t.id,f),F()},q=["General","Payment","Shipping","Tax","Final"],V=["General","Payment","Final"];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.P,{children:(0,e.jsx)(v.s,{children:(0,e.jsxs)(r.a,{padding:"3rem",marginTop:"3rem",background:"neutral0",borderRadius:"4px",style:{boxShadow:"rgba(3, 3, 5, 0.35) 1px 1px 10px"},children:[(0,e.jsx)(o.o,{variant:"beta",children:"Select payment methods"}),(0,e.jsxs)(d.x,{gap:5,marginBottom:"2rem",children:[(0,e.jsx)(c.E,{col:12,children:(0,e.jsx)(r.a,{marginTop:"1rem",children:(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:(0,e.jsx)(u.S,{id:"paypalSelected",name:"paypalSelected",onValueChange:t=>{I(t),t&&R===1?(E(q),A(!0)):!t&&R===1&&(E(V),A(!1))},value:S,children:"Paypal"})}),(0,e.jsx)("li",{children:(0,e.jsx)(u.S,{id:"payProGlobalSelected",name:"payProGlobalSelected",onValueChange:t=>w(t),value:L,children:"Fast Spring"})}),(0,e.jsx)("li",{children:(0,e.jsx)(u.S,{id:"paymentThreeSelected",name:"paymentThreeSelected",onValueChange:t=>h(t),value:n,children:"Stripe"})})]})})}),S&&(0,e.jsxs)(e.Fragment,{children:[" ",(0,e.jsx)(c.E,{padding:1,col:8,children:(0,e.jsx)(r.a,{marginTop:"1rem",children:(0,e.jsxs)(m.z,{onChange:t=>N(t.target.value),value:g,name:"meal",children:[(0,e.jsx)(b.s,{value:"sandbox",children:"Sandbox"}),(0,e.jsx)(b.s,{value:"live",children:"Live"})]})})}),(0,e.jsx)(c.E,{col:6,s:12,children:(0,e.jsx)(r.a,{marginTop:"1rem",children:(0,e.jsx)(y.k,{name:"live_paypal_client_id",type:"password",value:x.live_paypal_client_id,onChange:K,fullWidth:!0,label:"Live paypal client id",hint:"Will be used when store goes live"})})}),(0,e.jsx)(c.E,{col:6,s:12,children:(0,e.jsx)(r.a,{marginTop:"1rem",children:(0,e.jsx)(y.k,{name:"live_paypal_client_secret",type:"password",value:x.live_paypal_client_secret,onChange:K,fullWidth:!0,label:"Live paypal client secret",hint:"Will be used when store goes live"})})}),(0,e.jsx)(c.E,{col:6,s:12,children:(0,e.jsx)(r.a,{marginTop:"1rem",children:(0,e.jsx)(y.k,{name:"sandbox_paypal_client_id",type:"password",value:x.sandbox_paypal_client_id,onChange:K,fullWidth:!0,label:"Sandbox paypal client id",hint:"Will be used when store is in sandbox mode"})})}),(0,e.jsx)(c.E,{col:6,s:12,children:(0,e.jsx)(r.a,{marginTop:"1rem",children:(0,e.jsx)(y.k,{name:"sandbox_paypal_client_secret",type:"password",value:x.sandbox_paypal_client_secret,onChange:K,fullWidth:!0,label:"Sandbox paypal client secret",hint:"Will be used when store is in sandbox mode"})})})]})]}),(0,e.jsx)(j.$,{onClick:()=>_(x),variant:"secondary",children:"Save"})]})})}),S&&(0,e.jsx)(Z,{})]})}},76021:(P,p,a)=>{a.d(p,{z:()=>o});var e=a(92132),i=a(21272),v=a(15420);const r=(d,c)=>{const u=d.querySelectorAll(c);u&&u.length>0&&u.item(0).setAttribute("tabindex","0")},o=({children:d,labelledBy:c,onChange:u,value:m="",size:b="M",name:y,...j})=>{const s=(0,i.useRef)(null);(0,i.useLayoutEffect)(()=>{m||r(s.current,`[name="${y}"]`)},[m,y]);const l=(0,i.useMemo)(()=>({onChange:u,selected:m,name:y,size:b}),[y,u,b,m]);return(0,e.jsx)(v.r.Provider,{value:l,children:(0,e.jsx)("div",{ref:s,role:"radiogroup","aria-labelledby":c,...j,children:d})})}},15420:(P,p,a)=>{a.d(p,{r:()=>i});var e=a(21272);const i=(0,e.createContext)({onChange:void 0,name:"",size:"M",selected:""})},3036:(P,p,a)=>{a.d(p,{s:()=>s});var e=a(92132),i=a(21272),v=a(63891),r=a(15420);const o=l=>l==="M"?"18px":"20px",d=l=>l==="M"?"10px":"12px",c=()=>"3px";var u=a(84175);const m=v.Ay.input`
  margin: 0;
  padding: 0;
  background-color: ${({theme:l})=>l.colors.neutral0};
  border: 1px solid ${({theme:l})=>l.colors.primary600};
  border-radius: 50%;
  height: ${({size:l})=>typeof l=="number"?l:o(l)};
  width: ${({size:l})=>typeof l=="number"?l:o(l)};
  -webkit-appearance: none;

  &:after {
    border-radius: 50%;
    content: '';
    position: relative;
    z-index: 1;
    display: block;
    height: ${({size:l})=>typeof l=="number"?l:d(l)};
    width: ${({size:l})=>typeof l=="number"?l:d(l)};
    left: ${c};
    top: ${c};
  }

  &:checked:after {
    background: ${({theme:l})=>l.colors.primary600};
  }

  &:disabled {
    border: 1px solid ${({theme:l})=>l.colors.neutral300};
    background: ${({theme:l})=>l.colors.neutral200};
  }
`,b=i.forwardRef(({value:l,disabled:C=!1,...J},T)=>{const k=(0,u.B)(),{onChange:H,selected:Y,name:X,size:Z}=(0,i.useContext)(r.r),G=Y===l;return(0,e.jsx)(m,{ref:T,type:"radio",name:X,value:l,tabIndex:G?0:-1,"aria-checked":G,checked:G,disabled:C,id:k,size:Z,onChange:H,...J})});b.displayName="Radio";var y=a(83997),j=a(30893);const s=({children:l,...C})=>(0,e.jsxs)(y.s,{alignItems:"center",as:"label",gap:2,children:[(0,e.jsx)(b,{...C}),(0,e.jsx)(j.o,{textColor:"neutral800",children:l})]})}}]);
