(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[4981],{67161:(x,A,t)=>{"use strict";t.d(A,{T:()=>s,k:()=>J});var e=t(96540),d=t(78263),l=t(90179),g=t.n(l),r=t(17357);const c=(m,E)=>({...m,fieldsToPick:E});var y=t(41261),P=t(44383),R=t.n(P),B=t(63560),L=t.n(B),G=t(73357),k=t.n(G);const V={fieldsToPick:[],formErrors:{},initialData:{},isLoading:!0,modifiedData:{},showHeaderButtonLoader:!1,showHeaderLoader:!0},F=(m,E)=>(0,y.Ay)(m,h=>{switch(E.type){case"GET_DATA_SUCCEEDED":{h.isLoading=!1,h.showHeaderLoader=!1,h.initialData=R()(E.data,m.fieldsToPick),h.modifiedData=R()(E.data,m.fieldsToPick);break}case"ON_CANCEL":{h.modifiedData=m.initialData,h.formErrors={};break}case"ON_CHANGE":{E.inputType==="password"&&!E.value?k()(h.modifiedData,E.keys.split(".")):E.keys.includes("username")&&!E.value?L()(h.modifiedData,E.keys.split("."),null):L()(h.modifiedData,E.keys.split("."),E.value);break}case"ON_SUBMIT":{h.showHeaderButtonLoader=!0;break}case"ON_SUBMIT_SUCCEEDED":{h.initialData=R()(E.data,m.fieldsToPick),h.modifiedData=R()(E.data,m.fieldsToPick),h.showHeaderButtonLoader=!1;break}case"SET_ERRORS":{h.formErrors=E.errors,h.showHeaderButtonLoader=!1;break}default:return h}}),Z=async(m,E)=>{let h=null;try{await E.validate(m,{abortEarly:!1})}catch($){h=(0,d.ed)($)}return h},s=(m,E,h,$)=>{const[{formErrors:lt,initialData:Y,isLoading:et,modifiedData:q,showHeaderButtonLoader:nt,showHeaderLoader:ot},T]=(0,e.useReducer)(F,V,()=>c(V,$)),C=(0,d.hN)(),{lockApp:W,unlockApp:rt}=(0,d.MA)(),{get:dt,put:st}=(0,d.ry)();return(0,e.useEffect)(()=>{m&&(async()=>{try{const{data:{data:j}}=await dt(m);T({type:"GET_DATA_SUCCEEDED",data:j,fieldsToPick:$})}catch(j){console.error(j.response),C({type:"warning",message:{id:"notification.error"}})}})()},[m]),[{formErrors:lt,initialData:Y,isLoading:et,modifiedData:q,showHeaderButtonLoader:nt,showHeaderLoader:ot},T,{handleCancel:()=>{T({type:"ON_CANCEL"})},handleChange:({target:{name:H,value:j,type:I}})=>{T({type:"ON_CHANGE",inputType:I,keys:H,value:j})},handleSubmit:async H=>{H.preventDefault();const j=await Z(q,E);if(T({type:"SET_ERRORS",errors:j||{}}),!j)try{W(),T({type:"ON_SUBMIT"});const I=g()(q,["confirmPassword","registrationToken"]);I.roles&&(I.roles=I.roles.map(mt=>mt.id)),I.ssoLockedRoles&&(I.ssoLockedRoles=[...new Set(I.ssoLockedRoles)]);const{data:{data:N}}=await st(m,I);h(N),T({type:"ON_SUBMIT_SUCCEEDED",data:N}),C({type:"success",message:{id:"notification.success.saved"}})}catch(I){const N=I?.response?.payload??{data:{}};N?.data&&typeof N.data=="string"?C({type:"warning",message:N.data}):C({type:"warning",message:N.message});const mt=(0,r.N)(N);T({type:"SET_ERRORS",errors:mt})}finally{rt()}},setField:(H,j)=>{T({type:"ON_CHANGE",keys:H,value:j})}}]};var tt=t(13561),it=t(71526),ht=t(88022);const ft={global:[{intlLabel:{id:"Settings.application.title",defaultMessage:"Overview"},to:"/settings/application-infos",id:"000-application-infos",permissions:[]},{intlLabel:{id:"Settings.webhooks.title",defaultMessage:"Webhooks"},to:"/settings/webhooks",id:"webhooks"},{intlLabel:{id:"Settings.apiTokens.title",defaultMessage:"API Tokens"},to:"/settings/api-tokens?sort=name:ASC",id:"api-tokens"},{intlLabel:{id:"Settings.transferTokens.title",defaultMessage:"Transfer Tokens"},to:"/settings/transfer-tokens?sort=name:ASC",id:"transfer-tokens"},...!window.strapi.features.isEnabled(window.strapi.features.SSO)&&window.strapi?.flags?.promoteEE?[{intlLabel:{id:"Settings.sso.title",defaultMessage:"Single Sign-On"},to:"/settings/purchase-single-sign-on",id:"sso",lockIcon:!0}]:[],...!window.strapi.features.isEnabled(window.strapi.features.REVIEW_WORKFLOWS)&&window.strapi?.flags?.promoteEE?[{intlLabel:{id:"Settings.review-workflows.page.title",defaultMessage:"Review Workflows"},to:"/settings/purchase-review-workflows",id:"review-workflows",lockIcon:!0}]:[]],admin:[{intlLabel:{id:"global.roles",defaultMessage:"Roles"},to:"/settings/roles",id:"roles"},{intlLabel:{id:"global.users"},to:"/settings/users?pageSize=10&page=1&sort=firstname",id:"users"},...!window.strapi.features.isEnabled(window.strapi.features.AUDIT_LOGS)&&window.strapi?.flags?.promoteEE?[{intlLabel:{id:"global.auditLogs",defaultMessage:"Audit Logs"},to:"/settings/purchase-audit-logs",id:"auditLogs",lockIcon:!0}]:[]]},Et=m=>m.map(E=>{const h=E.links.map($=>({...$,isDisplayed:!1}));return{...E,links:h}});var vt=t(33031),Lt=t.n(vt);const Q=m=>Lt()(m,E=>E.id),J=()=>{const[{isLoading:m,menu:E},h]=(0,e.useState)({isLoading:!0,menu:[]}),{allPermissions:$}=(0,d.r5)(),{shouldUpdateStrapi:lt}=(0,d.Xe)(),{settings:Y}=(0,d.vD)(),et=(0,tt.d4)(it.G),{global:q,admin:nt}=(0,ht.h)(ft,async()=>(await t.e(3221).then(t.bind(t,5602))).LINKS_EE,{combine(C,W){return{admin:[...W.admin,...C.admin],global:[...C.global,...W.global]}},defaultValue:{admin:[],global:[]}}),ot=(0,e.useCallback)(C=>{if(!C.id)throw new Error("The settings menu item must have an id attribute.");return{...C,permissions:et.settings?.[C.id]?.main}},[et.settings]);(0,e.useEffect)(()=>{const C=async()=>{const pt=await(ct=>Promise.all(ct.reduce((at,ut,H)=>{const j=I=>I.map(async(N,mt)=>({hasPermission:await(0,d.v$)($,N.permissions),sectionIndex:H,linkIndex:mt}));return[...at,...j(ut.links)]},[])))(dt);h(ct=>({...ct,isLoading:!1,menu:dt.map((at,ut)=>({...at,links:at.links.map((H,j)=>{const I=pt.find(N=>N.sectionIndex===ut&&N.linkIndex===j);return{...H,isDisplayed:Boolean(I.hasPermission)}})}))}))},{global:W,...rt}=Y,dt=Et([{...Y.global,links:Q([...Y.global.links,...q.map(ot)]).map(st=>({...st,hasNotification:st.id==="000-application-infos"&&lt}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:nt.map(ot)},...Object.values(rt)]);C()},[nt,q,$,Y,lt,ot]);const T=C=>({...C,links:C.links.filter(W=>W.isDisplayed)});return{isLoading:m,menu:E.map(T)}}},67204:(x,A,t)=>{"use strict";t.r(A),t.d(A,{SettingsPage:()=>Se});var e=t(96540),d=t(5774),l=t(78263),g=t(68154),r=t(6442),f=t(56347),c=t(67161),y=t(88022),P=t(11590),R=t(14368),B=t(75608),L=t(21069),G=t(46383),k=t(47774),V=t(34708),F=t(20858),Z=t(7292),gt=t(5556),s=t.n(gt),tt=t(54625),it=t(67336);const ht=(0,it.Ay)(B.I)`
  right: 15px;
  position: absolute;
`,ft=({menu:n})=>{const{formatMessage:o}=(0,r.A)(),{trackUsage:i}=(0,l.z1)(),{pathname:a}=(0,f.zy)(),S=n.filter(p=>!p.links.every(u=>u.isDisplayed===!1)).map(p=>({...p,title:p.intlLabel,links:p.links.map(u=>({...u,title:u.intlLabel,name:u.id}))})),O=o({id:"global.settings",defaultMessage:"Settings"}),M=(p=null)=>{i("willNavigate",{from:a,to:p})};return e.createElement(L.C,{ariaLabel:O},e.createElement(G.X,{label:O}),e.createElement(k.w,null,S.map(p=>e.createElement(V.L,{key:p.id,label:o(p.intlLabel)},p.links.map(u=>e.createElement(F.u,{as:tt.k2,withBullet:u.hasNotification,to:u.to,onClick:()=>M(u.to),key:u.id},o(u.intlLabel),u?.lockIcon&&e.createElement(ht,{width:`${15/16}rem`,height:`${15/16}rem`,as:Z.A})))))))};ft.propTypes={menu:s().array.isRequired};const It=ft,Et=[{async Component(){return await t.e(1177).then(t.bind(t,36156))},to:"/settings/roles",exact:!0},{async Component(){return await Promise.all([t.e(3761),t.e(6823)]).then(t.bind(t,12370))},to:"/settings/roles/duplicate/:id",exact:!0},{async Component(){return await Promise.all([t.e(3761),t.e(6823)]).then(t.bind(t,12370))},to:"/settings/roles/new",exact:!0},{async Component(){return await Promise.all([t.e(3761),t.e(6823)]).then(t.bind(t,49659))},to:"/settings/roles/:id",exact:!0},{async Component(){return await t.e(4563).then(t.bind(t,50125))},to:"/settings/users",exact:!0},{async Component(){return await t.e(9298).then(t.bind(t,86209))},to:"/settings/users/:id",exact:!0},{async Component(){return await t.e(3881).then(t.bind(t,31479))},to:"/settings/webhooks/create",exact:!0},{async Component(){return await t.e(3881).then(t.bind(t,83807))},to:"/settings/webhooks/:id",exact:!0},{async Component(){return await t.e(4001).then(t.bind(t,72506))},to:"/settings/webhooks",exact:!0},{async Component(){return await t.e(1007).then(t.bind(t,48977))},to:"/settings/api-tokens",exact:!0},{async Component(){return await Promise.all([t.e(3761),t.e(761),t.e(4937),t.e(2415)]).then(t.bind(t,48441))},to:"/settings/api-tokens/create",exact:!0},{async Component(){return await Promise.all([t.e(3761),t.e(761),t.e(4937),t.e(6723)]).then(t.bind(t,83321))},to:"/settings/api-tokens/:id",exact:!0},{async Component(){return await Promise.all([t.e(3761),t.e(761),t.e(6364),t.e(9962)]).then(t.bind(t,51040))},to:"/settings/transfer-tokens/create",exact:!0},{async Component(){return await t.e(314).then(t.bind(t,12837))},to:"/settings/transfer-tokens",exact:!0},{async Component(){return await Promise.all([t.e(3761),t.e(761),t.e(6364),t.e(3170)]).then(t.bind(t,50788))},to:"/settings/transfer-tokens/:id",exact:!0},{async Component(){return await t.e(5653).then(t.bind(t,1092))},to:"/settings/purchase-audit-logs",exact:!0},{async Component(){return await t.e(8571).then(t.bind(t,66554))},to:"/settings/purchase-review-workflows",exact:!0},{async Component(){return await t.e(4997).then(t.bind(t,30750))},to:"/settings/purchase-single-sign-on",exact:!0}];var vt=t(87304),Lt=t(76915),zt=t(72660),Q=t(78738),Bt=t(17433),J=t(61160),m=t(63188),E=t(94482),h=t(81799),$=t(28962),lt=t(4255),Y=t(17716),et=t(75942),q=t(13561),nt=t(88195),ot=t(71526),T=t(28992);const C=750,W=100,rt=["image/jpeg","image/png","image/svg+xml"];var dt=t(9870),st=t(16449),pt=t(98528),ct=t(43015),at=t(23165),ut=t(17606),H=t(63168),j=t(86621),I=t(41261);const N={localImage:void 0},bt=(n=N,o)=>(0,I.Ay)(n,i=>{switch(o.type){case"SET_LOCAL_IMAGE":{i.localImage=o.value;break}default:return i}}),yt=({onChangeLogo:n,customLogo:o,goTo:i,Component:a,modalTitle:v,next:S,prev:O,currentStep:M})=>{const[{localImage:p},u]=(0,e.useReducer)(bt,N),{formatMessage:U}=(0,r.A)(),D=b=>{u({type:"SET_LOCAL_IMAGE",value:b})},K=()=>{i(null)};return M?e.createElement(H.k,{labelledBy:"modal",onClose:K},e.createElement(j.r,null,e.createElement(m.o,{fontWeight:"bold",as:"h2",id:"modal"},U(v))),e.createElement(a,{setLocalImage:D,goTo:i,next:S,prev:O,onClose:K,asset:p||o,onChangeLogo:n})):null};yt.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},yt.propTypes={Component:s().elementType,currentStep:s().string,customLogo:s().shape({name:s().string,url:s().string,width:s().number,height:s().number,ext:s().string}),goTo:s().func.isRequired,modalTitle:s().shape({id:s().string,defaultMessage:s().string}),next:s().string,onChangeLogo:s().func.isRequired,prev:s().string};const Vt=yt,Ft={currentStep:void 0},Zt=(n=Ft,o)=>(0,I.Ay)(n,i=>{switch(o.type){case"GO_TO":{i.currentStep=o.to;break}default:return i}});var Xt=t(8820),Mt=t(98746),Qt=t(64360),Ct=t(95066),Jt=t(70008),Yt=t(43244),wt=t(38766),St=t(53459),kt=t(24569);const qt={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},Ut={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},_t=n=>new Promise(o=>{const i=new FileReader;i.onload=()=>{const a=new Image;a.onload=function(){o({width:a.width,height:a.height})},a.src=i.result},i.readAsDataURL(n)}),te=(n,o)=>({ext:n.name.split(".").pop(),size:n.size/1e3,name:n.name,url:URL.createObjectURL(n),rawFile:n,width:o.width,height:o.height}),jt=async n=>{let o;if(!rt.includes(n.type))throw o=new Error("File format"),o.displayMessage=qt,o;const a=await _t(n);if(!(a.width<=C&&a.height<=C))throw o=new Error("File sizing"),o.displayMessage=Ut,o;const S=te(n,a);if(!(S.size<=W))throw o=new Error("File sizing"),o.displayMessage=Ut,o;return S},ee=(0,it.Ay)(Jt.T)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,xt=({setLocalImage:n,goTo:o,next:i,onClose:a})=>{const{formatMessage:v}=(0,r.A)(),[S,O]=(0,e.useState)(!1),[M,p]=(0,e.useState)(void 0),u=(0,e.useRef)(null),U=()=>O(!0),D=()=>O(!1),K=w=>{w.preventDefault(),u.current.click()},b=async()=>{D();const w=u.current.files[0];if(w)try{const _=await jt(w);n(_),o(i)}catch(_){if(_.displayMessage)p(v(_.displayMessage,{size:W,dimension:C})),u.current.focus();else throw _}},X=()=>S?"primary500":M?"danger600":"neutral300";return e.createElement(e.Fragment,null,e.createElement("form",null,e.createElement(T.a,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(Yt.D,{name:"logo-upload",error:M},e.createElement("label",{htmlFor:"logo-upload"},e.createElement(J.s,{direction:"column",alignItems:"stretch",gap:2},e.createElement(J.s,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:S?"primary100":"neutral100",borderColor:X(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:U,onDragLeave:D},e.createElement(B.I,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:kt.A,"aria-hidden":!0}),e.createElement(T.a,{paddingTop:3,paddingBottom:5},e.createElement(m.o,{variant:"delta",as:"span"},v({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"}))),e.createElement(ee,{accept:rt,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:b,ref:u,id:"logo-upload"}),e.createElement(Q.$,{type:"button",onClick:K},v({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})),e.createElement(T.a,{paddingTop:6},e.createElement(m.o,{variant:"pi",textColor:"neutral600"},v({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:W,dimension:C})))),e.createElement(wt.b,null)))))),e.createElement(St.j,{startActions:e.createElement(Q.$,{onClick:a,variant:"tertiary"},v({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"}))}))};xt.defaultProps={next:null},xt.propTypes={goTo:s().func.isRequired,next:s().string,onClose:s().func.isRequired,setLocalImage:s().func.isRequired};const ne=xt;var oe=t(7052);const se=async n=>{try{const{get:o}=(0,l.GD)(),i=await o(n,{responseType:"blob",timeout:8e3});return new File([i.data],i.config.url,{type:i.headers["content-type"]})}catch(o){throw o.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},o}},At=({goTo:n,next:o,onClose:i,setLocalImage:a})=>{const{formatMessage:v}=(0,r.A)(),[S,O]=(0,e.useState)(""),[M,p]=(0,e.useState)(null),u=D=>{O(D.target.value)},U=async()=>{try{const D=await se(S),K=await jt(D);a(K),n(o)}catch(D){if(D.displayMessage)p(v(D.displayMessage,{size:W,dimension:C}));else throw D}};return e.createElement("form",{onSubmit:D=>{D.preventDefault(),U()}},e.createElement(T.a,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(oe.k,{label:v({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:M,onChange:u,value:S,name:"logo-url"})),e.createElement(St.j,{startActions:e.createElement(Q.$,{onClick:i,variant:"tertiary"},v({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(Q.$,{type:"submit"},v({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"}))}))};At.defaultProps={next:null},At.propTypes={goTo:s().func.isRequired,next:s().string,onClose:s().func.isRequired,setLocalImage:s().func.isRequired};const ae=At,Tt=({setLocalImage:n,goTo:o,next:i,onClose:a})=>{const{formatMessage:v}=(0,r.A)();return e.createElement(Xt.f,{label:v({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple"},e.createElement(T.a,{paddingLeft:8,paddingRight:8},e.createElement(Mt.t,null,e.createElement(Mt.o,null,v({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})),e.createElement(Mt.o,null,v({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"}))),e.createElement(Qt.c,null)),e.createElement(Ct.T,null,e.createElement(Ct.K,null,e.createElement(ne,{onClose:a,setLocalImage:n,goTo:o,next:i})),e.createElement(Ct.K,null,e.createElement(ae,{onClose:a,setLocalImage:n,goTo:o,next:i}))))};Tt.defaultProps={next:null},Tt.propTypes={goTo:s().func.isRequired,next:s().string,onClose:s().func.isRequired,setLocalImage:s().func.isRequired};const ie=Tt;var le=t(28126),re=t(74593),de=t(19886),ce=t(46306),ue=t(92433),Nt=t(444),me=t(80047);const Gt=({asset:n})=>{const{formatMessage:o}=(0,r.A)();return e.createElement(le.Z,null,e.createElement(re.a,null,e.createElement(de.P,{size:"S",src:n.url})),e.createElement(ce.b,null,e.createElement(ue.W,null,e.createElement(Nt.Z,null,n.name),e.createElement(Nt.j,null,`${n.ext.toUpperCase()} - ${n.width}\u2715${n.height}`)),e.createElement(me.S,null,o({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"}))))};Gt.propTypes={asset:s().shape({name:s().string,url:s().string,width:s().number,height:s().number,ext:s().string}).isRequired};const ge=Gt,Rt=({onClose:n,asset:o,prev:i,next:a,goTo:v,setLocalImage:S,onChangeLogo:O})=>{const{formatMessage:M}=(0,r.A)(),p=()=>{S(void 0),v(i)},u=()=>{O(o),v(a)};return e.createElement(e.Fragment,null,e.createElement(T.a,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(J.s,{justifyContent:"space-between",paddingBottom:6},e.createElement(J.s,{direction:"column",alignItems:"flex-start"},e.createElement(m.o,{variant:"pi",fontWeight:"bold"},M({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})),e.createElement(m.o,{variant:"pi",textColor:"neutral500"},M({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"}))),e.createElement(Q.$,{onClick:p,variant:"secondary"},M({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"}))),e.createElement(T.a,{maxWidth:(0,l.a8)(180)},o.url?e.createElement(ge,{asset:o}):null)),e.createElement(St.j,{startActions:e.createElement(Q.$,{onClick:n,variant:"tertiary"},M({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(Q.$,{onClick:u},M({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"}))}))};Rt.defaultProps={next:null,prev:null},Rt.propTypes={goTo:s().func.isRequired,asset:s().shape({name:s().string,url:s().string,width:s().number,height:s().number,ext:s().string}).isRequired,next:s().string,onClose:s().func.isRequired,onChangeLogo:s().func.isRequired,prev:s().string,setLocalImage:s().func.isRequired};const pe={upload:{Component:ie,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:Rt,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}},Ot=({canUpdate:n,customLogo:o,defaultLogo:i,hint:a,label:v,onChangeLogo:S,onResetLogo:O})=>{const[{currentStep:M},p]=(0,e.useReducer)(Zt,Ft),{Component:u,next:U,prev:D,modalTitle:K}=pe[M]||{},{formatMessage:b}=(0,r.A)(),X=w=>{p({type:"GO_TO",to:w})};return e.createElement(e.Fragment,null,e.createElement(dt.Z,{label:v,selectedSlide:0,hint:a,previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:o?.name||"logo.png",actions:e.createElement(st.O,null,e.createElement(pt.K,{disabled:!n,onClick:()=>X(o?"pending":"upload"),label:b({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:e.createElement(at.A,null)}),o&&e.createElement(pt.K,{disabled:!n,onClick:O,label:b({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:e.createElement(ut.A,null)}))},e.createElement(ct.o,{label:b({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"})},e.createElement(T.a,{maxHeight:"40%",maxWidth:"40%",as:"img",src:o?.url||i,alt:b({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})}))),e.createElement(Vt,{Component:u,currentStep:M,onChangeLogo:S,customLogo:o,goTo:X,next:U,prev:D,modalTitle:K}))};Ot.defaultProps={canUpdate:!1,customLogo:null,hint:null},Ot.propTypes={canUpdate:s().bool,customLogo:s().shape({url:s().string,name:s().string}),label:s().string.isRequired,hint:s().string,defaultLogo:s().string.isRequired,onChangeLogo:s().func.isRequired,onResetLogo:s().func.isRequired};const Wt=Ot;var fe=t(55364),he=t.n(fe);const Ee=(n,o)=>he()(n,{menuLogo:{display:o.menuLogo},authLogo:{display:o.authLogo}}),Dt={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}},authLogo:{display:null,submit:{rawFile:null,isReset:!1}}},ve=(n=Dt,o)=>(0,I.Ay)(n,i=>{switch(o.type){case"SET_CUSTOM_MENU_LOGO":{i.menuLogo.display=o.value,i.menuLogo.submit.rawFile=o.value.rawFile;break}case"SET_CUSTOM_AUTH_LOGO":{i.authLogo.display=o.value,i.authLogo.submit.rawFile=o.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{i.menuLogo.display=null,i.menuLogo.submit={rawFile:null,isReset:!0};break}case"RESET_CUSTOM_AUTH_LOGO":{i.authLogo.display=null,i.authLogo.submit={rawFile:null,isReset:!0};break}default:return i}}),Pt=(0,e.forwardRef)(({canUpdate:n,projectSettingsStored:o},i)=>{const{formatMessage:a}=(0,r.A)(),{trackUsage:v}=(0,l.z1)(),{logos:{menu:S,auth:O}}=(0,nt._)(),[{menuLogo:M,authLogo:p},u]=(0,e.useReducer)(ve,Dt,()=>Ee(Dt,o)),U=X=>{u({type:"SET_CUSTOM_MENU_LOGO",value:X})},D=()=>{v("didClickResetLogo",{logo:"menu"}),u({type:"RESET_CUSTOM_MENU_LOGO"})},K=X=>{u({type:"SET_CUSTOM_AUTH_LOGO",value:X})},b=()=>{v("didClickResetLogo",{logo:"auth"}),u({type:"RESET_CUSTOM_AUTH_LOGO"})};return(0,e.useImperativeHandle)(i,()=>({getValues:()=>({menuLogo:M.submit,authLogo:p.submit})})),e.createElement(T.a,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(m.o,{variant:"delta",as:"h3"},a({id:"Settings.application.customization",defaultMessage:"Customization"})),e.createElement(m.o,{variant:"pi",textColor:"neutral600"},a({id:"Settings.application.customization.size-details",defaultMessage:"Max dimension: {dimension}\xD7{dimension}, Max file size: {size}KB"},{dimension:C,size:W})),e.createElement(E.x,{paddingTop:4,gap:4},e.createElement(h.E,{col:6,s:12},e.createElement(Wt,{canUpdate:n,customLogo:M.display,defaultLogo:S.default,hint:a({id:"Settings.application.customization.menu-logo.carousel-hint",defaultMessage:"Replace the logo in the main navigation"}),label:a({id:"Settings.application.customization.carousel.menu-logo.title",defaultMessage:"Menu logo"}),onChangeLogo:U,onResetLogo:D})),e.createElement(h.E,{col:6,s:12},e.createElement(Wt,{canUpdate:n,customLogo:p.display,defaultLogo:O.default,hint:a({id:"Settings.application.customization.auth-logo.carousel-hint",defaultMessage:"Replace the logo in the authentication pages"}),label:a({id:"Settings.application.customization.carousel.auth-logo.title",defaultMessage:"Auth logo"}),onChangeLogo:K,onResetLogo:b}))))});Pt.defaultProps={canUpdate:!1,projectSettingsStored:null},Pt.propTypes={canUpdate:s().bool,projectSettingsStored:s().shape({menuLogo:s().shape({url:s().string,name:s().string})})};const Le=Pt,ye=n=>{const o=new FormData;return Object.entries(n).forEach(([i,a])=>{a&&a.rawFile instanceof File&&o.append(i,a.rawFile),a&&a.isReset&&o.append(i,null)}),o},Me=()=>null,Ce=()=>{const n=e.useRef(),o=(0,l.hN)(),{trackUsage:i}=(0,l.z1)(),{formatMessage:a}=(0,r.A)(),{get:v,post:S}=(0,l.ry)(),{updateProjectSettings:O}=(0,nt._)(),M=(0,q.d4)(ot.G),{formatAPIError:p}=(0,l.wq)(),{communityEdition:u,latestStrapiReleaseTag:U,nodeVersion:D,shouldUpdateStrapi:K,strapiVersion:b}=(0,l.Xe)(),X=(0,y.h)(Me,async()=>(await t.e(9849).then(t.bind(t,59849))).AdminSeatInfoEE),{allowedActions:{canRead:w,canUpdate:_}}=(0,l.ec)(M.settings["project-settings"]);(0,l.L4)();const{data:$t,isLoading:xe}=(0,et.useQuery)(["project-settings"],async()=>{const{data:z}=await v("/admin/project-settings");return z},{cacheTime:0,enabled:w,select(z){return{...z,authLogo:z.authLogo?{...z.authLogo,url:(0,l.vX)(z.authLogo.url)}:z.authLogo,menuLogo:z.menuLogo?{...z.menuLogo,url:(0,l.vX)(z.menuLogo.url)}:z.menuLogo}}}),Ae=(0,et.useMutation)(z=>S("/admin/project-settings",z,{headers:{"Content-Type":"multipart/form-data"}}),{onError(z){o({type:"warning",message:p(z)})},async onSuccess(z){const{menuLogo:Ht,authLogo:Kt}=z;O({menuLogo:Ht?.url,authLogo:Kt?.url}),Ht?.rawFile&&i("didChangeLogo",{logo:"menu"}),Kt?.rawFile&&i("didChangeLogo",{logo:"auth"}),o({type:"success",message:a({id:"app",defaultMessage:"Saved"})})}}),Te=z=>{z.preventDefault(),Ae.mutate(ye(n.current.getValues()))};return X?e.createElement(d.P,null,e.createElement(l.x7,{name:"Application"}),e.createElement(vt.g,null,xe?e.createElement(Lt.a,null,a({id:"Settings.application.isLoading",defaultMessage:"Loading"})):e.createElement("form",{onSubmit:Te},e.createElement(zt.Q,{title:a({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:a({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:_&&e.createElement(Q.$,{type:"submit",startIcon:e.createElement(lt.A,null)},a({id:"global.save",defaultMessage:"Save"}))}),e.createElement(Bt.s,null,e.createElement(J.s,{direction:"column",alignItems:"stretch",gap:6},e.createElement(J.s,{direction:"column",alignItems:"stretch",gap:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(m.o,{variant:"delta",as:"h3"},a({id:"global.details",defaultMessage:"Details"})),e.createElement(E.x,{gap:5,as:"dl"},e.createElement(h.E,{col:6,s:12},e.createElement(m.o,{variant:"sigma",textColor:"neutral600",as:"dt"},a({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})),e.createElement(J.s,{gap:3,direction:"column",alignItems:"start",as:"dd"},e.createElement(m.o,null,"v",b),K&&e.createElement($.N,{href:`https://github.com/strapi/strapi/releases/tag/${U}`,isExternal:!0,endIcon:e.createElement(Y.A,null)},a({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"})))),e.createElement(h.E,{col:6,s:12},e.createElement(m.o,{variant:"sigma",textColor:"neutral600",as:"dt"},a({id:"Settings.application.edition-title",defaultMessage:"current plan"})),e.createElement(J.s,{gap:3,direction:"column",alignItems:"start",as:"dd"},e.createElement(m.o,null,a({id:"Settings.application.ee-or-ce",defaultMessage:"{communityEdition, select, true {Community Edition} other {Enterprise Edition}}"},{communityEdition:u})),e.createElement($.N,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement(Y.A,null)},a({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})))),e.createElement(h.E,{col:6,s:12},e.createElement(m.o,{variant:"sigma",textColor:"neutral600",as:"dt"},a({id:"Settings.application.node-version",defaultMessage:"node version"})),e.createElement(m.o,{as:"dd"},D)),e.createElement(X,null))),w&&$t&&e.createElement(Le,{canUpdate:_,ref:n,projectSettingsStored:$t})))))):null};function Se(){const{settingId:n}=(0,f.g)(),{settings:o}=(0,l.vD)(),{formatMessage:i}=(0,r.A)(),{isLoading:a,menu:v}=(0,c.k)(),S=(0,y.h)(Et,async()=>(await t.e(280).then(t.bind(t,40280))).ROUTES_EE,{combine(p,u){return[...p,...u]},defaultValue:[]}),O=e.useMemo(()=>(0,R._)(S.map(({to:p,Component:u,exact:U})=>(0,P.u)(u,p,U))),[S]),M=Object.values(o).flatMap(p=>{const{links:u}=p;return u.map(U=>(0,P.u)(U.Component,U.to,U.exact||!1))});return a?e.createElement(l.Bl,null):n?e.createElement(d.P,{sideNav:e.createElement(It,{menu:v})},e.createElement(g.m,{title:i({id:"global.settings",defaultMessage:"Settings"})}),e.createElement(f.dO,null,e.createElement(f.qh,{path:"/settings/application-infos",component:Ce,exact:!0}),O,M)):e.createElement(f.rd,{to:"/settings/application-infos"})}},80909:(x,A,t)=>{var e=t(30641),d=t(38329),l=d(e);x.exports=l},5128:(x,A,t)=>{var e=t(80909),d=t(64894);function l(g,r){var f=-1,c=d(g)?Array(g.length):[];return e(g,function(y,P,R){c[++f]=r(y,P,R)}),c}x.exports=l},46155:(x,A,t)=>{var e=t(34932),d=t(47422),l=t(15389),g=t(5128),r=t(73937),f=t(27301),c=t(43714),y=t(83488),P=t(56449);function R(B,L,G){L.length?L=e(L,function(F){return P(F)?function(Z){return d(Z,F.length===1?F[0]:F)}:F}):L=[y];var k=-1;L=e(L,f(l));var V=g(B,function(F,Z,gt){var s=e(L,function(tt){return tt(F)});return{criteria:s,index:++k,value:F}});return r(V,function(F,Z){return c(F,Z,G)})}x.exports=R},73937:x=>{function A(t,e){var d=t.length;for(t.sort(e);d--;)t[d]=t[d].value;return t}x.exports=A},53730:(x,A,t)=>{var e=t(44394);function d(l,g){if(l!==g){var r=l!==void 0,f=l===null,c=l===l,y=e(l),P=g!==void 0,R=g===null,B=g===g,L=e(g);if(!R&&!L&&!y&&l>g||y&&P&&B&&!R&&!L||f&&P&&B||!r&&B||!c)return 1;if(!f&&!y&&!L&&l<g||L&&r&&c&&!f&&!y||R&&r&&c||!P&&c||!B)return-1}return 0}x.exports=d},43714:(x,A,t)=>{var e=t(53730);function d(l,g,r){for(var f=-1,c=l.criteria,y=g.criteria,P=c.length,R=r.length;++f<P;){var B=e(c[f],y[f]);if(B){if(f>=R)return B;var L=r[f];return B*(L=="desc"?-1:1)}}return l.index-g.index}x.exports=d},38329:(x,A,t)=>{var e=t(64894);function d(l,g){return function(r,f){if(r==null)return r;if(!e(r))return l(r,f);for(var c=r.length,y=g?c:-1,P=Object(r);(g?y--:++y<c)&&f(P[y],y,P)!==!1;);return r}}x.exports=d},33031:(x,A,t)=>{var e=t(83120),d=t(46155),l=t(69302),g=t(36800),r=l(function(f,c){if(f==null)return[];var y=c.length;return y>1&&g(f,c[0],c[1])?c=[]:y>2&&g(c[0],c[1],c[2])&&(c=[c[0]]),d(f,e(c,1),[])});x.exports=r},5774:(x,A,t)=>{"use strict";t.d(A,{P:()=>f});var e=t(74848),d=t(67336),l=t(28992);const g=(0,d.Ay)(l.a)`
  display: grid;
  grid-template-columns: ${({hasSideNav:c})=>c?"auto 1fr":"1fr"};
`,r=(0,d.Ay)(l.a)`
  overflow-x: hidden;
`,f=({sideNav:c,children:y})=>(0,e.jsxs)(g,{hasSideNav:Boolean(c),children:[c,(0,e.jsx)(r,{paddingBottom:10,children:y})]})},28962:(x,A,t)=>{"use strict";t.d(A,{N:()=>B});var e=t(74848),d=t(96540),l=t(17716),g=t(54625),r=t(67336),f=t(11763),c=t(63188),y=t(28992);const P=r.Ay.a`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  pointer-events: ${({disabled:L})=>L?"none":void 0};
  color: ${({disabled:L,theme:G})=>L?G.colors.neutral600:G.colors.primary600};

  svg path {
    transition: fill 150ms ease-out;
    fill: currentColor;
  }

  svg {
    font-size: ${10/16}rem;
  }

  ${c.o} {
    transition: color 150ms ease-out;
    color: currentColor;
  }

  &:hover {
    color: ${({theme:L})=>L.colors.primary500};
  }

  &:active {
    color: ${({theme:L})=>L.colors.primary700};
  }

  ${f.AP};
`,R=(0,r.Ay)(y.a)`
  display: flex;
`,B=d.forwardRef(({children:L,href:G,to:k,disabled:V=!1,startIcon:F,endIcon:Z,...gt},s)=>{const tt=G?"_blank":void 0,it=G?"noreferrer noopener":void 0;return(0,e.jsxs)(P,{as:k&&!V?g.k2:"a",target:tt,rel:it,to:V?void 0:k,href:V?"#":G,disabled:V,ref:s,...gt,children:[F&&(0,e.jsx)(R,{as:"span","aria-hidden":!0,paddingRight:2,children:F}),(0,e.jsx)(c.o,{children:L}),Z&&!G&&(0,e.jsx)(R,{as:"span","aria-hidden":!0,paddingLeft:2,children:Z}),G&&(0,e.jsx)(R,{as:"span","aria-hidden":!0,paddingLeft:2,children:(0,e.jsx)(l.A,{})})]})})},29722:(x,A,t)=>{"use strict";t.d(A,{A:()=>l});var e=t(74848);const d=g=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 4 4",...g,children:(0,e.jsx)("rect",{width:4,height:4,fill:"#A5A5BA",rx:2})}),l=d},7292:(x,A,t)=>{"use strict";t.d(A,{A:()=>l});var e=t(74848);const d=g=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...g,children:(0,e.jsx)("path",{fill:"#8E8EA9",d:"M19 10h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V11a1 1 0 0 1 1-1h1V9a7 7 0 0 1 14 0v1Zm-2 0V9A5 5 0 0 0 7 9v1h10Zm-6 4v4h2v-4h-2Z"})}),l=d}}]);
