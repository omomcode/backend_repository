"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[8065],{7427:(st,v,t)=>{t.r(v),t.d(v,{default:()=>Z});var e=t(21272),B=t(53432),z=t(55794),I=t(43121),O=t(69564),$=t(32559),g=t(90602),b=t(95065),h=t(13333),G=t(56336),W=t.n(G),H=t(33544),d=t.n(H),y=t(54894),U=t(19753),c=t(53209),o=t(34254),x=t(44370),P=t(57564),E=t(68065),A=t(45024),p=t(89787),C=t(85022);const D=({sort:s="",pageSize:l=10,onChange:n})=>{const{formatMessage:i}=(0,y.A)();return e.createElement(x.a,{background:"neutral0",hasRadius:!0,shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(P.x,{gap:4},e.createElement(E.E,{s:12,col:6},e.createElement(A.l,{label:i({id:(0,o.A)("config.entries.title"),defaultMessage:"Entries per page"}),hint:i({id:(0,o.A)("config.entries.note"),defaultMessage:"Number of assets displayed by default in the Media Library"}),onChange:a=>n({target:{name:"pageSize",value:a}}),name:"pageSize",value:l},C.mm.map(a=>e.createElement(p.c,{key:a,value:a},a)))),e.createElement(E.E,{s:12,col:6},e.createElement(A.l,{label:i({id:(0,o.A)("config.sort.title"),defaultMessage:"Default sort order"}),hint:i({id:(0,o.A)("config.note"),defaultMessage:"Note: You can override this value in the media library."}),onChange:a=>n({target:{name:"sort",value:a}}),name:"sort",value:s,"test-sort":s,"data-testid":"sort-select"},C.vP.map(a=>e.createElement(p.c,{"data-testid":`sort-option-${a.value}`,key:a.key,value:a.value},i({id:(0,o.A)(a.key),defaultMessage:`${a.value}`})))))))};D.propTypes={sort:d().string.isRequired,pageSize:d().number.isRequired,onChange:d().func.isRequired};const M=`${c.A}/ON_CHANGE`,S=`${c.A}/SET_LOADED`,V=({name:s,value:l})=>({type:M,keys:s,value:l}),F=()=>({type:S}),m={initialData:{},modifiedData:{}},L=s=>({...m,initialData:s,modifiedData:s});var Q=t(88761),Y=t(2600),j=t.n(Y),J=t(48940),K=t.n(J);const X=(s=m,l)=>(0,Q.Ay)(s,n=>{switch(l.type){case M:{K()(n,["modifiedData",...l.keys.split(".")],l.value);break}case S:{const i=L(j()(n,["modifiedData"],{}));n.initialData=i.initialData,n.modifiedData=i.modifiedData;break}default:return n}}),T=({config:s})=>{const{trackUsage:l}=(0,g.z1)(),{formatMessage:n}=(0,y.A)(),i=(0,g.hN)(),{mutateConfig:a}=(0,U.U)(),{isLoading:N}=a,[k,w]=(0,e.useState)(!1),f=()=>w(r=>!r),[q,R]=(0,e.useReducer)(X,m,()=>L(s)),{initialData:_,modifiedData:u}=q,tt=r=>{r.preventDefault(),f()},et=async()=>{l("willEditMediaLibraryConfig"),await a.mutateAsync(u),f(),R(F()),i({type:"success",message:{id:"notification.form.success.fields",defaultMessage:"Changes saved"}})},at=({target:{name:r,value:nt}})=>{R(V({name:r,value:nt}))};return(0,g.L4)(),e.createElement(B.P,null,e.createElement(z.g,{"aria-busy":N},e.createElement("form",{onSubmit:tt},e.createElement(I.Q,{navigationAction:e.createElement(g.N_,{startIcon:e.createElement(b.A,null),to:`/plugins/${c.A}`,id:"go-back"},n({id:(0,o.A)("config.back"),defaultMessage:"Back"})),primaryAction:e.createElement(O.$,{size:"S",startIcon:e.createElement(h.A,null),disabled:W()(u,_),type:"submit"},n({id:"global.save",defaultMessage:"Save"})),subtitle:n({id:(0,o.A)("config.subtitle"),defaultMessage:"Define the view settings of the media library."}),title:n({id:(0,o.A)("config.title"),defaultMessage:"Configure the view - Media Library"})}),e.createElement($.s,null,e.createElement(D,{"data-testid":"settings",pageSize:u.pageSize||"",sort:u.sort||"",onChange:at})),e.createElement(g.TM,{bodyText:{id:(0,o.A)("config.popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:e.createElement(h.A,null),isConfirmButtonLoading:N,isOpen:k,onToggleDialog:f,onConfirm:et,variantRightButton:"success-light"}))))};T.propTypes={config:d().shape({pageSize:d().number,sort:d().string}).isRequired};const Z=T}}]);
