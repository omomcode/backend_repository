"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[7175],{54729:(C,v,t)=>{t.d(v,{g:()=>f});var e=t(96540),r=t(78263),l=t(6442),E=t(75942);const f=(n={},m={})=>{const{id:s="",...i}=n,{get:o}=(0,r.ry)(),{locale:c}=(0,l.A)(),g=(0,r.QM)(c,{sensitivity:"base"}),{data:p,error:y,isError:a,isLoading:S,refetch:W}=(0,E.useQuery)(["roles",s,i],async()=>{const{data:T}=await o(`/admin/roles/${s??""}`,{params:i});return T},m);return{roles:e.useMemo(()=>{let T=[];return p&&(Array.isArray(p.data)?T=p.data:T=[p.data]),[...T].sort((O,K)=>g.compare(O.name,K.name))},[p,g]),error:y,isError:a,isLoading:S,refetch:W}}},55627:(C,v,t)=>{t.d(v,{m:()=>f});var e=t(96540),r=t(78263),l=t(53110),E=t(75942);function f(){const{get:n}=(0,r.ry)(),{formatAPIError:m}=(0,r.wq)(),s=(0,r.hN)(),i=(0,E.useQueries)([{queryKey:["content-manager","components"],async queryFn(){const{data:{data:a}}=await n("/content-manager/components");return a},onError(a){a instanceof l.pe&&s({type:"warning",message:m(a)})}},{queryKey:["content-manager","content-types"],async queryFn(){const{data:{data:a}}=await n("/content-manager/content-types");return a},onError(a){a instanceof l.pe&&s({type:"warning",message:m(a)})}}]),[o,c]=i,g=o.isLoading||c.isLoading,p=e.useMemo(()=>(c?.data??[]).filter(a=>a.kind==="collectionType"&&a.isDisplayed),[c?.data]),y=e.useMemo(()=>(c?.data??[]).filter(a=>a.kind!=="collectionType"&&a.isDisplayed),[c?.data]);return{isLoading:g,components:e.useMemo(()=>o?.data??[],[o?.data]),collectionTypes:p,singleTypes:y}}},30127:(C,v,t)=>{t.d(v,{N:()=>l});var e=t(96540),r=t(13561);function l(E,f){const n=(0,r.Pj)();(0,e.useEffect)(()=>{n.injectReducer(E,f)},[n,E,f])}},20022:(C,v,t)=>{t.d(v,{b:()=>E});var e=t(96540),r=t(78263),l=t(75942);function E({enabled:f}={enabled:!0}){const{get:n}=(0,r.ry)(),{data:m,isError:s,isLoading:i}=(0,l.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:g}}=await n("/admin/license-limit-information");return g},{enabled:f}),o=e.useMemo(()=>m??{},[m]),c=e.useCallback(g=>(o?.features??[]).find(y=>y.name===g)?.options??{},[o?.features]);return{license:o,getFeature:c,isError:s,isLoading:i}}},45683:(C,v,t)=>{t.d(v,{F6:()=>y,Io:()=>m,JU:()=>c,Ku:()=>f,Ll:()=>i,R5:()=>E,S0:()=>p,g1:()=>r,mF:()=>n,r0:()=>s,xO:()=>g,xY:()=>o,yX:()=>l});var e=t(11714);function r(a){return{type:e.YT,payload:{id:a}}}function l({workflow:a}){return{type:e.sT,payload:a}}function E({workflows:a}){return{type:e.T1,payload:a}}function f(a){return{type:e.U,payload:{stageId:a}}}function n(a={}){return{type:e.Cx,payload:a}}function m(a,S){return{type:e.Al,payload:{stageId:a,...S}}}function s(a){return{type:e.pq,payload:a}}function i(a,S){return{type:e.Ae,payload:{newIndex:S,oldIndex:a}}}function o(a){return{type:e.h$,payload:a}}function c(){return{type:e.fR}}function g(a){return{type:e.aM,payload:a}}function p(a){return{type:e.Yy,payload:a}}function y(a){return{type:e.iz,payload:a}}},89974:(C,v,t)=>{t.d(v,{kc:()=>L,nh:()=>O,Y9:()=>w,bL:()=>K});var e=t(96540),r=t(5774),l=t(87304),E=t(17433),f=t(72660),n=t(78263),m=t(29915),s=t(6442),i=t(35099),o=t(11714),c=t(61160),g=t(63188),p=t(52766),y=t(5556),a=t.n(y),S=t(67336);const W=(0,S.Ay)(c.s)`
  svg path {
    fill: ${({theme:M})=>M.colors.neutral600};
  }
`;function A({name:M}){return e.createElement(c.s,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,n.a8)(300)},e.createElement(W,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6},e.createElement(p.A,{width:`${8/16}rem`})),e.createElement(g.o,{fontWeight:"bold"},M))}A.propTypes={name:a().string.isRequired};function T({type:M,item:D}){switch(M){case o.TE.STAGE:return e.createElement(A,{...D});default:return null}}function O(){return e.createElement(i.M,{renderItem:T})}function K({children:M}){return e.createElement(r.P,null,e.createElement(l.g,{tabIndex:-1},e.createElement(E.s,null,M)))}function L({href:M}){const{formatMessage:D}=(0,s.A)();return e.createElement(n.N_,{startIcon:e.createElement(m.A,null),to:M},D({id:"global.back",defaultMessage:"Back"}))}function w({title:M,subtitle:D,navigationAction:x,primaryAction:N}){return e.createElement(e.Fragment,null,e.createElement(n.x7,{name:M}),e.createElement(f.Q,{navigationAction:x,primaryAction:N,title:M,subtitle:D}))}},59984:(C,v,t)=>{t.d(v,{nB:()=>T,bL:()=>L,hE:()=>A});var e=t(96540),r=t(63188),l=t(61160),E=t(63168),f=t(96230),n=t(28992),m=t(98528),s=t(53812),i=t(11339),o=t(5556),c=t.n(o),g=t(6442),p=t(67336);const y=t.p+"0cd5f8915b265d5b1856.png",a="limits-title",S="https://strapi.io/pricing-cloud",W="https://strapi.io/contact-sales";function A({children:w}){return e.createElement(r.o,{variant:"alpha",id:a},w)}A.propTypes={children:c().node.isRequired};function T({children:w}){return e.createElement(r.o,{variant:"omega"},w)}T.propTypes={children:c().node.isRequired};function O(){const{formatMessage:w}=(0,g.A)();return e.createElement(l.s,{gap:2,paddingTop:4},e.createElement(s.z,{variant:"default",isExternal:!0,href:S},w({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),e.createElement(s.z,{variant:"tertiary",isExternal:!0,href:W},w({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const K=p.Ay.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:w})=>`-${w.spaces[7]}`};
  margin-top: ${({theme:w})=>`-${w.spaces[7]}`};
  width: 360px;
`;function L({children:w,isOpen:M,onClose:D}){const{formatMessage:x}=(0,g.A)();return M?e.createElement(E.k,{labelledBy:a},e.createElement(f.c,null,e.createElement(l.s,{gap:2,paddingLeft:7,position:"relative"},e.createElement(l.s,{alignItems:"start",direction:"column",gap:2,width:"60%"},w,e.createElement(O,null)),e.createElement(l.s,{justifyContent:"end",height:"100%",width:"40%"},e.createElement(K,{src:y,"aria-hidden":!0,alt:"",loading:"lazy"}),e.createElement(n.a,{display:"flex",position:"absolute",right:0,top:0},e.createElement(m.K,{icon:e.createElement(i.A,null),"aria-label":x({id:"global.close",defaultMessage:"Close"}),onClick:D})))))):null}L.defaultProps={isOpen:!1},L.propTypes={children:c().node.isRequired,isOpen:c().bool,onClose:c().func.isRequired}},45410:(C,v,t)=>{t.d(v,{e:()=>ae});var e=t(96540),r=t(28992),l=t(61160),E=t(78263),f=t(5556),n=t.n(f),m=t(6442),s=t(13561),i=t(67336),o=t(45683),c=t(63188),g=t(20105);const p=(0,i.Ay)(g.A)`
  > circle {
    fill: ${({theme:d})=>d.colors.neutral150};
  }
  > path {
    fill: ${({theme:d})=>d.colors.neutral600};
  }
`,y=(0,i.Ay)(r.a)`
  border-radius: 26px;

  svg {
    height: ${({theme:d})=>d.spaces[6]};
    width: ${({theme:d})=>d.spaces[6]};

    > path {
      fill: ${({theme:d})=>d.colors.neutral600};
    }
  }

  &:hover {
    color: ${({theme:d})=>d.colors.primary600} !important;
    ${c.o} {
      color: ${({theme:d})=>d.colors.primary600} !important;
    }

    ${p} {
      > circle {
        fill: ${({theme:d})=>d.colors.primary600};
      }
      > path {
        fill: ${({theme:d})=>d.colors.neutral100};
      }
    }
  }

  &:active {
    ${c.o} {
      color: ${({theme:d})=>d.colors.primary600};
    }

    ${p} {
      > circle {
        fill: ${({theme:d})=>d.colors.primary600};
      }
      > path {
        fill: ${({theme:d})=>d.colors.neutral100};
      }
    }
  }
`;function a({children:d,...b}){return e.createElement(y,{as:"button",background:"neutral0",border:"neutral150",paddingBottom:3,paddingLeft:4,paddingRight:4,paddingTop:3,shadow:"filterShadow",...b},e.createElement(l.s,{gap:2},e.createElement(p,{"aria-hidden":!0}),e.createElement(c.o,{variant:"pi",fontWeight:"bold",textColor:"neutral500"},d)))}a.propTypes={children:n().node.isRequired};var S=t(56977),W=t(98528),A=t(53080),T=t(98680),O=t(99752),K=t(79335),L=t(94482),w=t(81799),M=t(7052),D=t(30370),x=t(20230),N=t(51936),X=t(70306),q=t(92643),j=t(47448),Y=t(7425),_=t(78897),ee=t(99142),h=t(98342),P=t(11714),te=t(87953),k=t(30405);const fe=(0,i.Ay)(S.fe)`
  padding-left: ${({theme:d})=>d.spaces[7]};
`,pe=(0,i.Ay)(l.s)`
  > * {
    flex-grow: 1;
  }
`,Ee=(0,i.Ay)(x.Dr)`
  color: ${({theme:d})=>d.colors.danger600};
`,ve=(0,i.Ay)(N.l9)`
  :hover,
  :focus {
    background-color: ${({theme:d})=>d.colors.neutral100};
  }

  > span {
    font-size: 0;
  }
`,ye=(0,i.Ay)(W.K)`
  align-items: center;
  border-radius: ${({theme:d})=>d.borderRadius};
  display: flex;
  justify-content: center;

  :hover,
  :focus {
    background-color: ${({theme:d})=>d.colors.neutral100};
  }

  svg {
    height: auto;
    width: ${({theme:d})=>d.spaces[3]}};
  }
`,he=(0,k.M)();function Se(){return e.createElement(r.a,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",display:"block",hasRadius:!0,padding:6,shadow:"tableShadow"})}function le({id:d,index:b,canDelete:$,canReorder:ne,canUpdate:B,isOpen:oe=!1,stagesCount:z}){const H=u=>`${u+1} of ${z}`,V=u=>{Q(R({id:"dnd.grab-item",defaultMessage:"{item}, grabbed. Current position in list: {position}. Press up and down arrow to change position, Spacebar to drop, Escape to cancel."},{item:U.value,position:H(u)}))},Te=u=>{Q(R({id:"dnd.drop-item",defaultMessage:"{item}, dropped. Final position in list: {position}."},{item:U.value,position:H(u)}))},Me=()=>{Q(R({id:"dnd.cancel-item",defaultMessage:"{item}, dropped. Re-order cancelled."},{item:U.value}))},Ae=(u,I)=>{Q(R({id:"dnd.reorder",defaultMessage:"{item}, moved. New position in list: {position}."},{item:U.value,position:H(u)})),F((0,o.Ll)(I,u))},Oe=()=>{re(!0)},[ie,Q]=e.useState(null),{formatMessage:R}=(0,m.A)(),{trackUsage:Re}=(0,E.z1)(),F=(0,s.wA)(),Ce=(0,E.hN)(),[se,We]=e.useState(oe),[De,re]=e.useState(!1),[U,ce,Ie]=(0,Y.Mt)(`stages.${b}.name`),[J,de,Le]=(0,Y.Mt)(`stages.${b}.color`),[G,ue,Pe]=(0,Y.Mt)(`stages.${b}.permissions`),ke=(0,s.d4)(te.y3),[{handlerId:be,isDragging:Ke,handleKeyDown:Ne},Be,xe,Ue,ge]=(0,ee.gY)(ne,{index:b,item:{name:U.value},onGrabItem:V,onDropItem:Te,onMoveItem:Ae,onCancel:Me,type:P.TE.STAGE}),$e=(0,h.tE)(Be,xe),Fe=he.map(({hex:u,name:I})=>({value:u,label:R({id:"Settings.review-workflows.stage.color.name",defaultMessage:"{name}"},{name:I}),color:u})),{themeColorName:Ge}=(0,k.w)(J.value)??{},me=ke.filter(u=>u.code!=="strapi-super-admin");return e.useEffect(()=>{ge((0,_.n5)(),{captureDraggingState:!1})},[ge,b]),e.createElement(r.a,{ref:$e},ie&&e.createElement(A.s,{"aria-live":"assertive"},ie),Ke?e.createElement(Se,null):e.createElement(T.n,{size:"S",variant:"primary",onToggle:()=>{We(!se),se||Re("willEditStage")},expanded:se,shadow:"tableShadow",error:ce.error??de?.error??ue?.error??!1,hasErrorMessage:!1},e.createElement(O.P,{title:U.value,togglePosition:"left",action:($||B)&&e.createElement(l.s,null,e.createElement(N.bL,null,e.createElement(ve,{size:"S",endIcon:null,paddingLeft:2,paddingRight:2},e.createElement(X.A,{"aria-hidden":!0,focusable:!1}),e.createElement(A.s,{as:"span"},R({id:"[tbdb].components.DynamicZone.more-actions",defaultMessage:"More actions"}))),e.createElement(N.UC,{popoverPlacement:"bottom-end",zIndex:2},e.createElement(N.x8,null,B&&e.createElement(x.Dr,{onClick:()=>F((0,o.g1)(d))},R({id:"Settings.review-workflows.stage.delete",defaultMessage:"Duplicate stage"})),$&&e.createElement(Ee,{onClick:()=>F((0,o.Ku)(d))},R({id:"Settings.review-workflows.stage.delete",defaultMessage:"Delete"}))))),B&&e.createElement(ye,{background:"transparent",forwardedAs:"div",hasRadius:!0,role:"button",noBorder:!0,tabIndex:0,"data-handler-id":be,ref:Ue,label:R({id:"Settings.review-workflows.stage.drag",defaultMessage:"Drag"}),onClick:u=>u.stopPropagation(),onKeyDown:Ne},e.createElement(q.A,null)))}),e.createElement(K.u,{padding:6,background:"neutral0",hasRadius:!0},e.createElement(L.x,{gap:4},e.createElement(w.E,{col:6},e.createElement(M.k,{...U,id:U.name,disabled:!B,label:R({id:"Settings.review-workflows.stage.name.label",defaultMessage:"Stage name"}),error:ce.error??!1,onChange:u=>{Ie.setValue(u.target.value),F((0,o.Io)(d,{name:u.target.value}))},required:!0})),e.createElement(w.E,{col:6},e.createElement(D.Z,{disabled:!B,error:de?.error??!1,id:J.name,required:!0,label:R({id:"content-manager.reviewWorkflows.stage.color",defaultMessage:"Color"}),onChange:u=>{Le.setValue(u),F((0,o.Io)(d,{color:u}))},value:J.value.toUpperCase(),startIcon:e.createElement(l.s,{as:"span",height:2,background:J.value,borderColor:Ge==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2})},Fe.map(({value:u,label:I,color:Z})=>{const{themeColorName:Ye}=(0,k.w)(Z);return e.createElement(D.eY,{value:u,key:u,startIcon:e.createElement(l.s,{as:"span",height:2,background:Z,borderColor:Ye==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2})},I)}))),e.createElement(w.E,{col:6},me.length===0?e.createElement(E.WT,{description:{id:"Settings.review-workflows.stage.permissions.noPermissions.description",defaultMessage:"You don\u2019t have the permission to see roles"},intlLabel:{id:"Settings.review-workflows.stage.permissions.label",defaultMessage:"Roles that can change this stage"},name:G.name}):e.createElement(l.s,{alignItems:"flex-end",gap:3},e.createElement(pe,{grow:1},e.createElement(S.KF,{...G,disabled:!B,error:ue.error??!1,id:G.name,label:R({id:"Settings.review-workflows.stage.permissions.label",defaultMessage:"Roles that can change this stage"}),onChange:u=>{const I=u.map(Z=>({role:parseInt(Z,10),action:"admin::review-workflows.stage.transition"}));Pe.setValue(I),F((0,o.Io)(d,{permissions:I}))},placeholder:R({id:"Settings.review-workflows.stage.permissions.placeholder",defaultMessage:"Select a role"}),required:!0,value:(G.value??[]).map(u=>`${u.role}`),withTags:!0},[{label:R({id:"Settings.review-workflows.stage.permissions.allRoles.label",defaultMessage:"All roles"}),children:me.map(u=>({value:`${u.id}`,label:u.name}))}].map(u=>"children"in u?e.createElement(S.np,{key:u.label,label:u.label,values:u.children.map(I=>I.value)},u.children.map(I=>e.createElement(fe,{key:I.value,value:I.value},I.label))):e.createElement(S.fe,{key:u.value,value:u.value},u.label)))),e.createElement(W.K,{disabled:!B,icon:e.createElement(j.A,null),label:R({id:"Settings.review-workflows.stage.permissions.apply.label",defaultMessage:"Apply to all stages"}),size:"L",variant:"secondary",onClick:()=>Oe(G.value)})))))),e.createElement(E.TM.Root,{iconRightButton:null,isOpen:De,onToggleDialog:()=>re(!1),onConfirm:()=>{F((0,o.r0)({permissions:G.value})),re(!1),Ce({type:"success",message:R({id:"Settings.review-workflows.page.edit.confirm.stages.permissions.copy.success",defaultMessage:"Applied roles to all other stages of the workflow"})})},variantRightButton:"primary"},e.createElement(E.TM.Body,null,e.createElement(c.o,{textAlign:"center",variant:"omega"},R({id:"Settings.review-workflows.page.edit.confirm.stages.permissions.copy",defaultMessage:"Roles that can change that stage will be applied to all the other stages."})))))}le.propTypes=n().shape({id:n().number.isRequired,color:n().string.isRequired,canDelete:n().bool.isRequired,canReorder:n().bool.isRequired,canUpdate:n().bool.isRequired,stagesCount:n().number.isRequired}).isRequired;const we=(0,i.Ay)(r.a)`
  transform: translateX(-50%);
`;function ae({canDelete:d,canUpdate:b,stages:$}){const{formatMessage:ne}=(0,m.A)(),B=(0,s.wA)(),{trackUsage:oe}=(0,E.z1)();return e.createElement(l.s,{direction:"column",gap:6,width:"100%"},e.createElement(r.a,{position:"relative",spacing:4,width:"100%"},e.createElement(we,{background:"neutral200",height:"100%",left:"50%",position:"absolute",top:"0",width:2,zIndex:1}),e.createElement(l.s,{direction:"column",alignItems:"stretch",gap:6,zIndex:2,position:"relative",as:"ol"},$.map((z,H)=>{const V=z?.id??z.__temp_key__;return e.createElement(r.a,{key:`stage-${V}`,as:"li"},e.createElement(le,{id:V,index:H,isOpen:!z.id,canDelete:$.length>1&&d,canReorder:$.length>1,canUpdate:b,stagesCount:$.length}))}))),b&&e.createElement(a,{type:"button",onClick:()=>{B((0,o.mF)({name:""})),oe("willCreateStage")}},ne({id:"Settings.review-workflows.stage.add",defaultMessage:"Add new stage"})))}ae.defaultProps={canDelete:!0,canUpdate:!0,stages:[]},ae.propTypes={canDelete:n().bool,canUpdate:n().bool,stages:n().arrayOf(n().shape({id:n().number,__temp_key__:n().number,name:n().string.isRequired}))}},42570:(C,v,t)=>{t.d(v,{r:()=>A});var e=t(96540),r=t(56977),l=t(63188),E=t(94482),f=t(81799),n=t(7052),m=t(78263),s=t(7425),i=t(5556),o=t.n(i),c=t(6442),g=t(13561),p=t(67336),y=t(45683),a=t(87953);const S=(0,p.Ay)(r.fe)`
  padding-left: ${({theme:T})=>T.spaces[7]};
`,W=(0,p.Ay)(l.o)`
  font-style: italic;
`;function A({canUpdate:T}){const{formatMessage:O,locale:K}=(0,c.A)(),L=(0,g.wA)(),{collectionTypes:w,singleTypes:M}=(0,g.d4)(a.tn),D=(0,g.d4)(a.NJ),x=(0,g.d4)(a.Ze),[N,X,q]=(0,s.Mt)("name"),[j,Y,_]=(0,s.Mt)("contentTypes"),ee=(0,m.QM)(K,{sensitivity:"base"});return e.createElement(E.x,{background:"neutral0",hasRadius:!0,gap:4,padding:6,shadow:"tableShadow"},e.createElement(f.E,{col:6},e.createElement(n.k,{...N,id:N.name,disabled:!T,label:O({id:"Settings.review-workflows.workflow.name.label",defaultMessage:"Workflow Name"}),error:X.error??!1,onChange:h=>{L((0,y.xY)({name:h.target.value})),q.setValue(h.target.value)},required:!0})),e.createElement(f.E,{col:6},e.createElement(r.KF,{...j,customizeContent:h=>O({id:"Settings.review-workflows.workflow.contentTypes.displayValue",defaultMessage:"{count} {count, plural, one {content type} other {content types}} selected"},{count:h.length}),disabled:!T,error:Y.error??!1,id:j.name,label:O({id:"Settings.review-workflows.workflow.contentTypes.label",defaultMessage:"Associated to"}),onChange:h=>{L((0,y.xY)({contentTypes:h})),_.setValue(h)},placeholder:O({id:"Settings.review-workflows.workflow.contentTypes.placeholder",defaultMessage:"Select"})},[...w.length>0?[{label:O({id:"Settings.review-workflows.workflow.contentTypes.collectionTypes.label",defaultMessage:"Collection Types"}),children:[...w].sort((h,P)=>ee.compare(h.info.displayName,P.info.displayName)).map(h=>({label:h.info.displayName,value:h.uid}))}]:[],...M.length>0?[{label:O({id:"Settings.review-workflows.workflow.contentTypes.singleTypes.label",defaultMessage:"Single Types"}),children:[...M].map(h=>({label:h.info.displayName,value:h.uid}))}]:[]].map(h=>"children"in h?e.createElement(r.np,{key:h.label,label:h.label,values:h.children.map(P=>P.value.toString())},h.children.map(P=>{const{name:te}=x.find(k=>(D&&k.id!==D.id||!D)&&k.contentTypes.includes(P.value))??{};return e.createElement(S,{key:P.value,value:P.value},O({id:"Settings.review-workflows.workflow.contentTypes.assigned.notice",defaultMessage:"{label} {name, select, undefined {} other {<i>(assigned to <em>{name}</em> workflow)</i>}}"},{label:P.label,name:te,em:(...k)=>e.createElement(l.o,{as:"em",fontWeight:"bold"},k),i:(...k)=>e.createElement(W,null,k)}))})):e.createElement(r.fe,{key:h.value,value:h.value},h.label)))))}A.defaultProps={canUpdate:!0},A.propTypes={canUpdate:o().bool}},11714:(C,v,t)=>{t.d(v,{Ae:()=>y,Al:()=>g,Cx:()=>o,Dp:()=>O,T1:()=>s,TE:()=>A,U:()=>i,YT:()=>c,Yy:()=>n,aM:()=>E,fR:()=>l,h$:()=>a,hH:()=>W,hK:()=>T,iz:()=>f,oA:()=>S,p6:()=>r,pq:()=>p,sT:()=>m});var e=t(54474);const r="settings_review-workflows",l="Settings/Review_Workflows/RESET_WORKFLOW",E="Settings/Review_Workflows/SET_CONTENT_TYPES",f="Settings/Review_Workflows/SET_IS_LOADING",n="Settings/Review_Workflows/SET_ROLES",m="Settings/Review_Workflows/SET_WORKFLOW",s="Settings/Review_Workflows/SET_WORKFLOWS",i="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",o="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",c="Settings/Review_Workflows/WORKFLOW_CLONE_STAGE",g="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",p="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGES",y="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",a="Settings/Review_Workflows/WORKFLOW_UPDATE",S={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},W=e._.colors.primary600,A={STAGE:"stage"},T="numberOfWorkflows",O="stagesPerWorkflow"},78101:(C,v,t)=>{t.d(v,{W:()=>E});var e=t(96540),r=t(78263),l=t(75942);function E(f={}){const{get:n}=(0,r.ry)(),{id:m="",...s}=f,i={populate:"stages"},{data:o,isLoading:c,status:g,refetch:p}=(0,l.useQuery)(["review-workflows","workflows",m],async()=>(await n(`/admin/review-workflows/workflows/${m}`,{params:{...i,...s}})).data),y=e.useMemo(()=>m&&o?.data?[o.data]:Array.isArray(o?.data)?o.data:[],[o?.data,m]);return{meta:e.useMemo(()=>o?.meta??{},[o?.meta]),workflows:y,isLoading:c,status:g,refetch:p}}},18960:(C,v,t)=>{t.d(v,{F:()=>E,u:()=>l});var e=t(41261),r=t(11714);const l={serverState:{contentTypes:{collectionTypes:[],singleTypes:[]},roles:[],workflow:null,workflows:[]},clientState:{currentWorkflow:{data:{name:"",contentTypes:[],stages:[],permissions:void 0}},isLoading:!0}};function E(n=l,m){return(0,e.jM)(n,s=>{const{payload:i}=m;switch(m.type){case r.aM:{s.serverState.contentTypes=i;break}case r.iz:{s.clientState.isLoading=i;break}case r.Yy:{s.serverState.roles=i;break}case r.sT:{const o=i;o&&(s.serverState.workflow=o,s.clientState.currentWorkflow.data={...o,stages:o.stages.map(c=>({...c,color:c?.color??r.hH}))});break}case r.T1:{s.serverState.workflows=i;break}case r.fR:{s.clientState=l.clientState,s.serverState=l.serverState;break}case r.U:{const{stageId:o}=i,{currentWorkflow:c}=n.clientState;s.clientState.currentWorkflow.data.stages=c.data.stages.filter(g=>(g?.id??g.__temp_key__)!==o);break}case r.Cx:{const{currentWorkflow:o}=n.clientState;o.data||(s.clientState.currentWorkflow.data={stages:[]});const c=f(s.clientState.currentWorkflow.data.stages);s.clientState.currentWorkflow.data.stages.push({...i,color:i?.color??r.hH,__temp_key__:c});break}case r.YT:{const{currentWorkflow:o}=n.clientState,{id:c}=i,g=o.data.stages.findIndex(y=>(y?.id??y?.__temp_key__)===c),p=o.data.stages[g];s.clientState.currentWorkflow.data.stages.splice(g+1,0,{...p,id:void 0,__temp_key__:f(s.clientState.currentWorkflow.data.stages)});break}case r.Al:{const{currentWorkflow:o}=n.clientState,{stageId:c,...g}=i;s.clientState.currentWorkflow.data.stages=o.data.stages.map(p=>(p.id??p.__temp_key__)===c?{...p,...g}:p);break}case r.pq:{const{currentWorkflow:o}=n.clientState;s.clientState.currentWorkflow.data.stages=o.data.stages.map(c=>({...c,...i}));break}case r.Ae:{const{currentWorkflow:{data:{stages:o}}}=n.clientState,{newIndex:c,oldIndex:g}=i;if(c>=0&&c<o.length){const p=o[g];let y=[...o];y.splice(g,1),y.splice(c,0,p),s.clientState.currentWorkflow.data.stages=y}break}case r.h$:{s.clientState.currentWorkflow.data={...s.clientState.currentWorkflow.data,...i};break}default:break}})}const f=(n=[])=>{const m=n.map(s=>s.id??s.__temp_key__);return Math.max(...m,-1)+1}},87953:(C,v,t)=>{t.d(v,{Di:()=>p,EJ:()=>c,Hc:()=>y,If:()=>g,NJ:()=>i,Ze:()=>o,tn:()=>m,y3:()=>s});var e=t(22325),r=t(2404),l=t.n(r),E=t(11714),f=t(18960);const n=a=>a[E.p6]??f.u,m=(0,e.Mz)(n,({serverState:{contentTypes:a}})=>a),s=(0,e.Mz)(n,({serverState:{roles:a}})=>a),i=(0,e.Mz)(n,({clientState:{currentWorkflow:a}})=>a.data),o=(0,e.Mz)(n,({serverState:{workflows:a}})=>a),c=(0,e.Mz)(n,({serverState:a,clientState:{currentWorkflow:S}})=>!l()(a.workflow,S.data)),g=(0,e.Mz)(n,({serverState:a,clientState:{currentWorkflow:S}})=>!(a.workflow?.stages??[]).every(W=>!!S.data.stages.find(({id:A})=>A===W.id))),p=(0,e.Mz)(n,({clientState:{isLoading:a}})=>a),y=(0,e.Mz)(n,({serverState:a})=>a)},30405:(C,v,t)=>{t.d(v,{M:()=>E,w:()=>l});var e=t(54474),r=t(11714);function l(f){if(!f)return null;const m=Object.entries(e._.colors).filter(([,s])=>s.toUpperCase()===f.toUpperCase()).reduce((s,[i])=>(r.oA?.[i]&&(s=i),s),null);return m?{themeColorName:m,name:r.oA[m]}:null}function E(){return Object.entries(r.oA).map(([f,n])=>({hex:e._.colors[f].toUpperCase(),name:n}))}},41090:(C,v,t)=>{t.d(v,{_:()=>E});var e=t(63560),r=t.n(e),l=t(20627);async function E({values:f,formatMessage:n}){const m=l.Ik({contentTypes:l.YO().of(l.Yj()),name:l.Yj().max(255,n({id:"Settings.review-workflows.validation.name.max-length",defaultMessage:"Name can not be longer than 255 characters"})).required(),stages:l.YO().of(l.Ik().shape({name:l.Yj().required(n({id:"Settings.review-workflows.validation.stage.name",defaultMessage:"Name is required"})).max(255,n({id:"Settings.review-workflows.validation.stage.max-length",defaultMessage:"Name can not be longer than 255 characters"})).test("unique-name",n({id:"Settings.review-workflows.validation.stage.duplicate",defaultMessage:"Stage name must be unique"}),function(s){const{options:{context:i}}=this;return i.stages.filter(o=>o.name===s).length===1}),color:l.Yj().required(n({id:"Settings.review-workflows.validation.stage.color",defaultMessage:"Color is required"})).matches(/^#(?:[0-9a-fA-F]{3}){1,2}$/i),permissions:l.YO(l.Ik({role:l.ai().strict().typeError(n({id:"Settings.review-workflows.validation.stage.permissions.role.number",defaultMessage:"Role must be of type number"})).required,action:l.Yj().required({id:"Settings.review-workflows.validation.stage.permissions.action.required",defaultMessage:"Action is a required argument"})})).strict()})).min(1)});try{return await m.validate(f,{abortEarly:!1,context:f}),!0}catch(s){let i={};return s instanceof l.yI&&s.inner.forEach(o=>{r()(i,o.path,o.message)}),i}}}}]);
