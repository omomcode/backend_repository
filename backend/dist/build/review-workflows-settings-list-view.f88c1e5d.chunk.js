"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[2225],{35099:(p,d,t)=>{t.d(d,{M:()=>E});var e=t(92132),n=t(44370),o=t(92333),f=t.n(o);function T(i,c,g){if(!i||!c||!g)return{display:"none"};const{x:s,y:a}=g;return{transform:`translate(${s}px, ${a}px)`}}const E=({renderItem:i})=>{const{itemType:c,isDragging:g,item:s,initialOffset:a,currentOffset:l,mouseOffset:O}=(0,o.useDragLayer)(m=>({item:m.getItem(),itemType:m.getItemType(),initialOffset:m.getInitialSourceClientOffset(),currentOffset:m.getSourceClientOffset(),isDragging:m.isDragging(),mouseOffset:m.getClientOffset()}));return g?(0,e.jsx)(n.a,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%",children:(0,e.jsx)(n.a,{style:T(a,l,O),children:i({type:c,item:s})})}):null}},55627:(p,d,t)=>{t.d(d,{m:()=>T});var e=t(21272),n=t(90602),o=t(60256),f=t(74930);function T(){const{get:E}=(0,n.ry)(),{formatAPIError:i}=(0,n.wq)(),c=(0,n.hN)(),g=(0,f.useQueries)([{queryKey:["content-manager","components"],async queryFn(){const{data:{data:r}}=await E("/content-manager/components");return r},onError(r){r instanceof o.pe&&c({type:"warning",message:i(r)})}},{queryKey:["content-manager","content-types"],async queryFn(){const{data:{data:r}}=await E("/content-manager/content-types");return r},onError(r){r instanceof o.pe&&c({type:"warning",message:i(r)})}}]),[s,a]=g,l=s.isLoading||a.isLoading,O=e.useMemo(()=>(a?.data??[]).filter(r=>r.kind==="collectionType"&&r.isDisplayed),[a?.data]),m=e.useMemo(()=>(a?.data??[]).filter(r=>r.kind!=="collectionType"&&r.isDisplayed),[a?.data]);return{isLoading:l,components:e.useMemo(()=>s?.data??[],[s?.data]),collectionTypes:O,singleTypes:m}}},20022:(p,d,t)=>{t.d(d,{b:()=>f});var e=t(21272),n=t(90602),o=t(74930);function f({enabled:T}={enabled:!0}){const{get:E}=(0,n.ry)(),{data:i,isError:c,isLoading:g}=(0,o.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:l}}=await E("/admin/license-limit-information");return l},{enabled:T}),s=e.useMemo(()=>i??{},[i]),a=e.useCallback(l=>(s?.features??[]).find(m=>m.name===l)?.options??{},[s?.features]);return{license:s,getFeature:a,isError:c,isLoading:g}}},89974:(p,d,t)=>{t.d(d,{kc:()=>W,nh:()=>S,Y9:()=>y,bL:()=>P});var e=t(21272),n=t(53432),o=t(55794),f=t(32559),T=t(43121),E=t(90602),i=t(95065),c=t(54894),g=t(35099),s=t(11714),a=t(43242),l=t(57842),O=t(28556),m=t(33544),r=t.n(m),A=t(63891);const C=(0,A.Ay)(a.s)`
  svg path {
    fill: ${({theme:w})=>w.colors.neutral600};
  }
`;function L({name:w}){return e.createElement(a.s,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,E.a8)(300)},e.createElement(C,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6},e.createElement(O.A,{width:`${8/16}rem`})),e.createElement(l.o,{fontWeight:"bold"},w))}L.propTypes={name:r().string.isRequired};function M({type:w,item:h}){switch(w){case s.TE.STAGE:return e.createElement(L,{...h});default:return null}}function S(){return e.createElement(g.M,{renderItem:M})}function P({children:w}){return e.createElement(n.P,null,e.createElement(o.g,{tabIndex:-1},e.createElement(f.s,null,w)))}function W({href:w}){const{formatMessage:h}=(0,c.A)();return e.createElement(E.N_,{startIcon:e.createElement(i.A,null),to:w},h({id:"global.back",defaultMessage:"Back"}))}function y({title:w,subtitle:h,navigationAction:R,primaryAction:D}){return e.createElement(e.Fragment,null,e.createElement(E.x7,{name:w}),e.createElement(T.Q,{navigationAction:R,primaryAction:D,title:w,subtitle:h}))}},59984:(p,d,t)=>{t.d(d,{nB:()=>M,bL:()=>W,hE:()=>L});var e=t(21272),n=t(57842),o=t(43242),f=t(50642),T=t(53900),E=t(44370),i=t(19106),c=t(49654),g=t(98889),s=t(33544),a=t.n(s),l=t(54894),O=t(63891);const m=t.p+"0cd5f8915b265d5b1856.png",r="limits-title",A="https://strapi.io/pricing-cloud",C="https://strapi.io/contact-sales";function L({children:y}){return e.createElement(n.o,{variant:"alpha",id:r},y)}L.propTypes={children:a().node.isRequired};function M({children:y}){return e.createElement(n.o,{variant:"omega"},y)}M.propTypes={children:a().node.isRequired};function S(){const{formatMessage:y}=(0,l.A)();return e.createElement(o.s,{gap:2,paddingTop:4},e.createElement(c.z,{variant:"default",isExternal:!0,href:A},y({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),e.createElement(c.z,{variant:"tertiary",isExternal:!0,href:C},y({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const P=O.Ay.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:y})=>`-${y.spaces[7]}`};
  margin-top: ${({theme:y})=>`-${y.spaces[7]}`};
  width: 360px;
`;function W({children:y,isOpen:w,onClose:h}){const{formatMessage:R}=(0,l.A)();return w?e.createElement(f.k,{labelledBy:r},e.createElement(T.c,null,e.createElement(o.s,{gap:2,paddingLeft:7,position:"relative"},e.createElement(o.s,{alignItems:"start",direction:"column",gap:2,width:"60%"},y,e.createElement(S,null)),e.createElement(o.s,{justifyContent:"end",height:"100%",width:"40%"},e.createElement(P,{src:m,"aria-hidden":!0,alt:"",loading:"lazy"}),e.createElement(E.a,{display:"flex",position:"absolute",right:0,top:0},e.createElement(i.K,{icon:e.createElement(g.A,null),"aria-label":R({id:"global.close",defaultMessage:"Close"}),onClick:h})))))):null}W.defaultProps={isOpen:!1},W.propTypes={children:a().node.isRequired,isOpen:a().bool,onClose:a().func.isRequired}},11714:(p,d,t)=>{t.d(d,{Ae:()=>m,Al:()=>l,Cx:()=>s,Dp:()=>S,T1:()=>c,TE:()=>L,U:()=>g,YT:()=>a,Yy:()=>E,aM:()=>f,fR:()=>o,h$:()=>r,hH:()=>C,hK:()=>M,iz:()=>T,oA:()=>A,p6:()=>n,pq:()=>O,sT:()=>i});var e=t(5538);const n="settings_review-workflows",o="Settings/Review_Workflows/RESET_WORKFLOW",f="Settings/Review_Workflows/SET_CONTENT_TYPES",T="Settings/Review_Workflows/SET_IS_LOADING",E="Settings/Review_Workflows/SET_ROLES",i="Settings/Review_Workflows/SET_WORKFLOW",c="Settings/Review_Workflows/SET_WORKFLOWS",g="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",s="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",a="Settings/Review_Workflows/WORKFLOW_CLONE_STAGE",l="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",O="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGES",m="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",r="Settings/Review_Workflows/WORKFLOW_UPDATE",A={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},C=e._.colors.primary600,L={STAGE:"stage"},M="numberOfWorkflows",S="stagesPerWorkflow"},78101:(p,d,t)=>{t.d(d,{W:()=>f});var e=t(21272),n=t(90602),o=t(74930);function f(T={}){const{get:E}=(0,n.ry)(),{id:i="",...c}=T,g={populate:"stages"},{data:s,isLoading:a,status:l,refetch:O}=(0,o.useQuery)(["review-workflows","workflows",i],async()=>(await E(`/admin/review-workflows/workflows/${i}`,{params:{...g,...c}})).data),m=e.useMemo(()=>i&&s?.data?[s.data]:Array.isArray(s?.data)?s.data:[],[s?.data,i]);return{meta:e.useMemo(()=>s?.meta??{},[s?.meta]),workflows:m,isLoading:a,status:l,refetch:O}}},1803:(p,d,t)=>{t.r(d),t.d(d,{default:()=>J});var e=t(21272),n=t(90602),o=t(82437),f=t(71526),T=t(43242),E=t(62228),i=t(79318),c=t(67479),g=t(70768),s=t(34508),a=t(21270),l=t(57842),O=t(96586),m=t(83314),r=t(19106),A=t(31127),C=t(31708),L=t(39423),M=t(54894),S=t(74930),P=t(17703),W=t(63891),y=t(55627),w=t(20022),h=t(89974),R=t(59984),D=t(11714),Q=t(78101);const V=(0,W.Ay)(n.N_)`
  align-items: center;
  height: ${(0,n.a8)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:u})=>`${u.spaces[2]}}`};
  width: ${(0,n.a8)(32)};

  svg {
    height: ${(0,n.a8)(12)};
    width: ${(0,n.a8)(12)};

    path {
      fill: ${({theme:u})=>u.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:u})=>u.colors.neutral800};
      }
    }
  }
`;function X(){const{formatMessage:u}=(0,M.A)(),{push:$}=(0,P.W6)(),{collectionTypes:Z,singleTypes:b,isLoading:_}=(0,y.m)(),{meta:x,workflows:j,isLoading:N,refetch:q}=(0,Q.W)(),[k,U]=e.useState(null),[ee,B]=e.useState(!1),{del:te}=(0,n.ry)(),{formatAPIError:ne}=(0,n.wq)(),G=(0,n.hN)(),{getFeature:se,isLoading:H}=(0,w.b)(),{trackUsage:z}=(0,n.z1)(),ae=(0,o.d4)(f.G),{allowedActions:{canCreate:Y,canDelete:oe}}=(0,n.ec)(ae.settings["review-workflows"]),I=se("review-workflows"),{mutateAsync:le,isLoading:re}=(0,S.useMutation)(async({workflowId:v,stages:K})=>{const{data:{data:F}}=await te(`/admin/review-workflows/workflows/${v}`,{data:K});return F},{onSuccess(){G({type:"success",message:{id:"notification.success.deleted",defaultMessage:"Deleted"}})}}),ie=v=>[...Z,...b].find(F=>F.uid===v).info.displayName,de=v=>{U(v)},ce=()=>{U(null)},Ee=async()=>{try{const v=await le({workflowId:k});return await q(),U(null),v}catch(v){return G({type:"warning",message:ne(v)}),null}};return e.useEffect(()=>{!N&&!H&&I?.[D.hK]&&x?.workflowCount>parseInt(I[D.hK],10)&&B(!0)},[H,N,I,x?.workflowCount,x.workflowsTotal]),e.createElement(e.Fragment,null,e.createElement(h.Y9,{primaryAction:Y&&e.createElement(n.z9,{startIcon:e.createElement(A.A,null),size:"S",to:"/settings/review-workflows/create",onClick:v=>{I?.[D.hK]&&x?.workflowCount>=parseInt(I[D.hK],10)?(v.preventDefault(),B(!0)):z("willCreateWorkflow")}},u({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),subtitle:u({id:"Settings.review-workflows.list.page.subtitle",defaultMessage:"Manage your content review process"}),title:u({id:"Settings.review-workflows.list.page.title",defaultMessage:"Review Workflows"})}),e.createElement(h.bL,null,N||_?e.createElement(T.s,{justifyContent:"center"},e.createElement(E.a,null,u({id:"Settings.review-workflows.page.list.isLoading",defaultMessage:"Workflows are loading"}))):e.createElement(i.X,{colCount:3,footer:Y&&e.createElement(c.S,{icon:e.createElement(A.A,null),onClick:()=>{I?.[D.hK]&&x?.workflowCount>=parseInt(I[D.hK],10)?B(!0):($("/settings/review-workflows/create"),z("willCreateWorkflow"))}},u({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),rowCount:1},e.createElement(g.d,null,e.createElement(s.Tr,null,e.createElement(a.Th,null,e.createElement(l.o,{variant:"sigma"},u({id:"Settings.review-workflows.list.page.list.column.name.title",defaultMessage:"Name"}))),e.createElement(a.Th,null,e.createElement(l.o,{variant:"sigma"},u({id:"Settings.review-workflows.list.page.list.column.stages.title",defaultMessage:"Stages"}))),e.createElement(a.Th,null,e.createElement(l.o,{variant:"sigma"},u({id:"Settings.review-workflows.list.page.list.column.contentTypes.title",defaultMessage:"Content Types"}))),e.createElement(a.Th,null,e.createElement(O.s,null,u({id:"Settings.review-workflows.list.page.list.column.actions.title",defaultMessage:"Actions"}))))),e.createElement(m.N,null,j.map(v=>e.createElement(s.Tr,{...(0,n.qM)({fn(K){K.target.nodeName!=="BUTTON"&&$(`/settings/review-workflows/${v.id}`)}}),key:`workflow-${v.id}`},e.createElement(a.Td,{width:(0,n.a8)(250)},e.createElement(l.o,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0},v.name)),e.createElement(a.Td,null,e.createElement(l.o,{textColor:"neutral800"},v.stages.length)),e.createElement(a.Td,null,e.createElement(l.o,{textColor:"neutral800"},(v?.contentTypes??[]).map(ie).join(", "))),e.createElement(a.Td,null,e.createElement(T.s,{alignItems:"center",justifyContent:"end"},e.createElement(V,{to:`/settings/review-workflows/${v.id}`,"aria-label":u({id:"Settings.review-workflows.list.page.list.column.actions.edit.label",defaultMessage:"Edit {name}"},{name:v.name})},e.createElement(C.A,null)),j.length>1&&oe&&e.createElement(r.K,{"aria-label":u({id:"Settings.review-workflows.list.page.list.column.actions.delete.label",defaultMessage:"Delete {name}"},{name:"Default workflow"}),icon:e.createElement(L.A,null),noBorder:!0,onClick:()=>{de(v.id)}}))))))),e.createElement(n.TM,{bodyText:{id:"Settings.review-workflows.list.page.delete.confirm.body",defaultMessage:"If you remove this worfklow, all stage-related information will be removed for this content-type. Are you sure you want to remove it?"},isConfirmButtonLoading:re,isOpen:!!k,onToggleDialog:ce,onConfirm:Ee}),e.createElement(R.bL,{isOpen:ee,onClose:()=>B(!1)},e.createElement(R.hE,null,u({id:"Settings.review-workflows.list.page.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),e.createElement(R.nB,null,u({id:"Settings.review-workflows.list.page.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."})))))}function J(){const u=(0,o.d4)(f.G);return e.createElement(n.kz,{permissions:u.settings["review-workflows"].main},e.createElement(X,null))}},67479:(p,d,t)=>{t.d(d,{S:()=>g});var e=t(92132),n=t(63891),o=t(44370),f=t(24122),T=t(43242),E=t(57842);const i=(0,n.Ay)(o.a)`
  height: ${24/16}rem;
  width: ${24/16}rem;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;

  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
  }

  svg path {
    fill: ${({theme:s})=>s.colors.primary600};
  }
`,c=(0,n.Ay)(o.a)`
  border-radius: 0 0 ${({theme:s})=>s.borderRadius} ${({theme:s})=>s.borderRadius};
  display: block;
  width: 100%;
  border: none;
`,g=({children:s,icon:a,...l})=>(0,e.jsxs)("div",{children:[(0,e.jsx)(f.c,{}),(0,e.jsx)(c,{as:"button",background:"primary100",padding:5,...l,children:(0,e.jsxs)(T.s,{children:[(0,e.jsx)(i,{"aria-hidden":!0,background:"primary200",children:a}),(0,e.jsx)(o.a,{paddingLeft:3,children:(0,e.jsx)(E.o,{variant:"pi",fontWeight:"bold",textColor:"primary600",children:s})})]})})]})},95065:(p,d,t)=>{t.d(d,{A:()=>o});var e=t(92132);const n=f=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...f,children:(0,e.jsx)("path",{fill:"#212134",d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z"})}),o=n},60256:(p,d,t)=>{t.d(d,{pe:()=>o});var e=t(41629);const{Axios:n,AxiosError:o,CanceledError:f,isCancel:T,CancelToken:E,VERSION:i,all:c,Cancel:g,isAxiosError:s,spread:a,toFormData:l,AxiosHeaders:O,HttpStatusCode:m,formToJSON:r,getAdapter:A,mergeConfig:C}=e.A}}]);
