(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{1722:function(t,e,n){Promise.resolve().then(n.bind(n,2693)),Promise.resolve().then(n.t.bind(n,5818,23))},2693:function(t,e,n){"use strict";n.r(e);var r=n(7437),o=n(2265);n(6351);var a=n(2860),c=n(2173),i=n(2993);n(2601),e.default=()=>{let{products:t}=(0,i.C)(t=>t.products);(0,o.useEffect)(()=>{let t=async()=>{};t()});let[e,n]=(0,o.useState)(""),[s,u]=(0,o.useState)(t.map(t=>{var e;return{id:t.id.toString(),quantity:null===(e=t.quantity)||void 0===e?void 0:e.toString()}}));return(0,r.jsxs)("div",{className:"paymentprocess",children:[(0,r.jsx)(a.Vv,{options:{clientId:"AbR_8aOj6sjAO4uVgpF6i1W2wAPRNKTFJYvvlClX0zoeKGo0iJUuxeISqQ41OH6t8ahL7egPESU-ELEm",currency:"EUR",intent:"capture","enable-funding":"paylater,venmo","data-sdk-integration-source":"integrationbuilder_ac"},children:(0,r.jsx)(a.ch,{className:"paypalButton",style:{shape:"rect",layout:"vertical"},createOrder:async()=>{try{let e=await c.Z.post("http://127.0.0.1:1337/omcommerce/payment/orders",{cart:s,country_code:"RS"},{headers:{"Content-Type":"application/json"}}),n=e.data;if(n.id)return n.id;{var t;let e=null==n?void 0:null===(t=n.details)||void 0===t?void 0:t[0],r=e?"".concat(e.issue," ").concat(e.description," (").concat(n.debug_id,")"):JSON.stringify(n);throw Error(r)}}catch(t){console.error(t),n("Could not initiate PayPal Checkout...".concat(t))}},onApprove:async(t,e)=>{try{var r;let o=await c.Z.post("http://127.0.0.1:1337/omcommerce/payment/capture",{orderID:t.orderID}),a=await o.data,i=null==a?void 0:null===(r=a.details)||void 0===r?void 0:r[0];if((null==i?void 0:i.issue)==="INSTRUMENT_DECLINED")return e.restart();if(i)throw Error("".concat(i.description," (").concat(a.debug_id,")"));{let t=a.purchase_units[0].payments.captures[0];n("Transaction ".concat(t.status,": ").concat(t.id)),console.log("Capture result",a,JSON.stringify(a,null,2))}}catch(t){console.error(t),n("Sorry, your transaction could not be processed...".concat(t))}}})}),e&&(0,r.jsx)("div",{className:"alert-message",children:(0,r.jsx)(function(t){return(0,r.jsx)("p",{children:t.content})},{content:e})})]})}},2993:function(t,e,n){"use strict";n.d(e,{C:function(){return o}});var r=n(3198);let o=r.v9},6351:function(){},5818:function(){}},function(t){t.O(0,[745,173,971,596,744],function(){return t(t.s=1722)}),_N_E=t.O()}]);